import{j as e,Y as C,h as S,Z as P,J as E,_ as F,$ as I}from"./ui-CzfS0qy-.js";import{r as p}from"./vendor-6qmzlMN_.js";import{B as u,C as m,a as o,b as x,c as h,L as l,I as c,S as v}from"./index-DE0KlM-o.js";function $({onBack:N,selectedClass:n,selectedPackage:s,onSuccess:b}){const[r,j]=p.useState({name:"",email:"",phone:""}),[g,y]=p.useState(!1),[f,d]=p.useState(null),w=async()=>{if(!(!r.name||!r.email)){y(!0),d(null);try{const a={studentName:r.name,studentEmail:r.email,studentPhone:r.phone,amount:n?11:s?s.price:0,classDetails:n,packageDetails:s};console.log("Creating payment intent with data:",a);const i=await v.createPaymentIntent(a);if(!i)throw new Error("Failed to create payment intent");console.log("Payment intent created, client secret:",i),console.log("Processing payment...");try{await v.processPayment(i,t=>{console.log("Payment succeeded:",t),b()},t=>{console.error("Payment failed:",t),d(t)}),console.log("Payment processing completed")}catch(t){console.error("Error in payment processing:",t),d("Payment processing failed: "+((t==null?void 0:t.message)||"Unknown error"))}}catch(a){d(a.message||"Payment failed. Please try again.")}finally{y(!1)}}};return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsxs(u,{variant:"outline",size:"sm",onClick:N,className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),"Back"]}),e.jsx("h1",{className:"text-2xl font-heading",children:"Secure Payment"})]}),e.jsxs(m,{className:"mb-6",children:[e.jsx(o,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5"}),"Payment Method"]})}),e.jsx(h,{children:e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(P,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"font-semibold text-green-800",children:"Secure Payment with Stripe"})]}),e.jsx("p",{className:"text-green-700 text-sm",children:"Your payment is processed securely by Stripe. We accept all major credit cards, debit cards, and digital wallets."}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs text-green-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-3 h-3"}),e.jsx("span",{children:"Bank-level security"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"w-3 h-3"}),e.jsx("span",{children:"PCI compliant"})]})]})]})})]}),e.jsxs(m,{className:"mb-6",children:[e.jsx(o,{children:e.jsx(x,{children:"Order Summary"})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:n?"Single Class":s==null?void 0:s.name}),e.jsxs("span",{className:"font-bold",children:["$",n?"11.00":s?s.price.toFixed(2):"0.00"]})]}),n&&e.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Class:"})," ",n.className]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Teacher:"})," ",n.teacher]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",n.day]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Time:"})," ",n.time]})]}),s&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Package Type:"})," ",s.type==="five"?"5-Class Package":"10-Class Package"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Classes Included:"})," ",s.type==="five"?"5":"10"]})]}),e.jsxs("div",{className:"border-t pt-3 mt-3",children:[e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",n?"11.00":s?s.price.toFixed(2):"0.00"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"* Processing fees included in total"})]})]})})]}),e.jsxs(m,{className:"mb-6",children:[e.jsx(o,{children:e.jsx(x,{children:"Student Information"})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"studentName",children:"Full Name *"}),e.jsx(c,{id:"studentName",value:r.name,onChange:a=>j(i=>({...i,name:a.target.value})),placeholder:"Enter your full name",required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"studentEmail",children:"Email Address *"}),e.jsx(c,{id:"studentEmail",type:"email",value:r.email,onChange:a=>j(i=>({...i,email:a.target.value})),placeholder:"Enter your email address",required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"studentPhone",children:"Phone Number"}),e.jsx(c,{id:"studentPhone",value:r.phone,onChange:a=>j(i=>({...i,phone:a.target.value})),placeholder:"Enter your phone number"})]})]})})]}),e.jsxs(m,{className:"mb-6",children:[e.jsx(o,{children:e.jsx(x,{children:"Payment Information"})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"cardNumber",children:"Card Number *"}),e.jsx(c,{id:"cardNumber",placeholder:"1234 5678 9012 3456",className:"font-mono"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"We accept Visa, Mastercard, Discover, and American Express"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"expiryDate",children:"Expiry Date *"}),e.jsx(c,{id:"expiryDate",placeholder:"MM/YY",className:"font-mono"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"cvv",children:"CVV *"}),e.jsx(c,{id:"cvv",placeholder:"123",className:"font-mono",maxLength:4})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"billingZip",children:"Billing ZIP Code *"}),e.jsx(c,{id:"billingZip",placeholder:"12345",className:"font-mono",maxLength:10})]})]})})]}),f&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-red-700 text-sm",children:f})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(u,{onClick:N,variant:"outline",className:"flex-1",children:"Cancel"}),e.jsx(u,{onClick:w,disabled:g||!r.name||!r.email,className:"flex-1",children:g?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):`Pay $${n?"11.00":s?s.price.toFixed(2):"0.00"}`})]})]})})})}export{$ as StripePaymentPage};
