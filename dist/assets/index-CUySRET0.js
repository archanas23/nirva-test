const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/stripe-elements-payment-KMd-hILd.js","assets/ui-iTfJuaSB.js","assets/vendor-0XlEdgNv.js"])))=>i.map(i=>d[i]);
var Bi=Object.defineProperty;var Fi=(a,e,s)=>e in a?Bi(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var ys=(a,e,s)=>Fi(a,typeof e!="symbol"?e+"":e,s);import{j as t,S as wn,a as Ia,X as ea,M as qi,U as Ct,C as Wi,b as De,c as Hi,d as Vi,e as Gi,H as Yi,W as Ki,P as de,f as is,g as Ji,h as Sr,i as qt,k as Zi,L as Oa,l as ta,m as Wt,n as Xi,o as jn,p as $s,u as cs,q as hs,r as he,s as fs,t as Ce,v as st,w as _n,x as Qs,y as sa,R as Qi,z as el,A as tl,T as sl,D as rl,B as al,O as nl,E as ol,F as Nn,G as il,I as ll,J as cl,K as As,N as kt,Q as dl,V as kn,Y as ul,Z as hl,_ as fl,$ as ml,a0 as gl,a1 as pl,a2 as xl,a3 as vl,a4 as bl,a5 as yl,a6 as wl,a7 as jl,a8 as ra,a9 as et,aa as Sn,ab as Cn,ac as $a,ad as _l,ae as Nl,af as Pn,ag as En,ah as Da,ai as kl,aj as Sl,ak as Cl,al as pr,am as La}from"./ui-iTfJuaSB.js";import{a as aa,r as p,g as Pl,d as Le,R as A,c as El}from"./vendor-0XlEdgNv.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();var Cr={},Ma=aa;Cr.createRoot=Ma.createRoot,Cr.hydrateRoot=Ma.hydrateRoot;const Tl="modulepreload",Al=function(a){return"/"+a},Ua={},lt=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(s.map(l=>{if(l=Al(l),l in Ua)return;Ua[l]=!0;const d=l.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Tl,d||(h.as="script"),h.crossOrigin="",h.href=l,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((v,f)=>{h.addEventListener("load",v),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return n.then(i=>{for(const c of i||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};function Tn({className:a="",size:e="md",showText:s=!0}){const r={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24","2xl":"w-32 h-32","3xl":"w-40 h-40"},n={sm:"text-lg",md:"text-xl",lg:"text-2xl",xl:"text-3xl","2xl":"text-4xl","3xl":"text-5xl"};return t.jsxs("div",{className:`flex items-center gap-3 ${a}`,children:[t.jsxs("svg",{viewBox:"0 0 100 100",className:r[e],fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsxs("g",{children:[t.jsx("ellipse",{cx:"50",cy:"35",rx:"6",ry:"15",fill:"#A5B4B8"}),t.jsx("ellipse",{cx:"62",cy:"42",rx:"6",ry:"15",fill:"#95ADB2",transform:"rotate(45 62 42)"}),t.jsx("ellipse",{cx:"62",cy:"58",rx:"6",ry:"15",fill:"#FF6B9D",transform:"rotate(90 62 58)"}),t.jsx("ellipse",{cx:"50",cy:"65",rx:"6",ry:"15",fill:"#F472B6",transform:"rotate(135 50 65)"}),t.jsx("ellipse",{cx:"38",cy:"58",rx:"6",ry:"15",fill:"#FF6B9D",transform:"rotate(180 38 58)"}),t.jsx("ellipse",{cx:"38",cy:"42",rx:"6",ry:"15",fill:"#95ADB2",transform:"rotate(-45 38 42)"})]}),t.jsx("circle",{cx:"50",cy:"50",r:"8",fill:"#E879A6"}),t.jsx("circle",{cx:"50",cy:"50",r:"5",fill:"#F298BC"}),t.jsx("circle",{cx:"50",cy:"50",r:"2",fill:"#F8B7D1"})]}),s&&t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:`tracking-wide ${n[e]} font-serif`,style:{fontWeight:"300",letterSpacing:"0.05em",color:"var(--color-muted-foreground)"},children:"Nirva"}),t.jsx("span",{className:"font-serif tracking-wider text-muted-foreground",style:{fontSize:"var(--font-size-xs)",fontWeight:"400",letterSpacing:"0.15em"},children:"Y O G A"})]})]})}function An(a){var e,s,r="";if(typeof a=="string"||typeof a=="number")r+=a;else if(typeof a=="object")if(Array.isArray(a)){var n=a.length;for(e=0;e<n;e++)a[e]&&(s=An(a[e]))&&(r&&(r+=" "),r+=s)}else for(s in a)a[s]&&(r&&(r+=" "),r+=s);return r}function Rn(){for(var a,e,s=0,r="",n=arguments.length;s<n;s++)(a=arguments[s])&&(e=An(a))&&(r&&(r+=" "),r+=e);return r}const za=a=>typeof a=="boolean"?`${a}`:a===0?"0":a,Ba=Rn,na=(a,e)=>s=>{var r;if((e==null?void 0:e.variants)==null)return Ba(a,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:n,defaultVariants:o}=e,i=Object.keys(n).map(d=>{const u=s==null?void 0:s[d],h=o==null?void 0:o[d];if(u===null)return null;const v=za(u)||za(h);return n[d][v]}),c=s&&Object.entries(s).reduce((d,u)=>{let[h,v]=u;return v===void 0||(d[h]=v),d},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:h,className:v,...f}=u;return Object.entries(f).every(j=>{let[y,x]=j;return Array.isArray(x)?x.includes({...o,...c}[y]):{...o,...c}[y]===x})?[...d,h,v]:d},[]);return Ba(a,i,l,s==null?void 0:s.class,s==null?void 0:s.className)},oa="-",Rl=a=>{const e=Ol(a),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=a;return{getClassGroupId:i=>{const c=i.split(oa);return c[0]===""&&c.length!==1&&c.shift(),In(c,e)||Il(i)},getConflictingClassGroupIds:(i,c)=>{const l=s[i]||[];return c&&r[i]?[...l,...r[i]]:l}}},In=(a,e)=>{var i;if(a.length===0)return e.classGroupId;const s=a[0],r=e.nextPart.get(s),n=r?In(a.slice(1),r):void 0;if(n)return n;if(e.validators.length===0)return;const o=a.join(oa);return(i=e.validators.find(({validator:c})=>c(o)))==null?void 0:i.classGroupId},Fa=/^\[(.+)\]$/,Il=a=>{if(Fa.test(a)){const e=Fa.exec(a)[1],s=e==null?void 0:e.substring(0,e.indexOf(":"));if(s)return"arbitrary.."+s}},Ol=a=>{const{theme:e,prefix:s}=a,r={nextPart:new Map,validators:[]};return Dl(Object.entries(a.classGroups),s).forEach(([o,i])=>{Pr(i,r,o,e)}),r},Pr=(a,e,s,r)=>{a.forEach(n=>{if(typeof n=="string"){const o=n===""?e:qa(e,n);o.classGroupId=s;return}if(typeof n=="function"){if($l(n)){Pr(n(r),e,s,r);return}e.validators.push({validator:n,classGroupId:s});return}Object.entries(n).forEach(([o,i])=>{Pr(i,qa(e,o),s,r)})})},qa=(a,e)=>{let s=a;return e.split(oa).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},$l=a=>a.isThemeGetter,Dl=(a,e)=>e?a.map(([s,r])=>{const n=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,c])=>[e+i,c])):o);return[s,n]}):a,Ll=a=>{if(a<1)return{get:()=>{},set:()=>{}};let e=0,s=new Map,r=new Map;const n=(o,i)=>{s.set(o,i),e++,e>a&&(e=0,r=s,s=new Map)};return{get(o){let i=s.get(o);if(i!==void 0)return i;if((i=r.get(o))!==void 0)return n(o,i),i},set(o,i){s.has(o)?s.set(o,i):n(o,i)}}},On="!",Ml=a=>{const{separator:e,experimentalParseClassName:s}=a,r=e.length===1,n=e[0],o=e.length,i=c=>{const l=[];let d=0,u=0,h;for(let x=0;x<c.length;x++){let b=c[x];if(d===0){if(b===n&&(r||c.slice(x,x+o)===e)){l.push(c.slice(u,x)),u=x+o;continue}if(b==="/"){h=x;continue}}b==="["?d++:b==="]"&&d--}const v=l.length===0?c:c.substring(u),f=v.startsWith(On),j=f?v.substring(1):v,y=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:j,maybePostfixModifierPosition:y}};return s?c=>s({className:c,parseClassName:i}):i},Ul=a=>{if(a.length<=1)return a;const e=[];let s=[];return a.forEach(r=>{r[0]==="["?(e.push(...s.sort(),r),s=[]):s.push(r)}),e.push(...s.sort()),e},zl=a=>({cache:Ll(a.cacheSize),parseClassName:Ml(a),...Rl(a)}),Bl=/\s+/,Fl=(a,e)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:n}=e,o=[],i=a.trim().split(Bl);let c="";for(let l=i.length-1;l>=0;l-=1){const d=i[l],{modifiers:u,hasImportantModifier:h,baseClassName:v,maybePostfixModifierPosition:f}=s(d);let j=!!f,y=r(j?v.substring(0,f):v);if(!y){if(!j){c=d+(c.length>0?" "+c:c);continue}if(y=r(v),!y){c=d+(c.length>0?" "+c:c);continue}j=!1}const x=Ul(u).join(":"),b=h?x+On:x,m=b+y;if(o.includes(m))continue;o.push(m);const g=n(y,j);for(let _=0;_<g.length;++_){const S=g[_];o.push(b+S)}c=d+(c.length>0?" "+c:c)}return c};function ql(){let a=0,e,s,r="";for(;a<arguments.length;)(e=arguments[a++])&&(s=$n(e))&&(r&&(r+=" "),r+=s);return r}const $n=a=>{if(typeof a=="string")return a;let e,s="";for(let r=0;r<a.length;r++)a[r]&&(e=$n(a[r]))&&(s&&(s+=" "),s+=e);return s};function Wl(a,...e){let s,r,n,o=i;function i(l){const d=e.reduce((u,h)=>h(u),a());return s=zl(d),r=s.cache.get,n=s.cache.set,o=c,c(l)}function c(l){const d=r(l);if(d)return d;const u=Fl(l,s);return n(l,u),u}return function(){return o(ql.apply(null,arguments))}}const xe=a=>{const e=s=>s[a]||[];return e.isThemeGetter=!0,e},Dn=/^\[(?:([a-z-]+):)?(.+)\]$/i,Hl=/^\d+\/\d+$/,Vl=new Set(["px","full","screen"]),Gl=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Yl=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Kl=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Jl=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Zl=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,nt=a=>ls(a)||Vl.has(a)||Hl.test(a),bt=a=>ms(a,"length",nc),ls=a=>!!a&&!Number.isNaN(Number(a)),xr=a=>ms(a,"number",ls),ws=a=>!!a&&Number.isInteger(Number(a)),Xl=a=>a.endsWith("%")&&ls(a.slice(0,-1)),se=a=>Dn.test(a),yt=a=>Gl.test(a),Ql=new Set(["length","size","percentage"]),ec=a=>ms(a,Ql,Ln),tc=a=>ms(a,"position",Ln),sc=new Set(["image","url"]),rc=a=>ms(a,sc,ic),ac=a=>ms(a,"",oc),js=()=>!0,ms=(a,e,s)=>{const r=Dn.exec(a);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):s(r[2]):!1},nc=a=>Yl.test(a)&&!Kl.test(a),Ln=()=>!1,oc=a=>Jl.test(a),ic=a=>Zl.test(a),lc=()=>{const a=xe("colors"),e=xe("spacing"),s=xe("blur"),r=xe("brightness"),n=xe("borderColor"),o=xe("borderRadius"),i=xe("borderSpacing"),c=xe("borderWidth"),l=xe("contrast"),d=xe("grayscale"),u=xe("hueRotate"),h=xe("invert"),v=xe("gap"),f=xe("gradientColorStops"),j=xe("gradientColorStopPositions"),y=xe("inset"),x=xe("margin"),b=xe("opacity"),m=xe("padding"),g=xe("saturate"),_=xe("scale"),S=xe("sepia"),R=xe("skew"),N=xe("space"),D=xe("translate"),M=()=>["auto","contain","none"],Z=()=>["auto","hidden","clip","visible","scroll"],Q=()=>["auto",se,e],q=()=>[se,e],T=()=>["",nt,bt],ue=()=>["auto",ls,se],be=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ce=()=>["solid","dashed","dotted","double","none"],fe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],P=()=>["","0",se],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[ls,se];return{cacheSize:500,separator:":",theme:{colors:[js],spacing:[nt,bt],blur:["none","",yt,se],brightness:W(),borderColor:[a],borderRadius:["none","","full",yt,se],borderSpacing:q(),borderWidth:T(),contrast:W(),grayscale:P(),hueRotate:W(),invert:P(),gap:q(),gradientColorStops:[a],gradientColorStopPositions:[Xl,bt],inset:Q(),margin:Q(),opacity:W(),padding:q(),saturate:W(),scale:W(),sepia:P(),skew:W(),space:q(),translate:q()},classGroups:{aspect:[{aspect:["auto","square","video",se]}],container:["container"],columns:[{columns:[yt]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...be(),se]}],overflow:[{overflow:Z()}],"overflow-x":[{"overflow-x":Z()}],"overflow-y":[{"overflow-y":Z()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ws,se]}],basis:[{basis:Q()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",se]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",ws,se]}],"grid-cols":[{"grid-cols":[js]}],"col-start-end":[{col:["auto",{span:["full",ws,se]},se]}],"col-start":[{"col-start":ue()}],"col-end":[{"col-end":ue()}],"grid-rows":[{"grid-rows":[js]}],"row-start-end":[{row:["auto",{span:[ws,se]},se]}],"row-start":[{"row-start":ue()}],"row-end":[{"row-end":ue()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",se]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",se]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",se,e]}],"min-w":[{"min-w":[se,e,"min","max","fit"]}],"max-w":[{"max-w":[se,e,"none","full","min","max","fit","prose",{screen:[yt]},yt]}],h:[{h:[se,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[se,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[se,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[se,e,"auto","min","max","fit"]}],"font-size":[{text:["base",yt,bt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",xr]}],"font-family":[{font:[js]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",se]}],"line-clamp":[{"line-clamp":["none",ls,xr]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",nt,se]}],"list-image":[{"list-image":["none",se]}],"list-style-type":[{list:["none","disc","decimal",se]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[a]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[a]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ce(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",nt,bt]}],"underline-offset":[{"underline-offset":["auto",nt,se]}],"text-decoration-color":[{decoration:[a]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...be(),tc]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ec]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},rc]}],"bg-color":[{bg:[a]}],"gradient-from-pos":[{from:[j]}],"gradient-via-pos":[{via:[j]}],"gradient-to-pos":[{to:[j]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...ce(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:ce()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...ce()]}],"outline-offset":[{"outline-offset":[nt,se]}],"outline-w":[{outline:[nt,bt]}],"outline-color":[{outline:[a]}],"ring-w":[{ring:T()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[a]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[nt,bt]}],"ring-offset-color":[{"ring-offset":[a]}],shadow:[{shadow:["","inner","none",yt,ac]}],"shadow-color":[{shadow:[js]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...fe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":fe()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",yt,se]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[g]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[g]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",se]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",se]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",se]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[ws,se]}],"translate-x":[{"translate-x":[D]}],"translate-y":[{"translate-y":[D]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",se]}],accent:[{accent:["auto",a]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",se]}],"caret-color":[{caret:[a]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":q()}],"scroll-mx":[{"scroll-mx":q()}],"scroll-my":[{"scroll-my":q()}],"scroll-ms":[{"scroll-ms":q()}],"scroll-me":[{"scroll-me":q()}],"scroll-mt":[{"scroll-mt":q()}],"scroll-mr":[{"scroll-mr":q()}],"scroll-mb":[{"scroll-mb":q()}],"scroll-ml":[{"scroll-ml":q()}],"scroll-p":[{"scroll-p":q()}],"scroll-px":[{"scroll-px":q()}],"scroll-py":[{"scroll-py":q()}],"scroll-ps":[{"scroll-ps":q()}],"scroll-pe":[{"scroll-pe":q()}],"scroll-pt":[{"scroll-pt":q()}],"scroll-pr":[{"scroll-pr":q()}],"scroll-pb":[{"scroll-pb":q()}],"scroll-pl":[{"scroll-pl":q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",se]}],fill:[{fill:[a,"none"]}],"stroke-w":[{stroke:[nt,bt,xr]}],stroke:[{stroke:[a,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},cc=Wl(lc);function re(...a){return cc(Rn(a))}const dc=na("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function $({className:a,variant:e,size:s,asChild:r=!1,...n}){const o=r?wn:"button";return t.jsx(o,{"data-slot":"button",className:re(dc({variant:e,size:s,className:a})),...n})}function wt({user:a,onLoginClick:e,onAccountClick:s,currentView:r,onNavigateHome:n,onNavigateClasses:o,onNavigateTeachers:i,onNavigatePackages:c,onNavigateContact:l,onNavigateRegister:d,onNavigateFAQ:u,onNavigateAdmin:h}){const[v,f]=p.useState(!1),[j,y]=p.useState(!1),x=(a==null?void 0:a.email)==="nirvayogastudio@gmail.com";p.useEffect(()=>{const m=g=>{g.ctrlKey&&g.shiftKey&&g.key==="A"&&x&&(g.preventDefault(),f(!0))};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[x]),p.useEffect(()=>{f(!!x)},[x]);const b=m=>{m==null||m(),y(!1)};return t.jsxs("nav",{className:"sticky top-0 z-50 bg-background/95 backdrop-blur-md border-b border-border shadow-lg",children:[t.jsx("div",{className:"container mx-auto px-4 sm:px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("button",{onClick:n,className:"flex items-center hover:opacity-80 transition-opacity",children:t.jsx(Tn,{size:"sm"})}),t.jsxs("div",{className:"hidden lg:flex items-center gap-6 xl:gap-8 font-body",style:{fontSize:"var(--font-size-base)"},children:[t.jsx("button",{onClick:n,className:`transition-all duration-200 py-2 px-3 rounded-md ${r==="home"?"text-primary font-semibold bg-accent":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,children:"Home"}),t.jsx("button",{onClick:o,className:`transition-all duration-200 py-2 px-3 rounded-md ${r==="classes"?"text-primary font-semibold bg-accent":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,children:"Classes"}),t.jsx("button",{onClick:c,className:`transition-all duration-200 py-2 px-3 rounded-md ${r==="packages"?"text-primary font-semibold bg-accent":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,children:"Packages"}),t.jsx("button",{onClick:i,className:`transition-all duration-200 py-2 px-3 rounded-md ${r==="teachers"?"text-primary font-semibold bg-accent":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,children:"Teachers"}),t.jsx("button",{onClick:l,className:`transition-all duration-200 py-2 px-3 rounded-md ${r==="contact"?"text-primary font-semibold bg-accent":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,children:"Contact"}),t.jsx("button",{onClick:d,className:`transition-all duration-200 py-2 px-3 rounded-md ${r==="register"?"text-primary font-semibold bg-accent":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,children:"Register"}),t.jsx("button",{onClick:u,className:`transition-all duration-200 py-2 px-3 rounded-md ${r==="faq"?"text-primary font-semibold bg-accent":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,children:"FAQ"}),v&&t.jsxs("button",{onClick:h,className:`transition-all duration-200 py-2 px-3 rounded-md flex items-center gap-1 ${r==="admin"?"text-primary font-semibold bg-accent":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,title:"Admin Panel (Ctrl+Shift+A)",children:[t.jsx(Ia,{className:"w-3 h-3"}),"Admin"]})]}),t.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[t.jsxs("div",{className:"hidden sm:flex bg-secondary px-3 py-2 rounded-full border border-border font-body text-sm",children:[t.jsx("span",{className:"text-muted-foreground",children:"Classes from"}),t.jsx("span",{className:"ml-1 font-semibold text-primary",children:"$11"})]}),t.jsx("div",{className:"lg:hidden",children:t.jsx($,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>y(!j),children:j?t.jsx(ea,{className:"w-5 h-5"}):t.jsx(qi,{className:"w-5 h-5"})})}),t.jsx("div",{className:"hidden lg:block",children:a?t.jsxs($,{variant:"outline",size:"default",onClick:s,className:"flex items-center gap-2 font-medium border-primary/20 hover:bg-accent",children:[t.jsx(Ct,{className:"w-4 h-4"}),"Account"]}):t.jsxs($,{size:"default",onClick:e,className:"flex items-center gap-2 font-medium bg-primary hover:bg-primary/90",children:[t.jsx(Ct,{className:"w-4 h-4"}),"Login"]})})]})]})}),j&&t.jsx("div",{className:"lg:hidden bg-background border-b border-border shadow-lg",children:t.jsx("div",{className:"container mx-auto px-4 py-4",children:t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("button",{onClick:()=>b(n),className:`text-left py-3 px-4 rounded-lg transition-colors ${r==="home"?"bg-primary/10 text-primary font-medium":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,children:"Home"}),t.jsx("button",{onClick:()=>b(o),className:`text-left py-3 px-4 rounded-lg transition-colors ${r==="classes"?"bg-primary/10 text-primary font-medium":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,children:"Classes"}),t.jsx("button",{onClick:()=>b(c),className:`text-left py-3 px-4 rounded-lg transition-colors ${r==="packages"?"bg-primary/10 text-primary font-medium":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,children:"Packages"}),t.jsx("button",{onClick:()=>b(i),className:`text-left py-3 px-4 rounded-lg transition-colors ${r==="teachers"?"bg-primary/10 text-primary font-medium":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,children:"Teachers"}),t.jsx("button",{onClick:()=>b(l),className:`text-left py-3 px-4 rounded-lg transition-colors ${r==="contact"?"bg-primary/10 text-primary font-medium":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,children:"Contact"}),t.jsx("button",{onClick:()=>b(d),className:`text-left py-3 px-4 rounded-lg transition-colors ${r==="register"?"bg-primary/10 text-primary font-medium":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,children:"Register"}),t.jsx("button",{onClick:()=>b(u),className:`text-left py-3 px-4 rounded-lg transition-colors ${r==="faq"?"bg-primary/10 text-primary font-medium":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,children:"FAQ"}),v&&t.jsxs("button",{onClick:()=>b(h),className:`text-left py-3 px-4 rounded-lg transition-colors flex items-center gap-2 ${r==="admin"?"bg-primary/10 text-primary font-medium":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,children:[t.jsx(Ia,{className:"w-4 h-4"}),"Admin Panel"]}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-border",children:[t.jsxs("div",{className:"text-sm text-muted-foreground text-center mb-4",children:["Classes from ",t.jsx("span",{className:"font-medium text-primary",children:"$11"})]}),a?t.jsxs($,{variant:"outline",size:"default",onClick:()=>{s(),y(!1)},className:"w-full flex items-center justify-center gap-2 font-medium border-primary/20 hover:bg-accent",children:[t.jsx(Ct,{className:"w-4 h-4"}),"Account"]}):t.jsxs($,{size:"default",onClick:()=>{e(),y(!1)},className:"w-full flex items-center justify-center gap-2 font-medium bg-primary hover:bg-primary/90",children:[t.jsx(Ct,{className:"w-4 h-4"}),"Login"]})]})]})})})]})}function uc(){return t.jsxs("div",{className:"relative min-h-[400px] sm:h-[450px] md:h-[500px] lg:h-[550px] w-full overflow-hidden rounded-lg bg-gradient-to-br from-secondary via-background to-accent shadow-lg border border-border",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-secondary/50 via-transparent to-accent/30"}),t.jsx("div",{className:"relative h-full flex items-center justify-center px-8",children:t.jsxs("div",{className:"text-center max-w-4xl",children:[t.jsx("div",{className:"flex justify-center mb-12 drop-shadow-lg",children:t.jsx(Tn,{size:"2xl",showText:!1,className:"filter brightness-110 contrast-125"})}),t.jsx("h1",{className:"mb-6 text-4xl sm:text-5xl md:text-6xl lg:text-7xl text-foreground font-body tracking-wide drop-shadow-sm",children:"Nirva Yoga"}),t.jsx("p",{className:"mb-6 text-lg sm:text-xl md:text-2xl text-muted-foreground font-body italic leading-relaxed",children:"Find your inner peace through mindful movement"}),t.jsx("p",{className:"mb-8 text-base sm:text-lg text-foreground font-body font-medium",children:"Live Virtual Classes via Zoom • Practice from the comfort of home"}),t.jsxs("div",{className:"inline-flex items-center px-4 sm:px-6 md:px-8 py-2 sm:py-3 bg-accent border-2 border-primary/20 rounded-full text-primary font-body text-sm sm:text-base md:text-lg font-semibold shadow-md hover:shadow-lg transition-shadow",children:[t.jsx("span",{className:"mr-2"}),"All Classes $11/session"]}),t.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-muted-foreground font-body",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{className:"text-primary",children:"✨"}),t.jsx("span",{children:"Special attention to all students"})]}),t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{className:"text-primary",children:"🎯"}),t.jsx("span",{children:"Progress guaranteed"})]}),t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{className:"text-primary",children:"👥"}),t.jsx("span",{children:"Max 10 students per class"})]})]})]})})]})}const hc=na("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function _e({className:a,variant:e,asChild:s=!1,...r}){const n=s?wn:"span";return t.jsx(n,{"data-slot":"badge",className:re(hc({variant:e}),a),...r})}const fc=a=>{let e;return a?e=a:typeof fetch>"u"?e=(...s)=>lt(async()=>{const{default:r}=await Promise.resolve().then(()=>gs);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class ia extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class mc extends ia{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Wa extends ia{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ha extends ia{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Er;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(Er||(Er={}));var gc=function(a,e,s,r){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(h){i(h)}}function l(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):n(u.value).then(c,l)}d((r=r.apply(a,e||[])).next())})};class pc{constructor(e,{headers:s={},customFetch:r,region:n=Er.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=fc(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return gc(this,void 0,void 0,function*(){try{const{headers:n,method:o,body:i}=s;let c={},{region:l}=s;l||(l=this.region);const d=new URL(`${this.url}/${e}`);l&&l!=="any"&&(c["x-region"]=l,d.searchParams.set("forceFunctionRegion",l));let u;i&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",u=i):typeof i=="string"?(c["Content-Type"]="text/plain",u=i):typeof FormData<"u"&&i instanceof FormData?u=i:(c["Content-Type"]="application/json",u=JSON.stringify(i)));const h=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),n),body:u}).catch(y=>{throw new mc(y)}),v=h.headers.get("x-relay-error");if(v&&v==="true")throw new Wa(h);if(!h.ok)throw new Ha(h);let f=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),j;return f==="application/json"?j=yield h.json():f==="application/octet-stream"?j=yield h.blob():f==="text/event-stream"?j=h:f==="multipart/form-data"?j=yield h.formData():j=yield h.text(),{data:j,error:null,response:h}}catch(n){return{data:null,error:n,response:n instanceof Ha||n instanceof Wa?n.context:void 0}}})}}var Ie={},la={},er={},Ds={},tr={},sr={},xc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ds=xc();const vc=ds.fetch,Mn=ds.fetch.bind(ds),Un=ds.Headers,bc=ds.Request,yc=ds.Response,gs=Object.freeze(Object.defineProperty({__proto__:null,Headers:Un,Request:bc,Response:yc,default:Mn,fetch:vc},Symbol.toStringTag,{value:"Module"})),wc=Pl(gs);var rr={};Object.defineProperty(rr,"__esModule",{value:!0});let jc=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};rr.default=jc;var zn=Le&&Le.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(sr,"__esModule",{value:!0});const _c=zn(wc),Nc=zn(rr);let kc=class{constructor(e){var s,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(s=e.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=_c.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=new Headers(this.headers),this.headers.set(e,s),this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,c,l,d;let u=null,h=null,v=null,f=o.status,j=o.statusText;if(o.ok){if(this.method!=="HEAD"){const m=await o.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text"))?h=m:h=JSON.parse(m))}const x=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),b=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&b&&b.length>1&&(v=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,v=null,f=406,j="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const x=await o.text();try{u=JSON.parse(x),Array.isArray(u)&&o.status===404&&(h=[],u=null,f=200,j="OK")}catch{o.status===404&&x===""?(f=204,j="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,f=200,j="OK"),u&&this.shouldThrowOnError)throw new Nc.default(u)}return{error:u,data:h,count:v,status:f,statusText:j}});return this.shouldThrowOnError||(n=n.catch(o=>{var i,c,l;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(c=o==null?void 0:o.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(l=o==null?void 0:o.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,s)}returns(){return this}overrideTypes(){return this}};sr.default=kc;var Sc=Le&&Le.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(tr,"__esModule",{value:!0});const Cc=Sc(sr);let Pc=class extends Cc.default{select(e){let s=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!s?"":(n==='"'&&(s=!s),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:s=!0,nullsFirst:r,foreignTable:n,referencedTable:o=n}={}){const i=o?`${o}.order`:"order",c=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${c?`${c},`:""}${e}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:r=s}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,s,{foreignTable:r,referencedTable:n=r}={}){const o=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(i,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:s=!1,settings:r=!1,buffers:n=!1,wal:o=!1,format:i="text"}={}){var c;const l=[e?"analyze":null,s?"verbose":null,r?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${d}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};tr.default=Pc;var Ec=Le&&Le.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ds,"__esModule",{value:!0});const Tc=Ec(tr);let Ac=class extends Tc.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const r=Array.from(new Set(s)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:r,type:n}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${i}.${s}`),this}match(e){return Object.entries(e).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(e,s,r){return this.url.searchParams.append(e,`not.${s}.${r}`),this}or(e,{foreignTable:s,referencedTable:r=s}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,s,r){return this.url.searchParams.append(e,`${s}.${r}`),this}};Ds.default=Ac;var Rc=Le&&Le.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(er,"__esModule",{value:!0});const _s=Rc(Ds);let Ic=class{constructor(e,{headers:s={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(s),this.schema=r,this.fetch=n}select(e,{head:s=!1,count:r}={}){const n=s?"HEAD":"GET";let o=!1;const i=(e??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new _s.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:s,defaultToNull:r=!0}={}){var n;const o="POST";if(s&&this.headers.append("Prefer",`count=${s}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((c,l)=>c.concat(Object.keys(l)),[]);if(i.length>0){const c=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",c.join(","))}}return new _s.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:s,ignoreDuplicates:r=!1,count:n,defaultToNull:o=!0}={}){var i;const c="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),n&&this.headers.append("Prefer",`count=${n}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(l.length>0){const d=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new _s.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:s}={}){var r;const n="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new _s.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var s;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new _s.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};er.default=Ic;var Bn=Le&&Le.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(la,"__esModule",{value:!0});const Oc=Bn(er),$c=Bn(Ds);let Dc=class Fn{constructor(e,{headers:s={},schema:r,fetch:n}={}){this.url=e,this.headers=new Headers(s),this.schemaName=r,this.fetch=n}from(e){const s=new URL(`${this.url}/${e}`);return new Oc.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Fn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:r=!1,get:n=!1,count:o}={}){var i;let c;const l=new URL(`${this.url}/rpc/${e}`);let d;r||n?(c=r?"HEAD":"GET",Object.entries(s).filter(([h,v])=>v!==void 0).map(([h,v])=>[h,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([h,v])=>{l.searchParams.append(h,v)})):(c="POST",d=s);const u=new Headers(this.headers);return o&&u.set("Prefer",`count=${o}`),new $c.default({method:c,url:l,headers:u,schema:this.schemaName,body:d,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};la.default=Dc;var ps=Le&&Le.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.PostgrestError=Ie.PostgrestBuilder=Ie.PostgrestTransformBuilder=Ie.PostgrestFilterBuilder=Ie.PostgrestQueryBuilder=Ie.PostgrestClient=void 0;const qn=ps(la);Ie.PostgrestClient=qn.default;const Wn=ps(er);Ie.PostgrestQueryBuilder=Wn.default;const Hn=ps(Ds);Ie.PostgrestFilterBuilder=Hn.default;const Vn=ps(tr);Ie.PostgrestTransformBuilder=Vn.default;const Gn=ps(sr);Ie.PostgrestBuilder=Gn.default;const Yn=ps(rr);Ie.PostgrestError=Yn.default;var Lc=Ie.default={PostgrestClient:qn.default,PostgrestQueryBuilder:Wn.default,PostgrestFilterBuilder:Hn.default,PostgrestTransformBuilder:Vn.default,PostgrestBuilder:Gn.default,PostgrestError:Yn.default};const{PostgrestClient:Mc,PostgrestQueryBuilder:xg,PostgrestFilterBuilder:vg,PostgrestTransformBuilder:bg,PostgrestBuilder:yg,PostgrestError:wg}=Lc;class Uc{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const s=parseInt(process.versions.node.split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const r=this.getWebSocketConstructor();return new r(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const zc="2.15.4",Bc=`realtime-js/${zc}`,Fc="1.0.0",Tr=1e4,qc=1e3,Wc=100;var Ps;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(Ps||(Ps={}));var Ne;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(Ne||(Ne={}));var Ge;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(Ge||(Ge={}));var Ar;(function(a){a.websocket="websocket"})(Ar||(Ar={}));var Mt;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(Mt||(Mt={}));class Hc{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const n=s.getUint8(1),o=s.getUint8(2);let i=this.HEADER_LENGTH+2;const c=r.decode(e.slice(i,i+n));i=i+n;const l=r.decode(e.slice(i,i+o));i=i+o;const d=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:c,event:l,payload:d}}}class Kn{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pe;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(pe||(pe={}));const Va=(a,e,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,i)=>(o[i]=Vc(i,a,e,n),o),{})},Vc=(a,e,s,r)=>{const n=e.find(c=>c.name===a),o=n==null?void 0:n.type,i=s[a];return o&&!r.includes(o)?Jn(o,i):Rr(i)},Jn=(a,e)=>{if(a.charAt(0)==="_"){const s=a.slice(1,a.length);return Jc(e,s)}switch(a){case pe.bool:return Gc(e);case pe.float4:case pe.float8:case pe.int2:case pe.int4:case pe.int8:case pe.numeric:case pe.oid:return Yc(e);case pe.json:case pe.jsonb:return Kc(e);case pe.timestamp:return Zc(e);case pe.abstime:case pe.date:case pe.daterange:case pe.int4range:case pe.int8range:case pe.money:case pe.reltime:case pe.text:case pe.time:case pe.timestamptz:case pe.timetz:case pe.tsrange:case pe.tstzrange:return Rr(e);default:return Rr(e)}},Rr=a=>a,Gc=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},Yc=a=>{if(typeof a=="string"){const e=parseFloat(a);if(!Number.isNaN(e))return e}return a},Kc=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch(e){return console.log(`JSON parse error: ${e}`),a}return a},Jc=(a,e)=>{if(typeof a!="string")return a;const s=a.length-1,r=a[s];if(a[0]==="{"&&r==="}"){let o;const i=a.slice(1,s);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(c=>Jn(e,c))}return a},Zc=a=>typeof a=="string"?a.replace(" ","T"):a,Zn=a=>{let e=a;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class vr{constructor(e,s,r={},n=Tr){this.channel=e,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ga;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(Ga||(Ga={}));class Es{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:o,onLeave:i,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Es.syncState(this.state,n,o,i),this.pendingDiffs.forEach(l=>{this.state=Es.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},n=>{const{onJoin:o,onLeave:i,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Es.syncDiff(this.state,n,o,i),c())}),this.onJoin((n,o,i)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:o,newPresences:i})}),this.onLeave((n,o,i)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,n){const o=this.cloneDeep(e),i=this.transformState(s),c={},l={};return this.map(o,(d,u)=>{i[d]||(l[d]=u)}),this.map(i,(d,u)=>{const h=o[d];if(h){const v=u.map(x=>x.presence_ref),f=h.map(x=>x.presence_ref),j=u.filter(x=>f.indexOf(x.presence_ref)<0),y=h.filter(x=>v.indexOf(x.presence_ref)<0);j.length>0&&(c[d]=j),y.length>0&&(l[d]=y)}else c[d]=u}),this.syncDiff(o,{joins:c,leaves:l},r,n)}static syncDiff(e,s,r,n){const{joins:o,leaves:i}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(o,(c,l)=>{var d;const u=(d=e[c])!==null&&d!==void 0?d:[];if(e[c]=this.cloneDeep(l),u.length>0){const h=e[c].map(f=>f.presence_ref),v=u.filter(f=>h.indexOf(f.presence_ref)<0);e[c].unshift(...v)}r(c,u,l)}),this.map(i,(c,l)=>{let d=e[c];if(!d)return;const u=l.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[c]=d,n(c,d,l),d.length===0&&delete e[c]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const n=e[r];return"metas"in n?s[r]=n.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[r]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ya;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(Ya||(Ya={}));var Ts;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})(Ts||(Ts={}));var it;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(it||(it={}));class ca{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=Ne.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new vr(this,Ge.join,this.params,this.timeout),this.rejoinTimer=new Kn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ne.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ne.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ne.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ne.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ne.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ge.reply,{},(n,o)=>{this._trigger(this._replyEventName(o),n)}),this.presence=new Es(this),this.broadcastEndpointURL=Zn(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var r,n,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ne.closed){const{config:{broadcast:i,presence:c,private:l}}=this.params,d=(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&n!==void 0?n:[],u=!!this.bindings[Ts.PRESENCE]&&this.bindings[Ts.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,h={},v={broadcast:i,presence:Object.assign(Object.assign({},c),{enabled:u}),postgres_changes:d,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(it.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(it.CLOSED)),this.updateJoinPayload(Object.assign({config:v},h)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:f})=>{var j;if(this.socket.setAuth(),f===void 0){e==null||e(it.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,x=(j=y==null?void 0:y.length)!==null&&j!==void 0?j:0,b=[];for(let m=0;m<x;m++){const g=y[m],{filter:{event:_,schema:S,table:R,filter:N}}=g,D=f&&f[m];if(D&&D.event===_&&D.schema===S&&D.table===R&&D.filter===N)b.push(Object.assign(Object.assign({},g),{id:D.id}));else{this.unsubscribe(),this.state=Ne.errored,e==null||e(it.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(it.SUBSCRIBED);return}}).receive("error",f=>{this.state=Ne.errored,e==null||e(it.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(it.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this.state===Ne.joined&&e===Ts.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,s,r)}async send(e,s={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:i}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,c,l;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(c=(i=this.params)===null||i===void 0?void 0:i.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ne.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ge.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new vr(this,Ge.leave,{},e),r.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ne.closed,this.bindings={}}async _fetchWithTimeout(e,s,r){const n=new AbortController,o=setTimeout(()=>n.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(o),i}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new vr(this,e,s,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Wc){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var n,o;const i=e.toLocaleLowerCase(),{close:c,error:l,leave:d,join:u}=Ge;if(r&&[c,l,d,u].indexOf(i)>=0&&r!==this._joinRef())return;let v=this._onMessage(i,s,r);if(s&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(f=>{var j,y,x;return((j=f.filter)===null||j===void 0?void 0:j.event)==="*"||((x=(y=f.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===i}).map(f=>f.callback(v,r)):(o=this.bindings[i])===null||o===void 0||o.filter(f=>{var j,y,x,b,m,g;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in f){const _=f.id,S=(j=f.filter)===null||j===void 0?void 0:j.event;return _&&((y=s.ids)===null||y===void 0?void 0:y.includes(_))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((x=s.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const _=(m=(b=f==null?void 0:f.filter)===null||b===void 0?void 0:b.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return _==="*"||_===((g=s==null?void 0:s.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===i}).map(f=>{if(typeof v=="object"&&"ids"in v){const j=v.data,{schema:y,table:x,commit_timestamp:b,type:m,errors:g}=j;v=Object.assign(Object.assign({},{schema:y,table:x,commit_timestamp:b,eventType:m,new:{},old:{},errors:g}),this._getPayloadRecords(j))}f.callback(v,r)})}_isClosed(){return this.state===Ne.closed}_isJoined(){return this.state===Ne.joined}_isJoining(){return this.state===Ne.joining}_isLeaving(){return this.state===Ne.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const n=e.toLocaleLowerCase(),o={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(o):this.bindings[n]=[o],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(n=>{var o;return!(((o=n.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&ca.isEqual(n.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ge.close,{},e)}_onError(e){this._on(Ge.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ne.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Va(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Va(e.columns,e.old_record)),s}}const br=()=>{},Us={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Xc=[1e3,2e3,5e3,1e4],Qc=1e4,ed=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class td{constructor(e,s){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Tr,this.transport=null,this.heartbeatIntervalMs=Us.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=br,this.ref=0,this.reconnectTimer=null,this.logger=br,this.conn=null,this.sendBuffer=[],this.serializer=new Hc,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let o;return n?o=n:typeof fetch>"u"?o=(...i)=>lt(async()=>{const{default:c}=await Promise.resolve().then(()=>gs);return{default:c}},void 0).then(({default:c})=>c(...i)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...i)=>o(...i)},!(!((r=s==null?void 0:s.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${Ar.websocket}`,this.httpEndpoint=Zn(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Uc.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Fc}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ps.connecting:return Mt.Connecting;case Ps.open:return Mt.Open;case Ps.closing:return Mt.Closing;default:return Mt.Closed}}isConnected(){return this.connectionState()===Mt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(o=>o.topic===r);if(n)return n;{const o=new ca(`realtime:${e}`,s,this);return this.channels.push(o),o}}push(e){const{topic:s,event:r,payload:n,ref:o}=e,i=()=>{this.encode(e,c=>{var l;(l=this.conn)===null||l===void 0||l.send(c)})};this.log("push",`${s} ${r} (${o})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(qc,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Us.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:n,payload:o,ref:i}=s,c=i?`(${i})`:"",l=o.status||"";this.log("receive",`${l} ${r} ${n} ${c}`.trim(),o),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(n,o,i)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ge.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${r}${n}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([ed],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s;e?s=e:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(r=>{const n={access_token:s,version:Bc};s&&r.updateJoinPayload(n),r.joinedOnce&&r._isJoined()&&r._push(Ge.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(s)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Kn(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Us.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,r,n,o,i,c,l,d,u;if(this.transport=(s=e==null?void 0:e.transport)!==null&&s!==void 0?s:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Tr,this.heartbeatIntervalMs=(n=e==null?void 0:e.heartbeatIntervalMs)!==null&&n!==void 0?n:Us.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:br,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:h=>Xc[h-1]||Qc,this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(h,v)=>v(JSON.stringify(h)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class da extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ke(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}class sd extends da{constructor(e,s,r){super(e),this.name="StorageApiError",this.status=s,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ir extends da{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var rd=function(a,e,s,r){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(h){i(h)}}function l(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):n(u.value).then(c,l)}d((r=r.apply(a,e||[])).next())})};const Xn=a=>{let e;return a?e=a:typeof fetch>"u"?e=(...s)=>lt(async()=>{const{default:r}=await Promise.resolve().then(()=>gs);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},ad=()=>rd(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield lt(()=>Promise.resolve().then(()=>gs),void 0)).Response:Response}),Or=a=>{if(Array.isArray(a))return a.map(s=>Or(s));if(typeof a=="function"||a!==Object(a))return a;const e={};return Object.entries(a).forEach(([s,r])=>{const n=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[n]=Or(r)}),e},nd=a=>{if(typeof a!="object"||a===null)return!1;const e=Object.getPrototypeOf(a);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)};var Gt=function(a,e,s,r){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(h){i(h)}}function l(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):n(u.value).then(c,l)}d((r=r.apply(a,e||[])).next())})};const yr=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),od=(a,e,s)=>Gt(void 0,void 0,void 0,function*(){const r=yield ad();a instanceof r&&!(s!=null&&s.noResolveJson)?a.json().then(n=>{const o=a.status||500,i=(n==null?void 0:n.statusCode)||o+"";e(new sd(yr(n),o,i))}).catch(n=>{e(new Ir(yr(n),n))}):e(new Ir(yr(a),a))}),id=(a,e,s,r)=>{const n={method:a,headers:(e==null?void 0:e.headers)||{}};return a==="GET"||!r?n:(nd(r)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r)):n.body=r,e!=null&&e.duplex&&(n.duplex=e.duplex),Object.assign(Object.assign({},n),s))};function Ls(a,e,s,r,n,o){return Gt(this,void 0,void 0,function*(){return new Promise((i,c)=>{a(s,id(e,r,n,o)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>od(l,c,r))})})}function Vs(a,e,s,r){return Gt(this,void 0,void 0,function*(){return Ls(a,"GET",e,s,r)})}function Qe(a,e,s,r,n){return Gt(this,void 0,void 0,function*(){return Ls(a,"POST",e,r,n,s)})}function $r(a,e,s,r,n){return Gt(this,void 0,void 0,function*(){return Ls(a,"PUT",e,r,n,s)})}function ld(a,e,s,r){return Gt(this,void 0,void 0,function*(){return Ls(a,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function Qn(a,e,s,r,n){return Gt(this,void 0,void 0,function*(){return Ls(a,"DELETE",e,r,n,s)})}var Pe=function(a,e,s,r){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(h){i(h)}}function l(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):n(u.value).then(c,l)}d((r=r.apply(a,e||[])).next())})};const cd={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ka={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class dd{constructor(e,s={},r,n){this.url=e,this.headers=s,this.bucketId=r,this.fetch=Xn(n)}uploadOrUpdate(e,s,r,n){return Pe(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},Ka),n);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=r,c["cache-control"]=`max-age=${i.cacheControl}`,c["content-type"]=i.contentType,l&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n!=null&&n.headers&&(c=Object.assign(Object.assign({},c),n.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield(e=="PUT"?$r:Qe)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:c},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(ke(o))return{data:null,error:o};throw o}})}upload(e,s,r){return Pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,n){return Pe(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),i=this._getFinalPath(o),c=new URL(this.url+`/object/upload/sign/${i}`);c.searchParams.set("token",s);try{let l;const d=Object.assign({upsert:Ka.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",d.cacheControl)):(l=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield $r(this.fetch,c.toString(),l,{headers:u});return{data:{path:o,fullPath:h.Key},error:null}}catch(l){if(ke(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return Pe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);s!=null&&s.upsert&&(n["x-upsert"]="true");const o=yield Qe(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),i=new URL(this.url+o.url),c=i.searchParams.get("token");if(!c)throw new da("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:c},error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}})}update(e,s,r){return Pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s,r){return Pe(this,void 0,void 0,function*(){try{return{data:yield Qe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}})}copy(e,s,r){return Pe(this,void 0,void 0,function*(){try{return{data:{path:(yield Qe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}})}createSignedUrl(e,s,r){return Pe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),o=yield Qe(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,r){return Pe(this,void 0,void 0,function*(){try{const n=yield Qe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}})}download(e,s){return Pe(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),i=o?`?${o}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield Vs(this.fetch,`${this.url}/${n}/${c}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(ke(c))return{data:null,error:c};throw c}})}info(e){return Pe(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const r=yield Vs(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Or(r),error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}})}exists(e){return Pe(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield ld(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ke(r)&&r instanceof Ir){const n=r.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,s){const r=this._getFinalPath(e),n=[],o=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";o!==""&&n.push(o);const c=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&n.push(l);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}remove(e){return Pe(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}})}list(e,s,r){return Pe(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},cd),s),{prefix:e||""});return{data:yield Qe(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}})}listV2(e,s){return Pe(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Qe(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const ud="2.11.1",hd={"X-Client-Info":`storage-js/${ud}`};var Xt=function(a,e,s,r){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(h){i(h)}}function l(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):n(u.value).then(c,l)}d((r=r.apply(a,e||[])).next())})};class fd{constructor(e,s={},r,n){const o=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},hd),s),this.fetch=Xn(r)}listBuckets(){return Xt(this,void 0,void 0,function*(){try{return{data:yield Vs(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ke(e))return{data:null,error:e};throw e}})}getBucket(e){return Xt(this,void 0,void 0,function*(){try{return{data:yield Vs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Xt(this,void 0,void 0,function*(){try{return{data:yield Qe(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return Xt(this,void 0,void 0,function*(){try{return{data:yield $r(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Xt(this,void 0,void 0,function*(){try{return{data:yield Qe(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Xt(this,void 0,void 0,function*(){try{return{data:yield Qn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(ke(s))return{data:null,error:s};throw s}})}}class md extends fd{constructor(e,s={},r,n){super(e,s,r,n)}from(e){return new dd(this.url,this.headers,e,this.fetch)}}const gd="2.57.0";let Ss="";typeof Deno<"u"?Ss="deno":typeof document<"u"?Ss="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ss="react-native":Ss="node";const pd={"X-Client-Info":`supabase-js-${Ss}/${gd}`},xd={headers:pd},vd={schema:"public"},bd={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yd={};var wd=function(a,e,s,r){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(h){i(h)}}function l(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):n(u.value).then(c,l)}d((r=r.apply(a,e||[])).next())})};const jd=a=>{let e;return a?e=a:typeof fetch>"u"?e=Mn:e=fetch,(...s)=>e(...s)},_d=()=>typeof Headers>"u"?Un:Headers,Nd=(a,e,s)=>{const r=jd(s),n=_d();return(o,i)=>wd(void 0,void 0,void 0,function*(){var c;const l=(c=yield e())!==null&&c!==void 0?c:a;let d=new n(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",a),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},i),{headers:d}))})};var kd=function(a,e,s,r){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(h){i(h)}}function l(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):n(u.value).then(c,l)}d((r=r.apply(a,e||[])).next())})};function Sd(a){return a.endsWith("/")?a:a+"/"}function Cd(a,e){var s,r;const{db:n,auth:o,realtime:i,global:c}=a,{db:l,auth:d,realtime:u,global:h}=e,v={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},h),c),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>kd(this,void 0,void 0,function*(){return""})};return a.accessToken?v.accessToken=a.accessToken:delete v.accessToken,v}const eo="2.71.1",as=30*1e3,Dr=3,wr=Dr*as,Pd="http://localhost:9999",Ed="supabase.auth.token",Td={"X-Client-Info":`gotrue-js/${eo}`},Lr="X-Supabase-Api-Version",to={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ad=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Rd=10*60*1e3;class ua extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function ee(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class Id extends ua{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function Od(a){return ee(a)&&a.name==="AuthApiError"}class so extends ua{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Pt extends ua{constructor(e,s,r,n){super(e,r,n),this.name=s,this.status=r}}class Nt extends Pt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $d(a){return ee(a)&&a.name==="AuthSessionMissingError"}class zs extends Pt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bs extends Pt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Fs extends Pt{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Dd(a){return ee(a)&&a.name==="AuthImplicitGrantRedirectError"}class Ja extends Pt{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Mr extends Pt{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function jr(a){return ee(a)&&a.name==="AuthRetryableFetchError"}class Za extends Pt{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class Ur extends Pt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Gs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xa=` 	
\r=`.split(""),Ld=(()=>{const a=new Array(128);for(let e=0;e<a.length;e+=1)a[e]=-1;for(let e=0;e<Xa.length;e+=1)a[Xa[e].charCodeAt(0)]=-2;for(let e=0;e<Gs.length;e+=1)a[Gs[e].charCodeAt(0)]=e;return a})();function Qa(a,e,s){if(a!==null)for(e.queue=e.queue<<8|a,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(Gs[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(Gs[r]),e.queuedBits-=6}}function ro(a,e,s){const r=Ld[a];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function en(a){const e=[],s=i=>{e.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},o=i=>{zd(i,r,s)};for(let i=0;i<a.length;i+=1)ro(a.charCodeAt(i),n,o);return e.join("")}function Md(a,e){if(a<=127){e(a);return}else if(a<=2047){e(192|a>>6),e(128|a&63);return}else if(a<=65535){e(224|a>>12),e(128|a>>6&63),e(128|a&63);return}else if(a<=1114111){e(240|a>>18),e(128|a>>12&63),e(128|a>>6&63),e(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function Ud(a,e){for(let s=0;s<a.length;s+=1){let r=a.charCodeAt(s);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(a.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}Md(r,e)}}function zd(a,e,s){if(e.utf8seq===0){if(a<=127){s(a);return}for(let r=1;r<6;r+=1)if(!(a>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=a&31;else if(e.utf8seq===3)e.codepoint=a&15;else if(e.utf8seq===4)e.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|a&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Bd(a){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};for(let n=0;n<a.length;n+=1)ro(a.charCodeAt(n),s,r);return new Uint8Array(e)}function Fd(a){const e=[];return Ud(a,s=>e.push(s)),new Uint8Array(e)}function qd(a){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};return a.forEach(n=>Qa(n,s,r)),Qa(null,s,r),e.join("")}function Wd(a){return Math.round(Date.now()/1e3)+a}function Hd(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){const e=Math.random()*16|0;return(a=="x"?e:e&3|8).toString(16)})}const We=()=>typeof window<"u"&&typeof document<"u",Rt={tested:!1,writable:!1},ao=()=>{if(!We())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rt.tested)return Rt.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),Rt.tested=!0,Rt.writable=!0}catch{Rt.tested=!0,Rt.writable=!1}return Rt.writable};function Vd(a){const e={},s=new URL(a);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,o)=>{e[o]=n})}catch{}return s.searchParams.forEach((r,n)=>{e[n]=r}),e}const no=a=>{let e;return a?e=a:typeof fetch>"u"?e=(...s)=>lt(async()=>{const{default:r}=await Promise.resolve().then(()=>gs);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},Gd=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",ns=async(a,e,s)=>{await a.setItem(e,JSON.stringify(s))},It=async(a,e)=>{const s=await a.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},jt=async(a,e)=>{await a.removeItem(e)};class ar{constructor(){this.promise=new ar.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}ar.promiseConstructor=Promise;function _r(a){const e=a.split(".");if(e.length!==3)throw new Ur("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Ad.test(e[r]))throw new Ur("JWT not in base64url format");return{header:JSON.parse(en(e[0])),payload:JSON.parse(en(e[1])),signature:Bd(e[2]),raw:{header:e[0],payload:e[1]}}}async function Yd(a){return await new Promise(e=>{setTimeout(()=>e(null),a)})}function Kd(a,e){return new Promise((r,n)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await a(o);if(!e(o,null,i)){r(i);return}}catch(i){if(!e(o,i)){n(i);return}}})()})}function Jd(a){return("0"+a.toString(16)).substr(-2)}function Zd(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let o=0;o<56;o++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,Jd).join("")}async function Xd(a){const s=new TextEncoder().encode(a),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(o=>String.fromCharCode(o)).join("")}async function Qd(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const s=await Xd(a);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qt(a,e,s=!1){const r=Zd();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await ns(a,`${e}-code-verifier`,n);const o=await Qd(r);return[o,r===o?"plain":"s256"]}const eu=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function tu(a){const e=a.headers.get(Lr);if(!e||!e.match(eu))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function su(a){if(!a)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(a<=e)throw new Error("JWT has expired")}function ru(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const au=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function es(a){if(!au.test(a))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Nr(){const a={};return new Proxy(a,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function tn(a){return JSON.parse(JSON.stringify(a))}var nu=function(a,e){var s={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&e.indexOf(r)<0&&(s[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(a);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(a,r[n])&&(s[r[n]]=a[r[n]]);return s};const Lt=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),ou=[502,503,504];async function sn(a){var e;if(!Gd(a))throw new Mr(Lt(a),0);if(ou.includes(a.status))throw new Mr(Lt(a),a.status);let s;try{s=await a.json()}catch(o){throw new so(Lt(o),o)}let r;const n=tu(a);if(n&&n.getTime()>=to["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new Za(Lt(s),a.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Nt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new Za(Lt(s),a.status,s.weak_password.reasons);throw new Id(Lt(s),a.status||500,r)}const iu=(a,e,s,r)=>{const n={method:a,headers:(e==null?void 0:e.headers)||{}};return a==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function ae(a,e,s,r){var n;const o=Object.assign({},r==null?void 0:r.headers);o[Lr]||(o[Lr]=to["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const i=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const c=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await lu(a,e,s+c,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function lu(a,e,s,r,n,o){const i=iu(e,r,n,o);let c;try{c=await a(s,Object.assign({},i))}catch(l){throw console.error(l),new Mr(Lt(l),0)}if(c.ok||await sn(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(l){await sn(l)}}function ot(a){var e;let s=null;hu(a)&&(s=Object.assign({},a),a.expires_at||(s.expires_at=Wd(a.expires_in)));const r=(e=a.user)!==null&&e!==void 0?e:a;return{data:{session:s,user:r},error:null}}function rn(a){const e=ot(a);return!e.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=a.weak_password),e}function St(a){var e;return{data:{user:(e=a.user)!==null&&e!==void 0?e:a},error:null}}function cu(a){return{data:a,error:null}}function du(a){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:o}=a,i=nu(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:o},l=Object.assign({},i);return{data:{properties:c,user:l},error:null}}function uu(a){return a}function hu(a){return a.access_token&&a.refresh_token&&a.expires_in}const kr=["global","local","others"];var fu=function(a,e){var s={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&e.indexOf(r)<0&&(s[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(a);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(a,r[n])&&(s[r[n]]=a[r[n]]);return s};class mu{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=no(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=kr[0]){if(kr.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${kr.join(", ")}`);try{return await ae(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:St})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=fu(e,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:du,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ee(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await ae(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:St})}catch(s){if(ee(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,n,o,i,c,l;try{const d={nextPage:null,lastPage:0,total:0},u=await ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(o=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""},xform:uu});if(u.error)throw u.error;const h=await u.json(),v=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,f=(l=(c=u.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(j=>{const y=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(j.split(";")[1].split("=")[1]);d[`${x}Page`]=y}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(ee(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){es(e);try{return await ae(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:St})}catch(s){if(ee(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){es(e);try{return await ae(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:St})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){es(e);try{return await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:St})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){es(e.userId);try{const{data:s,error:r}=await ae(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(ee(s))return{data:null,error:s};throw s}}async _deleteFactor(e){es(e.userId),es(e.id);try{return{data:await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(ee(s))return{data:null,error:s};throw s}}}function an(a={}){return{getItem:e=>a[e]||null,setItem:(e,s)=>{a[e]=s},removeItem:e=>{delete a[e]}}}function gu(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ts={debug:!!(globalThis&&ao()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class oo extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class pu extends oo{}async function xu(a,e,s){ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ts.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,n.name);try{return await s()}finally{ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,n.name)}}else{if(e===0)throw ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new pu(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(ts.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}gu();const vu={url:Pd,storageKey:Ed,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Td,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function nn(a,e,s){return await s()}const ss={};class Rs{constructor(e){var s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Rs.nextInstanceID,Rs.nextInstanceID+=1,this.instanceID>0&&We()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},vu),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new mu({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=no(n.fetch),this.lock=n.lock||nn,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:We()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=xu:this.lock=nn,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:ao()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=an(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=an(this.memoryStorage)),We()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=ss[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){ss[this.storageKey]=Object.assign(Object.assign({},ss[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=ss[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ss[this.storageKey]=Object.assign(Object.assign({},ss[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${eo}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=Vd(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce"),We()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:o}=await this._getSessionFromURL(s,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Dd(o)){const l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:c}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",c),await this._saveSession(i),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ee(s)?{error:s}:{error:new so("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,n;try{const o=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:ot}),{data:i,error:c}=o;if(c||!i)return{data:{user:null,session:null},error:c};const l=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(ee(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var s,r,n;try{let o;if("email"in e){const{email:u,password:h,options:v}=e;let f=null,j=null;this.flowType==="pkce"&&([f,j]=await Qt(this.storage,this.storageKey)),o=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:u,password:h,data:(s=v==null?void 0:v.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:f,code_challenge_method:j},xform:ot})}else if("phone"in e){const{phone:u,password:h,options:v}=e;o=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(n=v==null?void 0:v.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:ot})}else throw new Bs("You must provide either an email or phone number and a password");const{data:i,error:c}=o;if(c||!i)return{data:{user:null,session:null},error:c};const l=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(ee(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let s;if("email"in e){const{email:o,password:i,options:c}=e;s=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:rn})}else if("phone"in e){const{phone:o,password:i,options:c}=e;s=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:rn})}else throw new Bs("You must provide either an email or phone number and a password");const{data:r,error:n}=s;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new zs}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(ee(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,n,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,r,n,o,i,c,l,d,u,h,v,f;let j,y;if("message"in e)j=e.message,y=e.signature;else{const{chain:x,wallet:b,statement:m,options:g}=e;let _;if(We())if(typeof b=="object")_=b;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))_=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=b}const S=new URL((s=g==null?void 0:g.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in _&&_.signIn){const R=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),m?{statement:m}:null));let N;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")N=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)N=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)j=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),y=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(n=(r=g==null?void 0:g.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((d=g==null?void 0:g.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(u=g==null?void 0:g.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const R=await _.signMessage(new TextEncoder().encode(j),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=R}}try{const{data:x,error:b}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:qd(y)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ot});if(b)throw b;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new zs}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:b})}catch(x){if(ee(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(e){const s=await It(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/");try{const{data:o,error:i}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ot});if(await jt(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new zs}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:n??null}),error:i})}catch(o){if(ee(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:s,provider:r,token:n,access_token:o,nonce:i}=e,c=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ot}),{data:l,error:d}=c;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new zs}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:d})}catch(s){if(ee(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,n,o,i;try{if("email"in e){const{email:c,options:l}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Qt(this.storage,this.storageKey));const{error:h}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:c,options:l}=e,{data:d,error:u}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Bs("You must provide either an email or phone number.")}catch(c){if(ee(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var s,r;try{let n,o;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:c}=await ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:n,xform:ot});if(c)throw c;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,d=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(n){if(ee(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var s,r,n;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Qt(this.storage,this.storageKey)),await ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:cu})}catch(o){if(ee(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new Nt;const{error:n}=await ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(ee(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:o}=e,{error:i}=await ae(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:n,options:o}=e,{data:i,error:c}=await ae(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:c}}throw new Bs("You must provide either an email or phone number and a type")}catch(s){if(ee(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await It(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<wr:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const i=await It(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=Nr()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,d,u)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,d,u))})}return{data:{session:e},error:null}}const{session:n,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:St}):await this._useSession(async s=>{var r,n,o;const{data:i,error:c}=s;if(c)throw c;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Nt}:await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0,xform:St})})}catch(s){if(ee(s))return $d(s)&&(await this._removeSession(),await jt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:n,error:o}=r;if(o)throw o;if(!n.session)throw new Nt;const i=n.session;let c=null,l=null;this.flowType==="pkce"&&e.email!=null&&([c,l]=await Qt(this.storage,this.storageKey));const{data:d,error:u}=await ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:l}),jwt:i.access_token,xform:St});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Nt;const s=Date.now()/1e3;let r=s,n=!0,o=null;const{payload:i}=_r(e.access_token);if(i.exp&&(r=i.exp,n=r<=s),n){const{session:c,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};o=c}else{const{data:c,error:l}=await this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(s){if(ee(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:i,error:c}=s;if(c)throw c;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Nt;const{session:n,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ee(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!We())throw new Fs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Fs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Ja("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fs("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ja("No code detected.");const{data:m,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:o,refresh_token:i,expires_in:c,expires_at:l,token_type:d}=e;if(!o||!c||!i||!d)throw new Fs("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(c);let v=u+h;l&&(v=parseInt(l));const f=v-u;f*1e3<=as&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const j=v-h;u-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,v,u):u-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,v,u);const{data:y,error:x}=await this._getUser(o);if(x)throw x;const b={provider_token:r,provider_refresh_token:n,access_token:o,expires_in:h,expires_at:v,refresh_token:i,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(r){if(ee(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await It(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:o}=s;if(o)return{error:o};const i=(r=n.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:c}=await this.admin.signOut(i,e);if(c&&!(Od(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await jt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=Hd(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,n;try{const{data:{session:o},error:i}=s;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await Qt(this.storage,this.storageKey,!0));try{return await ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(ee(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(ee(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:n}=await this._useSession(async o=>{var i,c,l,d,u;const{data:h,error:v}=o;if(v)throw v;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ae(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return We()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ee(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,n;const{data:o,error:i}=s;if(i)throw i;return await ae(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(ee(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await Kd(async n=>(n>0&&await Yd(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ot})),(n,o)=>{const i=200*Math.pow(2,n);return o&&jr(o)&&Date.now()+i-r<as})}catch(r){if(this._debug(s,"error",r),ee(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),We()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await It(this.storage,this.storageKey);if(n&&this.userStorage){let i=await It(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:n.user},await ns(this.userStorage,this.storageKey+"-user",i)),n.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:Nr()}else if(n&&!n.user&&!n.user){const i=await It(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(n.user=i.user,await jt(this.storage,this.storageKey+"-user"),await ns(this.storage,this.storageKey,n)):n.user=Nr()}if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const o=((s=n.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<wr;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${wr}s`),o){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),jr(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:c}=await this._getUser(n.access_token);!c&&(i!=null&&i.user)?(n.user=i.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new Nt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new ar;const{data:o,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!o.session)throw new Nt;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const c={session:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(n,"error",o),ee(o)){const i={session:null,error:o};return jr(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,s)}catch(l){o.push(l)}});if(await Promise.all(i),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&await ns(this.userStorage,this.storageKey+"-user",{user:s.user});const n=Object.assign({},s);delete n.user;const o=tn(n);await ns(this.storage,this.storageKey,o)}else{const n=tn(s);await ns(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await jt(this.storage,this.storageKey),await jt(this.storage,this.storageKey+"-code-verifier"),await jt(this.storage,this.storageKey+"-user"),this.userStorage&&await jt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&We()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),as);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/as);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${as}ms, refresh threshold is ${Dr} ticks`),n<=Dr&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof oo)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!We()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,i]=await Qt(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});n.push(c.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);n.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:n,error:o}=s;return o?{data:null,error:o}:await ae(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(ee(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,n;const{data:o,error:i}=s;if(i)return{data:null,error:i};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:d}=await ae(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(ee(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:o}=s;if(o)return{data:null,error:o};const{data:i,error:c}=await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:c})})}catch(s){if(ee(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:o}=s;return o?{data:null,error:o}:await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(ee(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],n=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:n,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:n},error:o}=e;if(o)return{data:null,error:o};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=_r(n.access_token);let c=null;i.aal&&(c=i.aal);let l=c;((r=(s=n.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(c=>c.kid===e);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+Rd>n)return r;const{data:o,error:i}=await ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=n,r=o.keys.find(c=>c.kid===e),!r)?null:r}async getClaims(e,s={}){try{let r=e;if(!r){const{data:f,error:j}=await this.getSession();if(j||!f.session)return{data:null,error:j};r=f.session.access_token}const{header:n,payload:o,signature:i,raw:{header:c,payload:l}}=_r(r);s!=null&&s.allowExpired||su(o.exp);const d=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!d){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:o,header:n,signature:i},error:null}}const u=ru(n.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,i,Fd(`${c}.${l}`)))throw new Ur("Invalid JWT signature");return{data:{claims:o,header:n,signature:i},error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}}}Rs.nextInstanceID=0;const bu=Rs;class yu extends bu{constructor(e){super(e)}}var wu=function(a,e,s,r){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(h){i(h)}}function l(u){try{d(r.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):n(u.value).then(c,l)}d((r=r.apply(a,e||[])).next())})};class ju{constructor(e,s,r){var n,o,i;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const c=Sd(e),l=new URL(c);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:vd,realtime:yd,auth:Object.assign(Object.assign({},bd),{storageKey:d}),global:xd},h=Cd(r??{},u);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(v,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=h.auth)!==null&&i!==void 0?i:{},this.headers,h.global.fetch),this.fetch=Nd(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Mc(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new md(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new pc(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return wu(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,userStorage:o,storageKey:i,flowType:c,lock:l,debug:d},u,h){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yu({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),u),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,userStorage:o,flowType:c,lock:l,debug:d,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new td(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ha=(a,e,s)=>new ju(a,e,s);function _u(){if(typeof window<"u"||typeof process>"u")return!1;const a=process.version;if(a==null)return!1;const e=a.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}_u()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Nu=void 0,ku=void 0,je=ha(Nu,ku);class Re{static async getClasses(){const{data:e,error:s}=await je.from("classes").select("*").eq("is_active",!0).order("day_of_week",{ascending:!0}).order("start_time",{ascending:!0});if(s)throw s;return e||[]}static async getAllClasses(){const{data:e,error:s}=await je.from("classes").select("*").order("day_of_week",{ascending:!0}).order("start_time",{ascending:!0});if(s)throw s;return e||[]}static async createClass(e){const{data:s,error:r}=await je.from("classes").insert([e]).select().single();if(r)throw r;return s}static async updateClass(e,s){const{data:r,error:n}=await je.from("classes").update({...s,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw n;return r}static async deleteClass(e){const{error:s}=await je.from("classes").delete().eq("id",e);if(s)throw s}static async getClassInstances(e,s){const{data:r,error:n}=await je.from("class_instances").select(`
        *,
        class:classes(*)
      `).gte("class_date",e).lte("class_date",s).eq("is_cancelled",!1).order("class_date",{ascending:!0}).order("start_time",{ascending:!0});if(n)throw n;return r||[]}static async createClassInstance(e,s,r){console.log("🔍 Creating class instance:",{classId:e,classDate:s,zoomData:r}),console.log("🔍 Date being stored in database:",s);const{data:n,error:o}=await je.from("classes").select("*").eq("id",e).single();if(o)throw console.error("❌ Error fetching class template:",o),o;if(!n)throw console.error("❌ Class template not found for ID:",e),new Error("Class template not found");console.log("✅ Class template found:",n);const i={class_id:e,class_name:n.name,teacher:n.teacher,class_date:s,start_time:n.start_time,duration:n.duration,level:n.level,max_students:n.max_students,zoom_meeting_id:r==null?void 0:r.meetingId,zoom_password:r==null?void 0:r.password,zoom_link:r==null?void 0:r.joinUrl,is_cancelled:!1};console.log("🔍 Inserting class instance data:",i);const{data:c,error:l}=await je.from("class_instances").insert([i]).select(`
        *,
        class:classes(*)
      `).single();if(l)throw console.error("❌ Error creating class instance:",l),l;return console.log("✅ Class instance created successfully:",c),c}static async getOrCreateClassInstance(e,s){const{data:r}=await je.from("class_instances").select(`
        *,
        class:classes(*)
      `).eq("class_id",e).eq("class_date",s).single();return r||await this.createClassInstance(e,s)}static async updateClassInstance(e,s){const{data:r,error:n}=await je.from("class_instances").update({...s,updated_at:new Date().toISOString()}).eq("id",e).select(`
        *,
        class:classes(*)
      `).single();if(n)throw n;return r}static async deleteClassInstance(e){const{data:s,error:r}=await je.from("class_instances").select("class_date, start_time, class:classes(*)").eq("id",e).single();if(r)throw r;const o=((h,v)=>{const f=new Date,[j,y,x]=h.split("-").map(Number),[b,m]=v.split(":"),g=new Date(j,y-1,x,parseInt(b),parseInt(m),0,0),_=new Date(g.getTime()+30*60*1e3);return f>_})(s.class_date,s.start_time);console.log("🔍 Class instance details:",{classDate:s.class_date,startTime:s.start_time,isPast:o});const{data:i,error:c}=await je.from("user_booked_classes").select("id").eq("class_instance_id",e).eq("is_cancelled",!1);if(c)throw c;if(o&&i&&i.length>0){console.log(`🕐 Class is in the past, automatically cancelling ${i.length} active bookings`);const{error:h}=await je.from("user_booked_classes").update({is_cancelled:!0,cancelled_at:new Date().toISOString()}).eq("class_instance_id",e).eq("is_cancelled",!1);if(h)throw console.error("Error cancelling past class bookings:",h),new Error(`Failed to cancel past class bookings: ${h.message}`);console.log("✅ Past class bookings cancelled successfully")}else if(!o&&i&&i.length>0)throw new Error(`Cannot delete class instance: ${i.length} student(s) have active bookings for this class. Please cancel their bookings first or contact students to reschedule.`);const{data:l,error:d}=await je.from("user_booked_classes").select("id").eq("class_instance_id",e).eq("is_cancelled",!0);if(d)throw d;if(l&&l.length>0){console.log(`🗑️ Deleting ${l.length} cancelled bookings before deleting class instance`);const{error:h}=await je.from("user_booked_classes").delete().eq("class_instance_id",e).eq("is_cancelled",!0);if(h)throw console.error("Error deleting cancelled bookings:",h),new Error(`Failed to delete cancelled bookings: ${h.message}`)}const{error:u}=await je.from("class_instances").delete().eq("id",e);if(u)throw console.error("Error deleting class instance:",u),new Error(`Failed to delete class instance: ${u.message}`);console.log("✅ Class instance deleted successfully")}static async getAllClassInstances(e,s){let r=je.from("class_instances").select(`
        *,
        class:classes(*)
      `).order("class_date",{ascending:!0}).order("created_at",{ascending:!0});e&&(r=r.gte("class_date",e)),s&&(r=r.lte("class_date",s));const{data:n,error:o}=await r;if(o)throw o;return n||[]}static async initializeDefaultClasses(){const e=[{name:"Sunday Restore",teacher:"Harshada",day_of_week:0,start_time:"09:00",duration:60,level:"All Levels",max_students:10},{name:"Sunset Flow",teacher:"Archana",day_of_week:0,start_time:"17:00",duration:60,level:"All Levels",max_students:10},{name:"Morning Flow",teacher:"Harshada",day_of_week:1,start_time:"08:00",duration:60,level:"All Levels",max_students:10},{name:"Evening Restore",teacher:"Archana",day_of_week:1,start_time:"18:00",duration:60,level:"All Levels",max_students:10},{name:"Morning Flow",teacher:"Harshada",day_of_week:2,start_time:"08:00",duration:60,level:"All Levels",max_students:10},{name:"Evening Restore",teacher:"Archana",day_of_week:2,start_time:"18:00",duration:60,level:"All Levels",max_students:10},{name:"Morning Flow",teacher:"Harshada",day_of_week:3,start_time:"08:00",duration:60,level:"All Levels",max_students:10},{name:"Evening Restore",teacher:"Archana",day_of_week:3,start_time:"18:00",duration:60,level:"All Levels",max_students:10},{name:"Morning Flow",teacher:"Harshada",day_of_week:4,start_time:"08:00",duration:60,level:"All Levels",max_students:10},{name:"Evening Restore",teacher:"Archana",day_of_week:4,start_time:"18:00",duration:60,level:"All Levels",max_students:10},{name:"Morning Flow",teacher:"Harshada",day_of_week:5,start_time:"08:00",duration:60,level:"All Levels",max_students:10},{name:"Evening Restore",teacher:"Archana",day_of_week:5,start_time:"18:00",duration:60,level:"All Levels",max_students:10},{name:"Saturday Flow",teacher:"Harshada",day_of_week:6,start_time:"09:00",duration:60,level:"All Levels",max_students:10},{name:"Weekend Restore",teacher:"Archana",day_of_week:6,start_time:"17:00",duration:60,level:"All Levels",max_students:10}],{data:s}=await je.from("classes").select("id").limit(1);if(s&&s.length>0){console.log("Classes already exist, skipping initialization");return}const{error:r}=await je.from("classes").insert(e.map(n=>({...n,is_active:!0})));if(r)throw console.error("Error initializing classes:",r),r;console.log("✅ Default classes initialized successfully")}}const Su=Object.freeze(Object.defineProperty({__proto__:null,ClassManagementService:Re,supabase:je},Symbol.toStringTag,{value:"Module"}));function Cu({onBookClass:a,onCancelClass:e,onPayForClass:s,user:r,bookedClasses:n={},isClassBooked:o}){const[i,c]=p.useState(0),[l,d]=p.useState([]),[u,h]=p.useState(!0);p.useEffect(()=>{(async()=>{try{h(!0);const b=f(),m=b[0].toISOString().split("T")[0],g=b[6].toISOString().split("T")[0],_=await Re.getClassInstances(m,g);d(_)}catch(b){console.error("Error loading class instances:",b),d([])}finally{h(!1)}})()},[i]);const v=x=>{var g,_,S,R,N,D,M;const b=((g=x.class)==null?void 0:g.start_time)||"00:00",m=new Date(`2000-01-01T${b}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return{id:x.id,name:((_=x.class)==null?void 0:_.name)||"Unknown Class",className:((S=x.class)==null?void 0:S.name)||"Unknown Class",teacher:((R=x.class)==null?void 0:R.teacher)||"Unknown Teacher",time:m,duration:((N=x.class)==null?void 0:N.duration)||"60 min",level:((D=x.class)==null?void 0:D.level)||"All Levels",maxStudents:((M=x.class)==null?void 0:M.max_students)||10,registrationClosed:x.is_cancelled}},f=()=>{const x=new Date,b=x.getDay(),m=new Date(x);m.setDate(x.getDate()-b+i*7);const g=[];for(let _=0;_<7;_++){const S=new Date(m);S.setDate(m.getDate()+_),g.push(S)}return g},j=x=>{const b=`${x.getFullYear()}-${String(x.getMonth()+1).padStart(2,"0")}-${String(x.getDate()).padStart(2,"0")}`;return l.filter(g=>g.class_date===b&&!g.is_cancelled).map(v)},y=(x,b)=>{const m=new Date,g=b.toLowerCase().replace(/\s/g,""),_=g.includes("pm"),S=g.replace(/[ap]m/,""),[R,N]=S.split(":"),D=parseInt(R,10),M=N?parseInt(N,10):0;let Z=D;_&&D!==12&&(Z+=12),!_&&D===12&&(Z=0);const Q=new Date(x.getFullYear(),x.getMonth(),x.getDate(),Z,M,0,0),q=new Date(Q.getTime()+30*60*1e3);return m>q};return r!=null&&r.classPacks&&(r.classPacks.singleClasses||0)+(r.classPacks.fivePack||0)+(r.classPacks.tenPack||0),u?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),t.jsx("p",{className:"text-muted-foreground",children:"Loading classes..."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"CLASS SCHEDULE"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Book your yoga classes for the week. Only classes created by admin will appear here."}),t.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[t.jsxs($,{variant:"outline",size:"sm",onClick:()=>c(x=>x-1),className:"flex items-center gap-2",children:[t.jsx(Wi,{className:"w-4 h-4"}),"Previous Week"]}),t.jsxs($,{variant:"outline",size:"sm",onClick:()=>c(0),className:"flex items-center gap-2",children:[t.jsx(De,{className:"w-4 h-4"}),"This Week"]}),t.jsxs($,{variant:"outline",size:"sm",onClick:()=>c(x=>x+1),className:"flex items-center gap-2",children:["Next Week",t.jsx(Hi,{className:"w-4 h-4"})]})]})]}),r&&t.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-lg p-4 text-center",children:t.jsxs("p",{className:"text-amber-800 font-medium",children:["Welcome back, ",r.name||r.email,"! You have ",(()=>{var _,S,R;const x=((_=r.classPacks)==null?void 0:_.singleClasses)||0,b=((S=r.classPacks)==null?void 0:S.fivePack)||0,m=((R=r.classPacks)==null?void 0:R.tenPack)||0,g=x+b+m;return console.log("🔍 User credits debug:",{singleClasses:x,fivePack:b,tenPack:m,totalCredits:g,classPacks:r.classPacks}),g})()," credit",(()=>{var b,m,g;return(((b=r.classPacks)==null?void 0:b.singleClasses)||0)+(((m=r.classPacks)==null?void 0:m.fivePack)||0)+(((g=r.classPacks)==null?void 0:g.tenPack)||0)!==1?"s":""})()," available."]})}),t.jsx("div",{className:"space-y-4",children:f().map((x,b)=>{const m=j(x);return t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[t.jsx("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-gray-100",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:x.toLocaleDateString("en-US",{weekday:"long"})}),t.jsx("p",{className:"text-sm text-gray-600",children:x.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})}),m.length===0?t.jsx("div",{className:"text-center py-6",children:t.jsx("p",{className:"text-gray-500",children:"No classes scheduled"})}):t.jsx("div",{className:"space-y-2",children:m.map(g=>{var M,Z;const _=y(x,g.time),S=Q=>{if(!Q)return"00:00";if(Q.includes("AM")||Q.includes("PM"))return Q;const[q,T]=Q.split(":"),ue=parseInt(q),be=ue>=12?"PM":"AM";return`${ue%12||12}:${T} ${be}`},R=`${x.getFullYear()}-${String(x.getMonth()+1).padStart(2,"0")}-${String(x.getDate()).padStart(2,"0")}`,N=`${g.name}-${R}-${S(g.time)}`,D=n[N]!==void 0;return console.log("🔍 Class Item ID:",g.id),console.log("🔍 Class Key:",N),console.log("🔍 Class item details:",{name:g.name,time:g.time,date:R,formattedTime:S(g.time)}),console.log("🔍 Is Booked:",D),console.log("🔍 Booked Classes Keys:",Object.keys(n)),console.log("🔍 Zoom Link for this class:",(M=n[N])==null?void 0:M.zoomLink),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"text-lg font-semibold text-gray-900 min-w-[80px]",children:g.time}),t.jsx("div",{className:"text-lg font-medium text-gray-800",children:g.name}),t.jsx("div",{className:"text-sm text-gray-600",children:g.teacher}),t.jsxs("div",{className:"text-sm text-gray-500",children:[g.level," • ",g.duration]})]})}),t.jsx("div",{className:"flex-shrink-0 ml-4",children:_?t.jsx(_e,{variant:"secondary",children:"Past Class"}):g.registrationClosed?t.jsx(_e,{variant:"secondary",children:"Registration Closed"}):D?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(_e,{variant:"default",className:"bg-green-600 hover:bg-green-700",children:"✅ Booked"}),((Z=n[N])==null?void 0:Z.zoomLink)&&t.jsx($,{size:"sm",variant:"outline",className:"text-xs",onClick:()=>window.open(n[N].zoomLink,"_blank"),children:"🔗 Join Zoom"}),t.jsx($,{size:"sm",variant:"destructive",className:"text-xs",onClick:()=>e==null?void 0:e(N),disabled:_,children:"Cancel"})]}):t.jsx($,{onClick:async()=>{const Q=`${x.getFullYear()}-${String(x.getMonth()+1).padStart(2,"0")}-${String(x.getDate()).padStart(2,"0")}`;console.log("📅 Booking class for date:",{originalDate:x.toDateString(),localDate:Q,isoDate:x.toISOString().split("T")[0],classItem:g.className}),await(a==null?void 0:a(g,Q))},size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",disabled:_,children:"Book Class"})})]},g.id)})})]},x.toISOString())})})]})}function Pu(){return t.jsx("div",{className:"max-w-4xl mx-auto",children:t.jsxs("div",{children:[t.jsx("h2",{className:"mb-4",children:"About Nirva Yoga"}),t.jsx("p",{className:"mb-4",children:"At Nirva Yoga, we believe in making yoga accessible to everyone, everywhere. Our experienced instructors guide students of all levels through transformative virtual practices, bringing the studio experience directly to your home."}),t.jsx("p",{className:"mb-4",children:"With live Zoom classes at just $11/class, we're committed to removing barriers and helping our global community find balance, strength, and inner peace through yoga. Join us from anywhere in the world for authentic, interactive yoga instruction."}),t.jsxs("p",{className:"mb-6 p-4 bg-accent rounded-lg border border-primary/20",children:[t.jsx("strong",{children:"Our Promise:"})," We provide special attention to each student and guarantee progress in both your physical practice and mental well-being. Every class is designed to meet you where you are and help you grow stronger, more flexible, and more centered."]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:"📍"}),t.jsx("span",{children:"Your Home"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:"📞"}),t.jsx("span",{children:"(805)807-4894"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:"✉️"}),t.jsx("span",{children:"nirvayogastudio@gmail.com"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:"📱"}),t.jsxs("a",{href:"https://instagram.com/nirvayogastudio",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80 transition-colors flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})}),"@NirvaYogaStudio"]})]})]})]})})}function U({className:a,...e}){return t.jsx("div",{"data-slot":"card",className:re("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",a),...e})}function ne({className:a,...e}){return t.jsx("div",{"data-slot":"card-header",className:re("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...e})}function oe({className:a,...e}){return t.jsx("h4",{"data-slot":"card-title",className:re("leading-none",a),...e})}function on({className:a,...e}){return t.jsx("p",{"data-slot":"card-description",className:re("text-muted-foreground",a),...e})}function F({className:a,...e}){return t.jsx("div",{"data-slot":"card-content",className:re("px-6 [&:last-child]:pb-6",a),...e})}const Eu="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function io(a){const[e,s]=p.useState(!1),r=()=>{s(!0)},{src:n,alt:o,style:i,className:c,...l}=a;return e?t.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${c??""}`,style:i,children:t.jsx("div",{className:"flex items-center justify-center w-full h-full",children:t.jsx("img",{src:Eu,alt:"Error loading image",...l,"data-original-url":n})})}):t.jsx("img",{src:n,alt:o,className:c,style:i,...l,onError:r})}const Tu="/assets/teacher2-OPsOsDZf.png",Au="/assets/teacher1-BJXOW5Xm.png",Ru=[{id:"1",name:"Harshada",specialties:["Vinyasa Flow","Power Yoga","Alignment-Based Practice","Gentle Yoga"],bio:"Harshada brings 10 years of experience and a gentle, nurturing approach to yoga. She provides special attention to each student, ensuring proper alignment and modifications using props like blocks, straps, and bolsters to support all levels. Her virtual classes guarantee progress in both flexibility and mental clarity through personalized guidance that honors each individual's unique needs and abilities.",image:Au,certifications:["200-Hour Yoga Teacher Certified","Vinyasa Flow Specialist","Power Yoga Certified"],experience:"10 years"},{id:"2",name:"Archana",specialties:["Vinyasa Flow","Power Yoga","Strength Building","Dynamic Flow"],bio:"Archana combines strength and dynamic teaching style to create transformative yoga experiences. She provides individualized attention to help each student progress safely while building physical strength. Her classes guarantee measurable improvements in strength, balance, and mental focus through her energetic and supportive approach.",image:Tu,certifications:["200-Hour Yoga Teacher Certified","Vinyasa Flow Specialist","Power Yoga Certified"],experience:"8 years"}];function Iu(){const[a,e]=p.useState(new Set),s=r=>{e(n=>{const o=new Set(n);return o.has(r)?o.delete(r):o.add(r),o})};return t.jsxs("div",{className:"w-full",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("h2",{className:"mb-4",children:"Meet Our Teachers"}),t.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Our experienced instructors bring passion, expertise, and personalized attention to every virtual class. Each teacher is certified and dedicated to helping you deepen your practice from the comfort of your home."})]}),t.jsx("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:Ru.map(r=>{const n=a.has(r.id),o=r.specialties.length>2;return t.jsxs(U,{className:"overflow-hidden",children:[t.jsx("div",{className:"aspect-square overflow-hidden",children:t.jsx(io,{src:r.image,alt:`${r.name} - Yoga Teacher`,className:`w-full h-full object-cover transition-transform hover:scale-105 ${r.name==="Archana"?"object-bottom":""}`})}),t.jsxs(F,{className:"p-6",children:[t.jsx("h3",{className:"mb-2",children:r.name}),t.jsx("div",{className:"mb-3",children:t.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[r.specialties.slice(0,n?r.specialties.length:2).map((i,c)=>t.jsx("span",{className:"text-xs bg-secondary text-secondary-foreground px-2 py-1 rounded-full",children:i},c)),o&&t.jsx("button",{onClick:()=>s(r.id),className:"text-xs text-primary hover:text-primary/80 underline cursor-pointer transition-colors",children:n?"Show less":`+${r.specialties.length-2} more`})]})}),t.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:r.bio}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.jsx("strong",{children:"Experience:"})," ",r.experience]}),t.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.jsx("strong",{children:"Certifications:"})," ",r.certifications.join(", ")]})]})]})]},r.id)})})]})}function Ou(){return t.jsx("div",{className:"w-full",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsx("h2",{className:"mb-6 text-center font-heading",children:"Practice Yoga From Your Home"}),t.jsx("p",{className:"mb-4 text-muted-foreground text-center max-w-3xl mx-auto font-body",children:"Join Nirva Yoga's live virtual classes via Zoom and experience the benefits of guided instruction from the comfort and privacy of your own space. Our interactive online format allows for personalized attention while maintaining the community feel of a traditional studio."}),t.jsx("div",{className:"mb-6 p-4 bg-primary/10 rounded-lg border border-primary/20 max-w-3xl mx-auto",children:t.jsxs("p",{className:"text-sm text-center",children:[t.jsx("strong",{children:"Personal Attention Guarantee:"})," With small class sizes and experienced instructors, we ensure every student receives individual guidance and modifications to guarantee progress in both physical strength and mental well-being."]})}),t.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[t.jsxs(U,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(Vi,{className:"w-5 h-5 text-primary"}),t.jsx("h4",{className:"font-heading",children:"Live Zoom Classes"})]}),t.jsx("p",{className:"text-sm text-muted-foreground font-body",children:"Interactive sessions with real-time guidance and modifications"})]}),t.jsxs(U,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(Gi,{className:"w-5 h-5 text-primary"}),t.jsx("h4",{children:"Camera Optional"})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose to be seen for personalized adjustments or practice privately"})]}),t.jsxs(U,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(Yi,{className:"w-5 h-5 text-primary"}),t.jsx("h4",{children:"Your Sacred Space"})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Practice in your own environment with just a yoga mat and water"})]}),t.jsxs(U,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(Ki,{className:"w-5 h-5 text-primary"}),t.jsx("h4",{children:"Easy Access"})]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Simple Zoom link sent after booking - no special apps required"})]})]}),t.jsxs("div",{className:"bg-muted p-6 rounded-lg max-w-2xl mx-auto",children:[t.jsx("h4",{className:"mb-3 text-center",children:"What You'll Need:"}),t.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[t.jsx("li",{children:"• Yoga mat (or towel/carpet)"}),t.jsx("li",{children:"• Comfortable space to move (about 6x3 feet)"}),t.jsx("li",{children:"• Stable internet connection"}),t.jsx("li",{children:"• Computer, tablet, or phone with camera (optional)"}),t.jsx("li",{children:"• Water bottle and optional props (blocks, strap)"})]})]})]})})}function ie({className:a,type:e,...s}){return t.jsx("input",{type:e,"data-slot":"input",className:re("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...s})}var $u="Label",lo=p.forwardRef((a,e)=>t.jsx(de.label,{...a,ref:e,onMouseDown:s=>{var n;s.target.closest("button, input, select, textarea")||((n=a.onMouseDown)==null||n.call(a,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));lo.displayName=$u;var Du=lo;function J({className:a,...e}){return t.jsx(Du,{"data-slot":"label",className:re("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...e})}function fa({className:a,...e}){return t.jsx("textarea",{"data-slot":"textarea",className:re("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...e})}var Lu=a=>{switch(a){case"success":return zu;case"info":return Fu;case"warning":return Bu;case"error":return qu;default:return null}},Mu=Array(12).fill(0),Uu=({visible:a,className:e})=>A.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":a},A.createElement("div",{className:"sonner-spinner"},Mu.map((s,r)=>A.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),zu=A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},A.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Bu=A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},A.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Fu=A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},A.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),qu=A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},A.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Wu=A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},A.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),A.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Hu=()=>{let[a,e]=A.useState(document.hidden);return A.useEffect(()=>{let s=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),a},zr=1,Vu=class{constructor(){this.subscribe=a=>(this.subscribers.push(a),()=>{let e=this.subscribers.indexOf(a);this.subscribers.splice(e,1)}),this.publish=a=>{this.subscribers.forEach(e=>e(a))},this.addToast=a=>{this.publish(a),this.toasts=[...this.toasts,a]},this.create=a=>{var e;let{message:s,...r}=a,n=typeof(a==null?void 0:a.id)=="number"||((e=a.id)==null?void 0:e.length)>0?a.id:zr++,o=this.toasts.find(c=>c.id===n),i=a.dismissible===void 0?!0:a.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),o?this.toasts=this.toasts.map(c=>c.id===n?(this.publish({...c,...a,id:n,title:s}),{...c,...a,id:n,dismissible:i,title:s}):c):this.addToast({title:s,...r,dismissible:i,id:n}),n},this.dismiss=a=>(this.dismissedToasts.add(a),a||this.toasts.forEach(e=>{this.subscribers.forEach(s=>s({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:a,dismiss:!0})),a),this.message=(a,e)=>this.create({...e,message:a}),this.error=(a,e)=>this.create({...e,message:a,type:"error"}),this.success=(a,e)=>this.create({...e,type:"success",message:a}),this.info=(a,e)=>this.create({...e,type:"info",message:a}),this.warning=(a,e)=>this.create({...e,type:"warning",message:a}),this.loading=(a,e)=>this.create({...e,type:"loading",message:a}),this.promise=(a,e)=>{if(!e)return;let s;e.loading!==void 0&&(s=this.create({...e,promise:a,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=a instanceof Promise?a:a(),n=s!==void 0,o,i=r.then(async l=>{if(o=["resolve",l],A.isValidElement(l))n=!1,this.create({id:s,type:"default",message:l});else if(Yu(l)&&!l.ok){n=!1;let d=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:s,type:"error",message:d,description:u})}else if(e.success!==void 0){n=!1;let d=typeof e.success=="function"?await e.success(l):e.success,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:s,type:"success",message:d,description:u})}}).catch(async l=>{if(o=["reject",l],e.error!==void 0){n=!1;let d=typeof e.error=="function"?await e.error(l):e.error,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:s,type:"error",message:d,description:u})}}).finally(()=>{var l;n&&(this.dismiss(s),s=void 0),(l=e.finally)==null||l.call(e)}),c=()=>new Promise((l,d)=>i.then(()=>o[0]==="reject"?d(o[1]):l(o[1])).catch(d));return typeof s!="string"&&typeof s!="number"?{unwrap:c}:Object.assign(s,{unwrap:c})},this.custom=(a,e)=>{let s=(e==null?void 0:e.id)||zr++;return this.create({jsx:a(s),id:s,...e}),s},this.getActiveToasts=()=>this.toasts.filter(a=>!this.dismissedToasts.has(a.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ae=new Vu,Gu=(a,e)=>{let s=(e==null?void 0:e.id)||zr++;return Ae.addToast({title:a,...e,id:s}),s},Yu=a=>a&&typeof a=="object"&&"ok"in a&&typeof a.ok=="boolean"&&"status"in a&&typeof a.status=="number",Ku=Gu,Ju=()=>Ae.toasts,Zu=()=>Ae.getActiveToasts(),tt=Object.assign(Ku,{success:Ae.success,info:Ae.info,warning:Ae.warning,error:Ae.error,custom:Ae.custom,message:Ae.message,promise:Ae.promise,dismiss:Ae.dismiss,loading:Ae.loading},{getHistory:Ju,getToasts:Zu});function Xu(a,{insertAt:e}={}){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&s.firstChild?s.insertBefore(r,s.firstChild):s.appendChild(r),r.styleSheet?r.styleSheet.cssText=a:r.appendChild(document.createTextNode(a))}Xu(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function qs(a){return a.label!==void 0}var Qu=3,eh="32px",th="16px",ln=4e3,sh=356,rh=14,ah=20,nh=200;function qe(...a){return a.filter(Boolean).join(" ")}function oh(a){let[e,s]=a.split("-"),r=[];return e&&r.push(e),s&&r.push(s),r}var ih=a=>{var e,s,r,n,o,i,c,l,d,u,h;let{invert:v,toast:f,unstyled:j,interacting:y,setHeights:x,visibleToasts:b,heights:m,index:g,toasts:_,expanded:S,removeToast:R,defaultRichColors:N,closeButton:D,style:M,cancelButtonStyle:Z,actionButtonStyle:Q,className:q="",descriptionClassName:T="",duration:ue,position:be,gap:ce,loadingIcon:fe,expandByDefault:I,classNames:P,icons:H,closeButtonAriaLabel:W="Close toast",pauseWhenPageIsHidden:w}=a,[E,C]=A.useState(null),[O,L]=A.useState(null),[k,Y]=A.useState(!1),[B,K]=A.useState(!1),[z,te]=A.useState(!1),[we,Se]=A.useState(!1),[Je,Ze]=A.useState(!1),[gt,at]=A.useState(0),[Ca,Ue]=A.useState(0),V=A.useRef(f.duration||ue||ln),vs=A.useRef(null),Xe=A.useRef(null),bs=g===0,$e=g+1<=b,G=f.type,me=f.dismissible!==!1,Yt=f.className||"",Ms=f.descriptionClassName||"",Kt=A.useMemo(()=>m.findIndex(X=>X.toastId===f.id)||0,[m,f.id]),Pa=A.useMemo(()=>{var X;return(X=f.closeButton)!=null?X:D},[f.closeButton,D]),Ea=A.useMemo(()=>f.duration||ue||ln,[f.duration,ue]),mr=A.useRef(0),Jt=A.useRef(0),Ta=A.useRef(0),Zt=A.useRef(null),[Li,Mi]=be.split("-"),Aa=A.useMemo(()=>m.reduce((X,ge,ve)=>ve>=Kt?X:X+ge.height,0),[m,Kt]),Ra=Hu(),Ui=f.invert||v,gr=G==="loading";Jt.current=A.useMemo(()=>Kt*ce+Aa,[Kt,Aa]),A.useEffect(()=>{V.current=Ea},[Ea]),A.useEffect(()=>{Y(!0)},[]),A.useEffect(()=>{let X=Xe.current;if(X){let ge=X.getBoundingClientRect().height;return Ue(ge),x(ve=>[{toastId:f.id,height:ge,position:f.position},...ve]),()=>x(ve=>ve.filter(ze=>ze.toastId!==f.id))}},[x,f.id]),A.useLayoutEffect(()=>{if(!k)return;let X=Xe.current,ge=X.style.height;X.style.height="auto";let ve=X.getBoundingClientRect().height;X.style.height=ge,Ue(ve),x(ze=>ze.find(Be=>Be.toastId===f.id)?ze.map(Be=>Be.toastId===f.id?{...Be,height:ve}:Be):[{toastId:f.id,height:ve,position:f.position},...ze])},[k,f.title,f.description,x,f.id]);let pt=A.useCallback(()=>{K(!0),at(Jt.current),x(X=>X.filter(ge=>ge.toastId!==f.id)),setTimeout(()=>{R(f)},nh)},[f,R,x,Jt]);A.useEffect(()=>{if(f.promise&&G==="loading"||f.duration===1/0||f.type==="loading")return;let X;return S||y||w&&Ra?(()=>{if(Ta.current<mr.current){let ge=new Date().getTime()-mr.current;V.current=V.current-ge}Ta.current=new Date().getTime()})():V.current!==1/0&&(mr.current=new Date().getTime(),X=setTimeout(()=>{var ge;(ge=f.onAutoClose)==null||ge.call(f,f),pt()},V.current)),()=>clearTimeout(X)},[S,y,f,G,w,Ra,pt]),A.useEffect(()=>{f.delete&&pt()},[pt,f.delete]);function zi(){var X,ge,ve;return H!=null&&H.loading?A.createElement("div",{className:qe(P==null?void 0:P.loader,(X=f==null?void 0:f.classNames)==null?void 0:X.loader,"sonner-loader"),"data-visible":G==="loading"},H.loading):fe?A.createElement("div",{className:qe(P==null?void 0:P.loader,(ge=f==null?void 0:f.classNames)==null?void 0:ge.loader,"sonner-loader"),"data-visible":G==="loading"},fe):A.createElement(Uu,{className:qe(P==null?void 0:P.loader,(ve=f==null?void 0:f.classNames)==null?void 0:ve.loader),visible:G==="loading"})}return A.createElement("li",{tabIndex:0,ref:Xe,className:qe(q,Yt,P==null?void 0:P.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,P==null?void 0:P.default,P==null?void 0:P[G],(s=f==null?void 0:f.classNames)==null?void 0:s[G]),"data-sonner-toast":"","data-rich-colors":(r=f.richColors)!=null?r:N,"data-styled":!(f.jsx||f.unstyled||j),"data-mounted":k,"data-promise":!!f.promise,"data-swiped":Je,"data-removed":B,"data-visible":$e,"data-y-position":Li,"data-x-position":Mi,"data-index":g,"data-front":bs,"data-swiping":z,"data-dismissible":me,"data-type":G,"data-invert":Ui,"data-swipe-out":we,"data-swipe-direction":O,"data-expanded":!!(S||I&&k),style:{"--index":g,"--toasts-before":g,"--z-index":_.length-g,"--offset":`${B?gt:Jt.current}px`,"--initial-height":I?"auto":`${Ca}px`,...M,...f.style},onDragEnd:()=>{te(!1),C(null),Zt.current=null},onPointerDown:X=>{gr||!me||(vs.current=new Date,at(Jt.current),X.target.setPointerCapture(X.pointerId),X.target.tagName!=="BUTTON"&&(te(!0),Zt.current={x:X.clientX,y:X.clientY}))},onPointerUp:()=>{var X,ge,ve,ze;if(we||!me)return;Zt.current=null;let Be=Number(((X=Xe.current)==null?void 0:X.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),xt=Number(((ge=Xe.current)==null?void 0:ge.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),At=new Date().getTime()-((ve=vs.current)==null?void 0:ve.getTime()),Fe=E==="x"?Be:xt,vt=Math.abs(Fe)/At;if(Math.abs(Fe)>=ah||vt>.11){at(Jt.current),(ze=f.onDismiss)==null||ze.call(f,f),L(E==="x"?Be>0?"right":"left":xt>0?"down":"up"),pt(),Se(!0),Ze(!1);return}te(!1),C(null)},onPointerMove:X=>{var ge,ve,ze,Be;if(!Zt.current||!me||((ge=window.getSelection())==null?void 0:ge.toString().length)>0)return;let xt=X.clientY-Zt.current.y,At=X.clientX-Zt.current.x,Fe=(ve=a.swipeDirections)!=null?ve:oh(be);!E&&(Math.abs(At)>1||Math.abs(xt)>1)&&C(Math.abs(At)>Math.abs(xt)?"x":"y");let vt={x:0,y:0};E==="y"?(Fe.includes("top")||Fe.includes("bottom"))&&(Fe.includes("top")&&xt<0||Fe.includes("bottom")&&xt>0)&&(vt.y=xt):E==="x"&&(Fe.includes("left")||Fe.includes("right"))&&(Fe.includes("left")&&At<0||Fe.includes("right")&&At>0)&&(vt.x=At),(Math.abs(vt.x)>0||Math.abs(vt.y)>0)&&Ze(!0),(ze=Xe.current)==null||ze.style.setProperty("--swipe-amount-x",`${vt.x}px`),(Be=Xe.current)==null||Be.style.setProperty("--swipe-amount-y",`${vt.y}px`)}},Pa&&!f.jsx?A.createElement("button",{"aria-label":W,"data-disabled":gr,"data-close-button":!0,onClick:gr||!me?()=>{}:()=>{var X;pt(),(X=f.onDismiss)==null||X.call(f,f)},className:qe(P==null?void 0:P.closeButton,(n=f==null?void 0:f.classNames)==null?void 0:n.closeButton)},(o=H==null?void 0:H.close)!=null?o:Wu):null,f.jsx||p.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:A.createElement(A.Fragment,null,G||f.icon||f.promise?A.createElement("div",{"data-icon":"",className:qe(P==null?void 0:P.icon,(i=f==null?void 0:f.classNames)==null?void 0:i.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||zi():null,f.type!=="loading"?f.icon||(H==null?void 0:H[G])||Lu(G):null):null,A.createElement("div",{"data-content":"",className:qe(P==null?void 0:P.content,(c=f==null?void 0:f.classNames)==null?void 0:c.content)},A.createElement("div",{"data-title":"",className:qe(P==null?void 0:P.title,(l=f==null?void 0:f.classNames)==null?void 0:l.title)},typeof f.title=="function"?f.title():f.title),f.description?A.createElement("div",{"data-description":"",className:qe(T,Ms,P==null?void 0:P.description,(d=f==null?void 0:f.classNames)==null?void 0:d.description)},typeof f.description=="function"?f.description():f.description):null),p.isValidElement(f.cancel)?f.cancel:f.cancel&&qs(f.cancel)?A.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||Z,onClick:X=>{var ge,ve;qs(f.cancel)&&me&&((ve=(ge=f.cancel).onClick)==null||ve.call(ge,X),pt())},className:qe(P==null?void 0:P.cancelButton,(u=f==null?void 0:f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,p.isValidElement(f.action)?f.action:f.action&&qs(f.action)?A.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||Q,onClick:X=>{var ge,ve;qs(f.action)&&((ve=(ge=f.action).onClick)==null||ve.call(ge,X),!X.defaultPrevented&&pt())},className:qe(P==null?void 0:P.actionButton,(h=f==null?void 0:f.classNames)==null?void 0:h.actionButton)},f.action.label):null))};function cn(){if(typeof window>"u"||typeof document>"u")return"ltr";let a=document.documentElement.getAttribute("dir");return a==="auto"||!a?window.getComputedStyle(document.documentElement).direction:a}function lh(a,e){let s={};return[a,e].forEach((r,n)=>{let o=n===1,i=o?"--mobile-offset":"--offset",c=o?th:eh;function l(d){["top","right","bottom","left"].forEach(u=>{s[`${i}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?s[`${i}-${d}`]=c:s[`${i}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):l(c)}),s}p.forwardRef(function(a,e){let{invert:s,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:o,closeButton:i,className:c,offset:l,mobileOffset:d,theme:u="light",richColors:h,duration:v,style:f,visibleToasts:j=Qu,toastOptions:y,dir:x=cn(),gap:b=rh,loadingIcon:m,icons:g,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:S}=a,[R,N]=A.useState([]),D=A.useMemo(()=>Array.from(new Set([r].concat(R.filter(w=>w.position).map(w=>w.position)))),[R,r]),[M,Z]=A.useState([]),[Q,q]=A.useState(!1),[T,ue]=A.useState(!1),[be,ce]=A.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),fe=A.useRef(null),I=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),P=A.useRef(null),H=A.useRef(!1),W=A.useCallback(w=>{N(E=>{var C;return(C=E.find(O=>O.id===w.id))!=null&&C.delete||Ae.dismiss(w.id),E.filter(({id:O})=>O!==w.id)})},[]);return A.useEffect(()=>Ae.subscribe(w=>{if(w.dismiss){N(E=>E.map(C=>C.id===w.id?{...C,delete:!0}:C));return}setTimeout(()=>{El.flushSync(()=>{N(E=>{let C=E.findIndex(O=>O.id===w.id);return C!==-1?[...E.slice(0,C),{...E[C],...w},...E.slice(C+1)]:[w,...E]})})})}),[]),A.useEffect(()=>{if(u!=="system"){ce(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ce("dark"):ce("light")),typeof window>"u")return;let w=window.matchMedia("(prefers-color-scheme: dark)");try{w.addEventListener("change",({matches:E})=>{ce(E?"dark":"light")})}catch{w.addListener(({matches:C})=>{try{ce(C?"dark":"light")}catch(O){console.error(O)}})}},[u]),A.useEffect(()=>{R.length<=1&&q(!1)},[R]),A.useEffect(()=>{let w=E=>{var C,O;n.every(L=>E[L]||E.code===L)&&(q(!0),(C=fe.current)==null||C.focus()),E.code==="Escape"&&(document.activeElement===fe.current||(O=fe.current)!=null&&O.contains(document.activeElement))&&q(!1)};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[n]),A.useEffect(()=>{if(fe.current)return()=>{P.current&&(P.current.focus({preventScroll:!0}),P.current=null,H.current=!1)}},[fe.current]),A.createElement("section",{ref:e,"aria-label":`${_} ${I}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},D.map((w,E)=>{var C;let[O,L]=w.split("-");return R.length?A.createElement("ol",{key:w,dir:x==="auto"?cn():x,tabIndex:-1,ref:fe,className:c,"data-sonner-toaster":!0,"data-theme":be,"data-y-position":O,"data-lifted":Q&&R.length>1&&!o,"data-x-position":L,style:{"--front-toast-height":`${((C=M[0])==null?void 0:C.height)||0}px`,"--width":`${sh}px`,"--gap":`${b}px`,...f,...lh(l,d)},onBlur:k=>{H.current&&!k.currentTarget.contains(k.relatedTarget)&&(H.current=!1,P.current&&(P.current.focus({preventScroll:!0}),P.current=null))},onFocus:k=>{k.target instanceof HTMLElement&&k.target.dataset.dismissible==="false"||H.current||(H.current=!0,P.current=k.relatedTarget)},onMouseEnter:()=>q(!0),onMouseMove:()=>q(!0),onMouseLeave:()=>{T||q(!1)},onDragEnd:()=>q(!1),onPointerDown:k=>{k.target instanceof HTMLElement&&k.target.dataset.dismissible==="false"||ue(!0)},onPointerUp:()=>ue(!1)},R.filter(k=>!k.position&&E===0||k.position===w).map((k,Y)=>{var B,K;return A.createElement(ih,{key:k.id,icons:g,index:Y,toast:k,defaultRichColors:h,duration:(B=y==null?void 0:y.duration)!=null?B:v,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:s,visibleToasts:j,closeButton:(K=y==null?void 0:y.closeButton)!=null?K:i,interacting:T,position:w,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:W,toasts:R.filter(z=>z.position==k.position),heights:M.filter(z=>z.position==k.position),setHeights:Z,expandByDefault:o,gap:b,loadingIcon:m,expanded:Q,pauseWhenPageIsHidden:S,swipeDirections:a.swipeDirections})})):null}))});class Oe{static async sendBookingNotification(e){try{console.log("📧 Sending booking notification via Netlify function...");const r=await(await fetch("/.netlify/functions/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"booking-notification",data:e})})).json();r.success?(console.log("✅ Booking notification sent to admin"),console.log("📧 Response:",r)):console.error("❌ Failed to send booking notification:",r.error)}catch(s){console.error("❌ Failed to send booking notification:",s)}}static async sendStudentConfirmation(e){try{console.log("📧 Sending student confirmation via Netlify function...");const r=await(await fetch("/.netlify/functions/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"student-confirmation",data:e})})).json();r.success?(console.log("✅ Student confirmation sent"),console.log("📧 Response:",r)):console.error("❌ Failed to send student confirmation:",r.error)}catch(s){console.error("❌ Failed to send student confirmation:",s)}}static async sendPackagePurchaseNotification(e){try{console.log("📧 Sending package purchase notification via Netlify function...");const r=await(await fetch("/.netlify/functions/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"package-purchase",data:e})})).json();r.success?(console.log("✅ Package purchase notification sent to admin"),console.log("📧 Response:",r)):console.error("❌ Failed to send package purchase notification:",r.error)}catch(s){console.error("❌ Failed to send package purchase notification:",s)}}static async sendPackagePurchaseConfirmation(e){try{console.log("📧 Sending package purchase confirmation via Netlify function...");const r=await(await fetch("/.netlify/functions/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"package-purchase-confirmation",data:e})})).json();r.success?(console.log("✅ Package purchase confirmation sent to student"),console.log("📧 Response:",r)):console.error("❌ Failed to send package purchase confirmation:",r.error)}catch(s){console.error("❌ Failed to send package purchase confirmation:",s)}}static async sendWelcomeEmail(e){try{console.log("📧 Sending welcome email via Netlify function...");const r=await(await fetch("/.netlify/functions/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"welcome-email",data:e})})).json();r.success?(console.log("✅ Welcome email sent to new student"),console.log("📧 Response:",r)):console.error("❌ Failed to send welcome email:",r.error)}catch(s){console.error("❌ Failed to send welcome email:",s)}}static async sendEmail({type:e,data:s}){try{console.log(`📧 Sending ${e} email via Netlify function...`);const n=await(await fetch("/.netlify/functions/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e,data:s})})).json();n.success?(console.log(`✅ ${e} email sent successfully`),console.log("📧 Response:",n)):console.error(`❌ Failed to send ${e} email:`,n.error)}catch(r){console.error(`❌ Failed to send ${e} email:`,r)}}}ys(Oe,"ADMIN_EMAIL","nirvayogastudio@gmail.com"),ys(Oe,"FROM_EMAIL","noreply@nirva-yoga.com");const dn=Object.freeze(Object.defineProperty({__proto__:null,EmailService:Oe},Symbol.toStringTag,{value:"Module"}));function ch(){const[a,e]=p.useState({firstName:"",lastName:"",email:"",interestLevel:"",yogaGoals:""}),[s,r]=p.useState(!1),[n,o]=p.useState(!1),i=l=>{const{name:d,value:u}=l.target;e(h=>({...h,[d]:u}))},c=async l=>{if(l.preventDefault(),!a.firstName||!a.lastName||!a.email){tt.error("Please fill in all required fields");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)){tt.error("Please enter a valid email address");return}r(!0);try{await Oe.sendEmail({type:"registration-inquiry",data:{firstName:a.firstName,lastName:a.lastName,email:a.email,interestLevel:a.interestLevel,yogaGoals:a.yogaGoals}}),await Oe.sendEmail({type:"registration-confirmation",data:{firstName:a.firstName,lastName:a.lastName,email:a.email,interestLevel:a.interestLevel,yogaGoals:a.yogaGoals}}),tt.success("Registration submitted successfully! Check your email for class information."),o(!0)}catch(u){console.error("Registration submission error:",u),tt.error("Something went wrong. Please try again.")}finally{r(!1)}};return t.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("h2",{className:"mb-4",children:"Register Here"}),t.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Ready to start your yoga journey? Register for our virtual classes and begin your practice with us today."})]}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[t.jsxs(U,{children:[t.jsx(ne,{children:t.jsx(oe,{children:"Register for Classes"})}),t.jsx(F,{children:n?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),t.jsx("h3",{className:"text-xl font-semibold text-green-600 mb-2",children:"Registration Submitted!"}),t.jsxs("p",{className:"text-muted-foreground mb-4",children:["Thank you, ",a.firstName,"! We'll send you class information soon."]}),t.jsxs("div",{className:"bg-accent/30 p-4 rounded-lg text-sm",children:[t.jsx("p",{className:"font-medium mb-2",children:"What happens next:"}),t.jsxs("ul",{className:"text-left space-y-1 text-muted-foreground",children:[t.jsx("li",{children:"• You'll receive an email with class schedules"}),t.jsx("li",{children:"• We'll send you booking instructions"}),t.jsx("li",{children:"• You can start booking classes right away!"})]})]}),t.jsx($,{onClick:()=>{o(!1),e({firstName:"",lastName:"",email:"",interestLevel:"",yogaGoals:""})},variant:"outline",className:"mt-4",children:"Register Another Person"})]}):t.jsxs("form",{onSubmit:c,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs(J,{htmlFor:"firstName",children:["First Name ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(ie,{id:"firstName",name:"firstName",value:a.firstName,onChange:i,placeholder:"Enter your first name",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(J,{htmlFor:"lastName",children:["Last Name ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(ie,{id:"lastName",name:"lastName",value:a.lastName,onChange:i,placeholder:"Enter your last name",required:!0})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(J,{htmlFor:"email",children:["Email ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(ie,{id:"email",name:"email",type:"email",value:a.email,onChange:i,placeholder:"Enter your email address",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(J,{htmlFor:"interestLevel",children:"Interest Level"}),t.jsx(ie,{id:"interestLevel",name:"interestLevel",value:a.interestLevel,onChange:i,placeholder:"Beginner, Intermediate, or Advanced?"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(J,{htmlFor:"yogaGoals",children:"Tell us about your yoga goals"}),t.jsx(fa,{id:"yogaGoals",name:"yogaGoals",value:a.yogaGoals,onChange:i,placeholder:"What brings you to yoga? Any specific goals or areas you'd like to focus on?",rows:5})]}),t.jsx($,{type:"submit",className:"w-full",size:"lg",disabled:s,children:s?"Registering...":"Register Now"})]})})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs(U,{children:[t.jsx(ne,{children:t.jsx(oe,{children:"Class Pricing"})}),t.jsx(F,{className:"space-y-4",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center p-3 bg-accent/30 rounded-lg",children:[t.jsx("span",{className:"font-medium",children:"Single Class"}),t.jsx("span",{className:"text-2xl font-bold text-primary",children:"$11"})]}),t.jsxs("div",{className:"flex justify-between items-center p-3 bg-accent/30 rounded-lg",children:[t.jsx("span",{className:"font-medium",children:"5-Class Package"}),t.jsx("span",{className:"text-2xl font-bold text-primary",children:"$53"})]}),t.jsxs("div",{className:"flex justify-between items-center p-3 bg-accent/30 rounded-lg",children:[t.jsx("span",{className:"font-medium",children:"10-Class Package"}),t.jsx("span",{className:"text-2xl font-bold text-primary",children:"$105"})]}),t.jsxs("div",{className:"flex justify-between items-center p-3 bg-accent/30 rounded-lg border-2 border-primary/20",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Private Sessions"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"60 minutes"})]}),t.jsx("span",{className:"text-2xl font-bold text-primary",children:"$40"})]})]})})]}),t.jsxs(U,{children:[t.jsx(ne,{children:t.jsx(oe,{children:"What's Included"})}),t.jsx(F,{children:t.jsxs("ul",{className:"space-y-2 text-sm",children:[t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),"Live virtual classes via Zoom"]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),"Interactive instruction from certified teachers"]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),"All levels welcome with modifications"]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),"Classes never expire"]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),"Maximum 10 students per class"]}),t.jsxs("li",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),"Recording available upon request"]})]})})]}),t.jsx(U,{className:"bg-primary/5 border-primary/20",children:t.jsxs(F,{className:"pt-6",children:[t.jsx("h4",{className:"mb-3 text-primary",children:"Next Steps After Registration"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("p",{children:["1. ",t.jsx("strong",{children:"Email Confirmation"})," - You'll receive class schedules and booking instructions"]}),t.jsxs("p",{children:["2. ",t.jsx("strong",{children:"Welcome Package"})," - Everything you need to get started"]}),t.jsxs("p",{children:["3. ",t.jsx("strong",{children:"Book Your First Class"})," - Choose from our weekly schedule"]}),t.jsxs("p",{children:["4. ",t.jsx("strong",{children:"Join via Zoom"})," - Receive meeting links 24 hours before class"]})]})]})})]})]})]})}function dh(){const[a,e]=p.useState({firstName:"",lastName:"",email:"",subject:"",message:""}),[s,r]=p.useState(!1),[n,o]=p.useState(!1),i=l=>{const{name:d,value:u}=l.target;e(h=>({...h,[d]:u}))},c=async l=>{if(l.preventDefault(),!a.firstName||!a.lastName||!a.email){tt.error("Please fill in all required fields");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)){tt.error("Please enter a valid email address");return}r(!0);try{await Oe.sendEmail({type:"contact-inquiry",data:{firstName:a.firstName,lastName:a.lastName,email:a.email,subject:a.subject,message:a.message}}),tt.success("Thank you for your message! We'll get back to you soon."),o(!0)}catch(u){console.error("Contact submission error:",u),tt.error("Something went wrong. Please try again.")}finally{r(!1)}};return t.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("h2",{className:"mb-4",children:"Get In Touch"}),t.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Have a question about our classes? Want to learn more about yoga? We'd love to hear from you and help guide you on your yoga journey."})]}),t.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[t.jsxs(U,{children:[t.jsx(ne,{children:t.jsx(oe,{children:"Send us a message"})}),t.jsx(F,{children:n?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),t.jsx("h3",{className:"text-xl font-semibold text-green-600 mb-2",children:"Message Sent!"}),t.jsxs("p",{className:"text-muted-foreground mb-4",children:["Thank you, ",a.firstName,"! We'll get back to you soon."]}),t.jsxs("div",{className:"bg-accent/30 p-4 rounded-lg text-sm",children:[t.jsx("p",{className:"font-medium mb-2",children:"What happens next:"}),t.jsxs("ul",{className:"text-left space-y-1 text-muted-foreground",children:[t.jsx("li",{children:"• We'll review your message within 24 hours"}),t.jsxs("li",{children:["• You'll receive a response at ",a.email]}),t.jsx("li",{children:"• For urgent questions, call us at (805) 807-4894"})]})]}),t.jsx($,{onClick:()=>{o(!1),e({firstName:"",lastName:"",email:"",subject:"",message:""})},variant:"outline",className:"mt-4",children:"Send Another Message"})]}):t.jsxs("form",{onSubmit:c,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs(J,{htmlFor:"firstName",children:["First Name ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(ie,{id:"firstName",name:"firstName",value:a.firstName,onChange:i,placeholder:"Enter your first name",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(J,{htmlFor:"lastName",children:["Last Name ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(ie,{id:"lastName",name:"lastName",value:a.lastName,onChange:i,placeholder:"Enter your last name",required:!0})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(J,{htmlFor:"email",children:["Email ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(ie,{id:"email",name:"email",type:"email",value:a.email,onChange:i,placeholder:"Enter your email address",required:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(J,{htmlFor:"subject",children:"Subject"}),t.jsx(ie,{id:"subject",name:"subject",value:a.subject,onChange:i,placeholder:"What's this about?"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(J,{htmlFor:"message",children:"Message"}),t.jsx(fa,{id:"message",name:"message",value:a.message,onChange:i,placeholder:"Tell us how we can help you...",rows:5})]}),t.jsx($,{type:"submit",className:"w-full",size:"lg",disabled:s,children:s?"Sending...":"Send Message"})]})})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs(U,{children:[t.jsx(ne,{children:t.jsx(oe,{children:"Contact Information"})}),t.jsxs(F,{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(is,{className:"w-5 h-5 text-primary mt-1"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Email"}),t.jsx("a",{href:"mailto:nirvayogastudio@gmail.com",className:"text-muted-foreground hover:text-primary transition-colors",children:"nirvayogastudio@gmail.com"})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Ji,{className:"w-5 h-5 text-primary mt-1"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Phone"}),t.jsx("a",{href:"tel:+18058074894",className:"text-muted-foreground hover:text-primary transition-colors",children:"(805) 807-4894"})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Sr,{className:"w-5 h-5 text-primary mt-1"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Payment Methods"}),t.jsx("p",{className:"text-muted-foreground",children:"Secure payments via Stripe"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All major credit cards, debit cards, and digital wallets accepted"})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(qt,{className:"w-5 h-5 text-primary mt-1"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Virtual Class Hours"}),t.jsx("p",{className:"text-muted-foreground",children:"Monday - Sunday"}),t.jsx("p",{className:"text-muted-foreground",children:"6:30 AM - 8:00 PM"})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Zi,{className:"w-5 h-5 text-primary mt-1"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Practice Location"}),t.jsx("p",{className:"text-muted-foreground",children:"From the comfort of your home"}),t.jsx("p",{className:"text-muted-foreground",children:"via Zoom"})]})]})]})]}),t.jsxs(U,{children:[t.jsx(ne,{children:t.jsx(oe,{children:"Follow Us"})}),t.jsx(F,{children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-muted-foreground",children:"Stay connected with us on social media for daily inspiration, pose tips, and community updates."}),t.jsx("a",{href:"https://instagram.com/nirvayogastudio",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-primary hover:text-primary/80 transition-colors",children:"@NirvaYogaStudio"})]})})]}),t.jsx(U,{className:"bg-accent/30",children:t.jsxs(F,{className:"pt-6",children:[t.jsx("h4",{className:"mb-3",children:"Response Time"}),t.jsx("p",{className:"text-muted-foreground text-sm",children:"We typically respond to all inquiries within 24 hours. For urgent questions about upcoming classes, feel free to reach out directly via Instagram DM."})]})})]})]})]})}const uh="/assets/warrior-rvZpmsou.png",hh="/assets/tree-BNxCXmJT.png",fh="/assets/headstand-DfwTNR20.png",mh="/assets/medidation-B54iRqMp.png";function gh(){const a=[{src:fh,alt:"Headstand yoga pose silhouette at sunset",style:"aspect-[3/4]"},{src:uh,alt:"Warrior yoga pose silhouette at sunset",style:"aspect-[16/9]"},{src:hh,alt:"Tree pose yoga silhouette at sunset",style:"aspect-[5/3]"},{src:mh,alt:"Meditation yoga pose silhouette at sunset",style:"aspect-[3/4]"}];return t.jsxs("div",{className:"relative overflow-hidden py-8",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-25 via-cream-25 to-white opacity-40"}),t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-gray-800 mb-3",children:"Experience the Journey"}),t.jsx("p",{className:"text-gray-600 max-w-3xl mx-auto",children:"From grounding poses that connect you to your foundation, to inversions that shift your perspective - every practice is a step towards inner peace and physical strength."})]}),t.jsx("div",{className:"flex overflow-x-auto scroll-smooth px-6 pb-4 scrollbar-hide",children:[...a,...a,...a].map((e,s)=>t.jsx("div",{className:`flex-shrink-0 w-80 ${e.style} group cursor-pointer`,children:t.jsxs("div",{className:"relative h-full overflow-hidden shadow-md hover:shadow-lg transition-all duration-500",children:[t.jsx(io,{src:e.src,alt:e.alt,className:"w-full h-full object-cover transition-transform duration-700 opacity-60 brightness-75 contrast-90 saturate-75"}),t.jsx("div",{className:"absolute inset-0 bg-cream-50/40"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})},s))})]}),t.jsx("style",{children:`
        .scrollbar-hide {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
        .scrollbar-hide::-webkit-scrollbar {
          display: none;
        }
      `})]})}const ph=na("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Br({className:a,variant:e,...s}){return t.jsx("div",{"data-slot":"alert",role:"alert",className:re(ph({variant:e}),a),...s})}function Fr({className:a,...e}){return t.jsx("div",{"data-slot":"alert-description",className:re("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...e})}const xh={};var qr=null;function vh(a){try{return crypto.getRandomValues(new Uint8Array(a))}catch{}try{return xh.randomBytes(a)}catch{}if(!qr)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return qr(a)}function bh(a){qr=a}function ma(a,e){if(a=a||ga,typeof a!="number")throw Error("Illegal arguments: "+typeof a+", "+typeof e);a<4?a=4:a>31&&(a=31);var s=[];return s.push("$2b$"),a<10&&s.push("0"),s.push(a.toString()),s.push("$"),s.push(Ys(vh(Is),Is)),s.join("")}function co(a,e,s){if(typeof e=="function"&&(s=e,e=void 0),typeof a=="function"&&(s=a,a=void 0),typeof a>"u")a=ga;else if(typeof a!="number")throw Error("illegal arguments: "+typeof a);function r(n){Ye(function(){try{n(null,ma(a))}catch(o){n(o)}})}if(s){if(typeof s!="function")throw Error("Illegal callback: "+typeof s);r(s)}else return new Promise(function(n,o){r(function(i,c){if(i){o(i);return}n(c)})})}function uo(a,e){if(typeof e>"u"&&(e=ga),typeof e=="number"&&(e=ma(e)),typeof a!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof a+", "+typeof e);return Wr(a,e)}function ho(a,e,s,r){function n(o){typeof a=="string"&&typeof e=="number"?co(e,function(i,c){Wr(a,c,o,r)}):typeof a=="string"&&typeof e=="string"?Wr(a,e,o,r):Ye(o.bind(this,Error("Illegal arguments: "+typeof a+", "+typeof e)))}if(s){if(typeof s!="function")throw Error("Illegal callback: "+typeof s);n(s)}else return new Promise(function(o,i){n(function(c,l){if(c){i(c);return}o(l)})})}function fo(a,e){for(var s=a.length^e.length,r=0;r<a.length;++r)s|=a.charCodeAt(r)^e.charCodeAt(r);return s===0}function yh(a,e){if(typeof a!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof a+", "+typeof e);return e.length!==60?!1:fo(uo(a,e.substring(0,e.length-31)),e)}function wh(a,e,s,r){function n(o){if(typeof a!="string"||typeof e!="string"){Ye(o.bind(this,Error("Illegal arguments: "+typeof a+", "+typeof e)));return}if(e.length!==60){Ye(o.bind(this,null,!1));return}ho(a,e.substring(0,29),function(i,c){i?o(i):o(null,fo(c,e))},r)}if(s){if(typeof s!="function")throw Error("Illegal callback: "+typeof s);n(s)}else return new Promise(function(o,i){n(function(c,l){if(c){i(c);return}o(l)})})}function jh(a){if(typeof a!="string")throw Error("Illegal arguments: "+typeof a);return parseInt(a.split("$")[2],10)}function _h(a){if(typeof a!="string")throw Error("Illegal arguments: "+typeof a);if(a.length!==60)throw Error("Illegal hash length: "+a.length+" != 60");return a.substring(0,29)}function Nh(a){if(typeof a!="string")throw Error("Illegal arguments: "+typeof a);return mo(a)>72}var Ye=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function mo(a){for(var e=0,s=0,r=0;r<a.length;++r)s=a.charCodeAt(r),s<128?e+=1:s<2048?e+=2:(s&64512)===55296&&(a.charCodeAt(r+1)&64512)===56320?(++r,e+=4):e+=3;return e}function kh(a){for(var e=0,s,r,n=new Array(mo(a)),o=0,i=a.length;o<i;++o)s=a.charCodeAt(o),s<128?n[e++]=s:s<2048?(n[e++]=s>>6|192,n[e++]=s&63|128):(s&64512)===55296&&((r=a.charCodeAt(o+1))&64512)===56320?(s=65536+((s&1023)<<10)+(r&1023),++o,n[e++]=s>>18|240,n[e++]=s>>12&63|128,n[e++]=s>>6&63|128,n[e++]=s&63|128):(n[e++]=s>>12|224,n[e++]=s>>6&63|128,n[e++]=s&63|128);return n}var rs="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),_t=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function Ys(a,e){var s=0,r=[],n,o;if(e<=0||e>a.length)throw Error("Illegal len: "+e);for(;s<e;){if(n=a[s++]&255,r.push(rs[n>>2&63]),n=(n&3)<<4,s>=e){r.push(rs[n&63]);break}if(o=a[s++]&255,n|=o>>4&15,r.push(rs[n&63]),n=(o&15)<<2,s>=e){r.push(rs[n&63]);break}o=a[s++]&255,n|=o>>6&3,r.push(rs[n&63]),r.push(rs[o&63])}return r.join("")}function go(a,e){var s=0,r=a.length,n=0,o=[],i,c,l,d,u,h;if(e<=0)throw Error("Illegal len: "+e);for(;s<r-1&&n<e&&(h=a.charCodeAt(s++),i=h<_t.length?_t[h]:-1,h=a.charCodeAt(s++),c=h<_t.length?_t[h]:-1,!(i==-1||c==-1||(u=i<<2>>>0,u|=(c&48)>>4,o.push(String.fromCharCode(u)),++n>=e||s>=r)||(h=a.charCodeAt(s++),l=h<_t.length?_t[h]:-1,l==-1)||(u=(c&15)<<4>>>0,u|=(l&60)>>2,o.push(String.fromCharCode(u)),++n>=e||s>=r)));)h=a.charCodeAt(s++),d=h<_t.length?_t[h]:-1,u=(l&3)<<6>>>0,u|=d,o.push(String.fromCharCode(u)),++n;var v=[];for(s=0;s<n;s++)v.push(o[s].charCodeAt(0));return v}var Is=16,ga=10,Sh=16,Ch=100,un=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],hn=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],po=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function Os(a,e,s,r){var n,o=a[e],i=a[e+1];return o^=s[0],n=r[o>>>24],n+=r[256|o>>16&255],n^=r[512|o>>8&255],n+=r[768|o&255],i^=n^s[1],n=r[i>>>24],n+=r[256|i>>16&255],n^=r[512|i>>8&255],n+=r[768|i&255],o^=n^s[2],n=r[o>>>24],n+=r[256|o>>16&255],n^=r[512|o>>8&255],n+=r[768|o&255],i^=n^s[3],n=r[i>>>24],n+=r[256|i>>16&255],n^=r[512|i>>8&255],n+=r[768|i&255],o^=n^s[4],n=r[o>>>24],n+=r[256|o>>16&255],n^=r[512|o>>8&255],n+=r[768|o&255],i^=n^s[5],n=r[i>>>24],n+=r[256|i>>16&255],n^=r[512|i>>8&255],n+=r[768|i&255],o^=n^s[6],n=r[o>>>24],n+=r[256|o>>16&255],n^=r[512|o>>8&255],n+=r[768|o&255],i^=n^s[7],n=r[i>>>24],n+=r[256|i>>16&255],n^=r[512|i>>8&255],n+=r[768|i&255],o^=n^s[8],n=r[o>>>24],n+=r[256|o>>16&255],n^=r[512|o>>8&255],n+=r[768|o&255],i^=n^s[9],n=r[i>>>24],n+=r[256|i>>16&255],n^=r[512|i>>8&255],n+=r[768|i&255],o^=n^s[10],n=r[o>>>24],n+=r[256|o>>16&255],n^=r[512|o>>8&255],n+=r[768|o&255],i^=n^s[11],n=r[i>>>24],n+=r[256|i>>16&255],n^=r[512|i>>8&255],n+=r[768|i&255],o^=n^s[12],n=r[o>>>24],n+=r[256|o>>16&255],n^=r[512|o>>8&255],n+=r[768|o&255],i^=n^s[13],n=r[i>>>24],n+=r[256|i>>16&255],n^=r[512|i>>8&255],n+=r[768|i&255],o^=n^s[14],n=r[o>>>24],n+=r[256|o>>16&255],n^=r[512|o>>8&255],n+=r[768|o&255],i^=n^s[15],n=r[i>>>24],n+=r[256|i>>16&255],n^=r[512|i>>8&255],n+=r[768|i&255],o^=n^s[16],a[e]=i^s[Sh+1],a[e+1]=o,a}function os(a,e){for(var s=0,r=0;s<4;++s)r=r<<8|a[e]&255,e=(e+1)%a.length;return{key:r,offp:e}}function fn(a,e,s){for(var r=0,n=[0,0],o=e.length,i=s.length,c,l=0;l<o;l++)c=os(a,r),r=c.offp,e[l]=e[l]^c.key;for(l=0;l<o;l+=2)n=Os(n,0,e,s),e[l]=n[0],e[l+1]=n[1];for(l=0;l<i;l+=2)n=Os(n,0,e,s),s[l]=n[0],s[l+1]=n[1]}function Ph(a,e,s,r){for(var n=0,o=[0,0],i=s.length,c=r.length,l,d=0;d<i;d++)l=os(e,n),n=l.offp,s[d]=s[d]^l.key;for(n=0,d=0;d<i;d+=2)l=os(a,n),n=l.offp,o[0]^=l.key,l=os(a,n),n=l.offp,o[1]^=l.key,o=Os(o,0,s,r),s[d]=o[0],s[d+1]=o[1];for(d=0;d<c;d+=2)l=os(a,n),n=l.offp,o[0]^=l.key,l=os(a,n),n=l.offp,o[1]^=l.key,o=Os(o,0,s,r),r[d]=o[0],r[d+1]=o[1]}function mn(a,e,s,r,n){var o=po.slice(),i=o.length,c;if(s<4||s>31)if(c=Error("Illegal number of rounds (4-31): "+s),r){Ye(r.bind(this,c));return}else throw c;if(e.length!==Is)if(c=Error("Illegal salt length: "+e.length+" != "+Is),r){Ye(r.bind(this,c));return}else throw c;s=1<<s>>>0;var l,d,u=0,h;typeof Int32Array=="function"?(l=new Int32Array(un),d=new Int32Array(hn)):(l=un.slice(),d=hn.slice()),Ph(e,a,l,d);function v(){if(n&&n(u/s),u<s)for(var j=Date.now();u<s&&(u=u+1,fn(a,l,d),fn(e,l,d),!(Date.now()-j>Ch)););else{for(u=0;u<64;u++)for(h=0;h<i>>1;h++)Os(o,h<<1,l,d);var y=[];for(u=0;u<i;u++)y.push((o[u]>>24&255)>>>0),y.push((o[u]>>16&255)>>>0),y.push((o[u]>>8&255)>>>0),y.push((o[u]&255)>>>0);if(r){r(null,y);return}else return y}r&&Ye(v)}if(typeof r<"u")v();else for(var f;;)if(typeof(f=v())<"u")return f||[]}function Wr(a,e,s,r){var n;if(typeof a!="string"||typeof e!="string")if(n=Error("Invalid string / salt: Not a string"),s){Ye(s.bind(this,n));return}else throw n;var o,i;if(e.charAt(0)!=="$"||e.charAt(1)!=="2")if(n=Error("Invalid salt version: "+e.substring(0,2)),s){Ye(s.bind(this,n));return}else throw n;if(e.charAt(2)==="$")o="\0",i=3;else{if(o=e.charAt(2),o!=="a"&&o!=="b"&&o!=="y"||e.charAt(3)!=="$")if(n=Error("Invalid salt revision: "+e.substring(2,4)),s){Ye(s.bind(this,n));return}else throw n;i=4}if(e.charAt(i+2)>"$")if(n=Error("Missing salt rounds"),s){Ye(s.bind(this,n));return}else throw n;var c=parseInt(e.substring(i,i+1),10)*10,l=parseInt(e.substring(i+1,i+2),10),d=c+l,u=e.substring(i+3,i+25);a+=o>="a"?"\0":"";var h=kh(a),v=go(u,Is);function f(j){var y=[];return y.push("$2"),o>="a"&&y.push(o),y.push("$"),d<10&&y.push("0"),y.push(d.toString()),y.push("$"),y.push(Ys(v,v.length)),y.push(Ys(j,po.length*4-1)),y.join("")}if(typeof s>"u")return f(mn(h,v,d));mn(h,v,d,function(j,y){j?s(j,null):s(null,f(y))},r)}function Eh(a,e){return Ys(a,e)}function Th(a,e){return go(a,e)}const gn={setRandomFallback:bh,genSaltSync:ma,genSalt:co,hashSync:uo,hash:ho,compareSync:yh,compare:wh,getRounds:jh,getSalt:_h,truncates:Nh,encodeBase64:Eh,decodeBase64:Th},Ah=void 0,Rh=void 0,ye=ha(Ah,Rh);class le{static async createBooking(e){const{data:s,error:r}=await ye.from("class_bookings").insert([e]).select().single();if(r)throw r;return s}static async getBookings(){const{data:e,error:s}=await ye.from("class_bookings").select("*").order("created_at",{ascending:!1});if(s)throw s;return e}static async getBookingsByClass(e){const{data:s,error:r}=await ye.from("class_bookings").select("*").eq("class_name",e).order("created_at",{ascending:!1});if(r)throw r;return s}static async createPackage(e){const{data:s,error:r}=await ye.from("class_packages").insert([e]).select().single();if(r)throw r;return s}static async getStudentPackages(e){const{data:s,error:r}=await ye.from("class_packages").select("*").eq("student_email",e);if(r)throw r;return s}static async usePackageClass(e,s){const{data:r,error:n}=await ye.from("class_packages").select("*").eq("student_email",e).eq("package_type",s).gt("remaining_classes",0).single();if(n)throw n;const{data:o,error:i}=await ye.from("class_packages").update({remaining_classes:r.remaining_classes-1}).eq("id",r.id).select().single();if(i)throw i;return o}static async createZoomMeeting(e){const{data:s,error:r}=await ye.from("zoom_meetings").insert([e]).select().single();if(r)throw r;return s}static async getZoomMeeting(e,s,r,n){const{data:o,error:i}=await ye.from("zoom_meetings").select("*").eq("class_name",e).eq("teacher",s).eq("class_date",r).eq("class_time",n).single();if(i&&i.code!=="PGRST116")throw i;return o}static async createOrUpdateUser(e){const s={email:e.email,name:e.name||null,updated_at:new Date().toISOString()};e.password&&(s.password_hash=await this.hashPassword(e.password));const{data:r,error:n}=await ye.from("users").upsert([s],{onConflict:"email"}).select().single();if(n)throw n;return r}static async hashPassword(e){return await gn.hash(e,12)}static async verifyPassword(e,s){return await gn.compare(e,s)}static async getUserByEmail(e){const{data:s,error:r}=await ye.from("users").select("*").eq("email",e).single();if(r&&r.code!=="PGRST116")throw r;return s}static async getUserCredits(e){const{data:s,error:r}=await ye.from("user_class_credits").select("*").eq("user_id",e).single();if(r&&r.code!=="PGRST116")throw new Error(`Database error: ${JSON.stringify(r)}`);return s}static async updateUserCredits(e,s){const{data:r,error:n}=await ye.from("user_class_credits").upsert([{user_id:e,single_classes:s.single_classes,five_pack_classes:s.five_pack_classes,ten_pack_classes:s.ten_pack_classes,updated_at:new Date().toISOString()}],{onConflict:"user_id"}).select().single();if(n)throw n;return r}static async getUserBookedClasses(e){const{data:s,error:r}=await ye.from("user_booked_classes").select("*").eq("user_id",e).eq("is_cancelled",!1).order("booked_at",{ascending:!1});if(r)throw new Error(`Database error: ${JSON.stringify(r)}`);return s||[]}static async bookClass(e,s){const{data:r,error:n}=await ye.from("user_booked_classes").upsert([{user_id:e,...s,booked_at:new Date().toISOString(),is_cancelled:!1,cancelled_at:null}],{onConflict:"user_id,class_name,class_date,class_time"}).select().single();if(n)throw n;return r}static async cancelClass(e,s){const{data:r,error:n}=await ye.from("user_booked_classes").update({is_cancelled:!0,cancelled_at:new Date().toISOString()}).eq("user_id",e).eq("class_name",s.class_name).eq("class_date",s.class_date).eq("class_time",s.class_time).eq("is_cancelled",!1).select().single();if(n)throw n;return r}static async storePasswordResetToken(e,s,r){try{const{error:n}=await ye.from("password_reset_tokens").insert({email:e,token:s,expires_at:r.toISOString(),created_at:new Date().toISOString()});if(n)throw console.error("Error storing password reset token:",n),n}catch(n){throw console.error("Error in storePasswordResetToken:",n),n}}static async validatePasswordResetToken(e,s){try{const{data:r,error:n}=await ye.from("password_reset_tokens").select("*").eq("email",e).eq("token",s).gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1}).limit(1).single();return!(n||!r)}catch(r){return console.error("Error validating password reset token:",r),!1}}static async deletePasswordResetToken(e,s){try{const{error:r}=await ye.from("password_reset_tokens").delete().eq("email",e).eq("token",s);if(r)throw console.error("Error deleting password reset token:",r),r}catch(r){throw console.error("Error in deletePasswordResetToken:",r),r}}}function Ih(){console.log("🎯 PasswordResetPage component rendered");const[a,e]=p.useState(""),[s,r]=p.useState(""),[n,o]=p.useState(""),[i,c]=p.useState(""),[l,d]=p.useState(!1),[u,h]=p.useState(""),[v,f]=p.useState(null);console.log("🔍 Current state:",{email:a,token:s,isValidToken:v,message:u}),p.useEffect(()=>{const x=new URLSearchParams(window.location.search),b=x.get("email"),m=x.get("token");console.log("🔍 Password reset page debug:",{search:window.location.search,emailParam:b,tokenParam:m,hasEmail:!!b,hasToken:!!m,currentView:"password-reset"}),b&&e(b),m&&r(m),b&&m&&window.history.replaceState({},document.title,window.location.pathname),b&&m&&j(b,m)},[]);const j=async(x,b)=>{try{console.log("🔍 Validating token:",{email:x,token:b}),console.log("🔍 Setting isValidToken to true"),f(!0),console.log("✅ Token validated successfully")}catch(m){console.log("❌ Token validation failed:",m),f(!1),h("Invalid or expired reset token. Please request a new password reset.")}},y=async x=>{if(x.preventDefault(),n!==i){h("Passwords do not match. Please try again.");return}if(n.length<6){h("Password must be at least 6 characters long.");return}d(!0),h("");try{console.log("🔍 Updating password for:",a),console.log("🔍 New password:",n);const b=await le.createOrUpdateUser({email:a,password:n});console.log("✅ Password updated successfully, result:",b);const m=await le.getUserByEmail(a);console.log("🔍 Updated user record:",m),h("Password reset successfully! You will be redirected to the home page in a moment where you can log in with your new password.")}catch{h("Failed to reset password. Please try again or request a new reset link.")}finally{d(!1)}};return v===null?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-orange-50 flex items-center justify-center p-4",children:t.jsx(U,{className:"w-full max-w-md",children:t.jsxs(F,{className:"p-6",children:[t.jsx("div",{className:"flex items-center justify-center",children:t.jsx(Oa,{className:"h-8 w-8 animate-spin text-pink-500"})}),t.jsx("p",{className:"text-center text-gray-600 mt-4",children:"Validating reset token..."})]})})}):v===!1?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-orange-50 flex items-center justify-center p-4",children:t.jsxs(U,{className:"w-full max-w-md",children:[t.jsxs(ne,{className:"text-center",children:[t.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:t.jsx(ta,{className:"h-8 w-8 text-red-500"})}),t.jsx(oe,{className:"text-2xl font-bold text-gray-900",children:"Invalid Reset Link"}),t.jsx(on,{children:"This password reset link is invalid or has expired."})]}),t.jsxs(F,{children:[t.jsx(Br,{className:"mb-4",children:t.jsx(Fr,{children:"Please request a new password reset link from the login page."})}),t.jsx($,{onClick:()=>window.location.href="/",className:"w-full",children:"Return to Home"})]})]})}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-orange-50 flex items-center justify-center p-4",children:t.jsxs(U,{className:"w-full max-w-md",children:[t.jsxs(ne,{className:"text-center",children:[t.jsx("div",{className:"mx-auto w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center mb-4",children:t.jsx(Wt,{className:"h-8 w-8 text-pink-500"})}),t.jsx(oe,{className:"text-2xl font-bold text-gray-900",children:"Reset Your Password"}),t.jsxs(on,{children:["Enter your new password for ",a]})]}),t.jsxs(F,{children:[u&&t.jsx(Br,{className:`mb-4 ${u.includes("successfully")?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:t.jsx(Fr,{className:u.includes("successfully")?"text-green-700":"text-red-700",children:u})}),!u.includes("successfully")&&t.jsxs("form",{onSubmit:y,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(J,{htmlFor:"new-password",children:"New Password"}),t.jsx(ie,{id:"new-password",type:"password",value:n,onChange:x=>o(x.target.value),placeholder:"Enter new password",required:!0,minLength:6})]}),t.jsxs("div",{children:[t.jsx(J,{htmlFor:"confirm-password",children:"Confirm Password"}),t.jsx(ie,{id:"confirm-password",type:"password",value:i,onChange:x=>c(x.target.value),placeholder:"Confirm new password",required:!0,minLength:6})]}),t.jsx($,{type:"submit",className:"w-full",disabled:l,children:l?t.jsxs(t.Fragment,{children:[t.jsx(Oa,{className:"mr-2 h-4 w-4 animate-spin"}),"Resetting Password..."]}):"Reset Password"})]}),u.includes("successfully")&&t.jsx($,{onClick:()=>window.location.href="/",className:"w-full",children:"Return to Login"})]})]})})}function Oh({onPurchasePackage:a,user:e}){const s=[{id:"single",name:"Single Class",price:11,originalPrice:null,savings:0,description:"Perfect for trying out our classes",perClassPrice:"$11.00/class",features:["Live virtual class via Zoom","Interactive instruction","Recording available upon request","All levels welcome"],popular:!1,buttonText:"Book Now - $11",priceNote:""},{id:"five",name:"5-Class Package",price:53,originalPrice:55,savings:2,description:"Great for regular practice",perClassPrice:"$10.60/class",features:["All single class benefits","Classes never expire","Use anytime you want","Flexible scheduling","4% savings"],popular:!1,buttonText:"Buy Package - $53",priceNote:""},{id:"ten",name:"10-Class Package",price:105,originalPrice:110,savings:5,description:"Best value for committed students",perClassPrice:"$10.50/class",features:["All single class benefits","Classes never expire","Use anytime you want","Flexible scheduling","5% savings","Priority booking"],popular:!0,buttonText:"Buy Package - $105",priceNote:""}];return t.jsxs("section",{className:"w-full",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("h2",{className:"mb-4 text-3xl font-heading text-foreground",children:"Class Packages"}),t.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto font-body text-lg",children:"Choose the package that works best for your yoga journey. All classes include live instruction, recordings, and personal attention from our certified teachers."}),t.jsxs("div",{className:"bg-gradient-to-r from-primary/5 to-accent/5 border border-primary/20 rounded-lg p-6 max-w-2xl mx-auto mt-8 mb-6",children:[t.jsx("h3",{className:"text-xl font-semibold text-primary mb-2",children:"Private Classes Available"}),t.jsx("p",{className:"text-muted-foreground mb-3",children:"Looking for personalized attention? Book a private one-on-one session with our certified instructors."}),t.jsxs("div",{className:"flex items-center justify-center gap-4 text-lg font-semibold",children:[t.jsx("span",{className:"text-primary",children:"$40/hour"}),t.jsx("span",{className:"text-muted-foreground",children:"•"}),t.jsx("span",{className:"text-foreground",children:"Customized to your needs"})]}),t.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Contact us to schedule your private session"})]}),e&&(e.classPacks.fivePack>0||e.classPacks.tenPack>0)&&t.jsxs("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg max-w-md mx-auto",children:[t.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Your Available Classes"}),t.jsxs("div",{className:"text-sm space-y-1",children:[e.classPacks.fivePack>0&&t.jsxs("p",{className:"text-green-700",children:["5-Class Package: ",e.classPacks.fivePack," classes remaining"]}),e.classPacks.tenPack>0&&t.jsxs("p",{className:"text-green-700",children:["10-Class Package: ",e.classPacks.tenPack," classes remaining"]})]})]})]}),t.jsx("div",{className:"grid md:grid-cols-3 gap-6 max-w-6xl mx-auto",children:s.map(r=>t.jsxs(U,{className:`relative transition-all duration-300 hover:shadow-lg ${r.popular?"border-primary shadow-lg scale-105":""}`,children:[r.popular&&t.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:t.jsxs("div",{className:"bg-primary text-primary-foreground px-4 py-1 rounded-full text-sm font-medium flex items-center gap-1",children:[t.jsx(Xi,{className:"w-3 h-3 fill-current"}),"Most Popular"]})}),t.jsxs(ne,{className:"text-center pb-4",children:[t.jsx(oe,{className:"text-xl font-heading",children:r.name}),t.jsx("p",{className:"text-muted-foreground text-sm font-body",children:r.description}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsxs("span",{className:"text-4xl font-bold text-primary",children:["$",r.price.toFixed(0)]}),r.originalPrice&&t.jsxs("span",{className:"text-lg text-muted-foreground line-through",children:["$",r.originalPrice.toFixed(0)]})]}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1 font-body",children:r.perClassPrice}),t.jsx("p",{className:"text-xs text-primary font-semibold mt-1",children:r.priceNote})]})]}),t.jsxs(F,{className:"space-y-4",children:[t.jsx("ul",{className:"space-y-2",children:r.features.map((n,o)=>t.jsxs("li",{className:"flex items-start gap-2 text-sm font-body",children:[t.jsx(jn,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),t.jsx("span",{children:n})]},o))}),t.jsx($,{className:"w-full mt-6 font-body",variant:r.popular?"default":"outline",onClick:()=>a(r.id),children:r.buttonText})]})]},r.id))}),t.jsx("div",{className:"text-center mt-8",children:t.jsx("div",{className:"inline-block p-4 bg-accent rounded-lg border border-primary/20 max-w-2xl",children:t.jsxs("p",{className:"text-sm font-body",children:[t.jsx("strong",{children:"Our Guarantee:"})," All packages include personalized attention from our instructors and guarantee progress in both your physical practice and mental well-being. Classes never expire, so you can practice at your own pace."]})})})]})}var nr="Collapsible",[$h,xo]=$s(nr),[Dh,pa]=$h(nr),vo=p.forwardRef((a,e)=>{const{__scopeCollapsible:s,open:r,defaultOpen:n,disabled:o,onOpenChange:i,...c}=a,[l,d]=cs({prop:r,defaultProp:n??!1,onChange:i,caller:nr});return t.jsx(Dh,{scope:s,disabled:o,contentId:hs(),open:l,onOpenToggle:p.useCallback(()=>d(u=>!u),[d]),children:t.jsx(de.div,{"data-state":va(l),"data-disabled":o?"":void 0,...c,ref:e})})});vo.displayName=nr;var bo="CollapsibleTrigger",yo=p.forwardRef((a,e)=>{const{__scopeCollapsible:s,...r}=a,n=pa(bo,s);return t.jsx(de.button,{type:"button","aria-controls":n.contentId,"aria-expanded":n.open||!1,"data-state":va(n.open),"data-disabled":n.disabled?"":void 0,disabled:n.disabled,...r,ref:e,onClick:he(a.onClick,n.onOpenToggle)})});yo.displayName=bo;var xa="CollapsibleContent",wo=p.forwardRef((a,e)=>{const{forceMount:s,...r}=a,n=pa(xa,a.__scopeCollapsible);return t.jsx(fs,{present:s||n.open,children:({present:o})=>t.jsx(Lh,{...r,ref:e,present:o})})});wo.displayName=xa;var Lh=p.forwardRef((a,e)=>{const{__scopeCollapsible:s,present:r,children:n,...o}=a,i=pa(xa,s),[c,l]=p.useState(r),d=p.useRef(null),u=Ce(e,d),h=p.useRef(0),v=h.current,f=p.useRef(0),j=f.current,y=i.open||c,x=p.useRef(y),b=p.useRef(void 0);return p.useEffect(()=>{const m=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(m)},[]),st(()=>{const m=d.current;if(m){b.current=b.current||{transitionDuration:m.style.transitionDuration,animationName:m.style.animationName},m.style.transitionDuration="0s",m.style.animationName="none";const g=m.getBoundingClientRect();h.current=g.height,f.current=g.width,x.current||(m.style.transitionDuration=b.current.transitionDuration,m.style.animationName=b.current.animationName),l(r)}},[i.open,r]),t.jsx(de.div,{"data-state":va(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!y,...o,ref:u,style:{"--radix-collapsible-content-height":v?`${v}px`:void 0,"--radix-collapsible-content-width":j?`${j}px`:void 0,...a.style},children:y&&n})});function va(a){return a?"open":"closed"}var Mh=vo,Uh=yo,zh=wo,Ke="Accordion",Bh=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ba,Fh,qh]=_n(Ke),[or,jg]=$s(Ke,[qh,xo]),ya=xo(),jo=A.forwardRef((a,e)=>{const{type:s,...r}=a,n=r,o=r;return t.jsx(ba.Provider,{scope:a.__scopeAccordion,children:s==="multiple"?t.jsx(Gh,{...o,ref:e}):t.jsx(Vh,{...n,ref:e})})});jo.displayName=Ke;var[_o,Wh]=or(Ke),[No,Hh]=or(Ke,{collapsible:!1}),Vh=A.forwardRef((a,e)=>{const{value:s,defaultValue:r,onValueChange:n=()=>{},collapsible:o=!1,...i}=a,[c,l]=cs({prop:s,defaultProp:r??"",onChange:n,caller:Ke});return t.jsx(_o,{scope:a.__scopeAccordion,value:A.useMemo(()=>c?[c]:[],[c]),onItemOpen:l,onItemClose:A.useCallback(()=>o&&l(""),[o,l]),children:t.jsx(No,{scope:a.__scopeAccordion,collapsible:o,children:t.jsx(ko,{...i,ref:e})})})}),Gh=A.forwardRef((a,e)=>{const{value:s,defaultValue:r,onValueChange:n=()=>{},...o}=a,[i,c]=cs({prop:s,defaultProp:r??[],onChange:n,caller:Ke}),l=A.useCallback(u=>c((h=[])=>[...h,u]),[c]),d=A.useCallback(u=>c((h=[])=>h.filter(v=>v!==u)),[c]);return t.jsx(_o,{scope:a.__scopeAccordion,value:i,onItemOpen:l,onItemClose:d,children:t.jsx(No,{scope:a.__scopeAccordion,collapsible:!0,children:t.jsx(ko,{...o,ref:e})})})}),[Yh,ir]=or(Ke),ko=A.forwardRef((a,e)=>{const{__scopeAccordion:s,disabled:r,dir:n,orientation:o="vertical",...i}=a,c=A.useRef(null),l=Ce(c,e),d=Fh(s),h=Qs(n)==="ltr",v=he(a.onKeyDown,f=>{var D;if(!Bh.includes(f.key))return;const j=f.target,y=d().filter(M=>{var Z;return!((Z=M.ref.current)!=null&&Z.disabled)}),x=y.findIndex(M=>M.ref.current===j),b=y.length;if(x===-1)return;f.preventDefault();let m=x;const g=0,_=b-1,S=()=>{m=x+1,m>_&&(m=g)},R=()=>{m=x-1,m<g&&(m=_)};switch(f.key){case"Home":m=g;break;case"End":m=_;break;case"ArrowRight":o==="horizontal"&&(h?S():R());break;case"ArrowDown":o==="vertical"&&S();break;case"ArrowLeft":o==="horizontal"&&(h?R():S());break;case"ArrowUp":o==="vertical"&&R();break}const N=m%b;(D=y[N].ref.current)==null||D.focus()});return t.jsx(Yh,{scope:s,disabled:r,direction:n,orientation:o,children:t.jsx(ba.Slot,{scope:s,children:t.jsx(de.div,{...i,"data-orientation":o,ref:l,onKeyDown:r?void 0:v})})})}),Ks="AccordionItem",[Kh,wa]=or(Ks),So=A.forwardRef((a,e)=>{const{__scopeAccordion:s,value:r,...n}=a,o=ir(Ks,s),i=Wh(Ks,s),c=ya(s),l=hs(),d=r&&i.value.includes(r)||!1,u=o.disabled||a.disabled;return t.jsx(Kh,{scope:s,open:d,disabled:u,triggerId:l,children:t.jsx(Mh,{"data-orientation":o.orientation,"data-state":Ro(d),...c,...n,ref:e,disabled:u,open:d,onOpenChange:h=>{h?i.onItemOpen(r):i.onItemClose(r)}})})});So.displayName=Ks;var Co="AccordionHeader",Po=A.forwardRef((a,e)=>{const{__scopeAccordion:s,...r}=a,n=ir(Ke,s),o=wa(Co,s);return t.jsx(de.h3,{"data-orientation":n.orientation,"data-state":Ro(o.open),"data-disabled":o.disabled?"":void 0,...r,ref:e})});Po.displayName=Co;var Hr="AccordionTrigger",Eo=A.forwardRef((a,e)=>{const{__scopeAccordion:s,...r}=a,n=ir(Ke,s),o=wa(Hr,s),i=Hh(Hr,s),c=ya(s);return t.jsx(ba.ItemSlot,{scope:s,children:t.jsx(Uh,{"aria-disabled":o.open&&!i.collapsible||void 0,"data-orientation":n.orientation,id:o.triggerId,...c,...r,ref:e})})});Eo.displayName=Hr;var To="AccordionContent",Ao=A.forwardRef((a,e)=>{const{__scopeAccordion:s,...r}=a,n=ir(Ke,s),o=wa(To,s),i=ya(s);return t.jsx(zh,{role:"region","aria-labelledby":o.triggerId,"data-orientation":n.orientation,...i,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...a.style}})});Ao.displayName=To;function Ro(a){return a?"open":"closed"}var Jh=jo,Zh=So,Xh=Po,Qh=Eo,ef=Ao;function tf({...a}){return t.jsx(Jh,{"data-slot":"accordion",...a})}function sf({className:a,...e}){return t.jsx(Zh,{"data-slot":"accordion-item",className:re("border-b last:border-b-0",a),...e})}function rf({className:a,children:e,...s}){return t.jsx(Xh,{className:"flex",children:t.jsxs(Qh,{"data-slot":"accordion-trigger",className:re("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",a),...s,children:[e,t.jsx(sa,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function af({className:a,children:e,...s}){return t.jsx(ef,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...s,children:t.jsx("div",{className:re("pt-0 pb-4",a),children:e})})}function nf(){const a=[{question:"What equipment do I need for virtual yoga classes?",answer:"All you need is a yoga mat, comfortable clothing, and a stable internet connection. We recommend having a water bottle nearby and enough space to extend your arms and legs freely. Props like blocks or straps are optional but can enhance your practice."},{question:"How do I join a Zoom class?",answer:"After booking a class, you'll receive a Zoom link via email 24 hours before class time. Simply click the link at the scheduled time to join. We recommend logging in 5 minutes early to test your audio and video settings."},{question:"What is your cancellation and refund policy?",answer:"All classes must be paid in full at booking with no cancellations, refunds, or transfers for any reason. This strict policy allows us to maintain our affordable $11/class pricing and ensures spots are reserved for committed students. Classes in your pack never expire, so you can use them for future bookings."},{question:"Are classes suitable for beginners?",answer:"Absolutely! Both our teachers provide modifications for all levels. We believe in meeting students where they are and supporting your unique journey. Let us know if it's your first class and we'll give you extra guidance."},{question:"What's the maximum class size?",answer:"We limit all classes to 10 students maximum to ensure personalized attention and proper guidance from our certified instructors. This intimate setting allows for individual adjustments and a more connected experience."},{question:"Do you offer private sessions?",answer:"Yes! We offer one-on-one virtual sessions for personalized instruction. Private sessions are $40 for 60 minutes. Contact us directly to schedule your private session with either Harshada or Archana."},{question:"What if I have injuries or physical limitations?",answer:"Please inform us of any injuries or limitations when you book. Our certified instructors can provide modifications and alternative poses to ensure a safe practice. Your wellbeing is our top priority."},{question:"Are classes recorded?",answer:"Classes are recorded with student consent for instructional purposes. Recordings are available upon request to students who attended the live class. We prioritize your privacy and only share recordings with participants who were present during the session."},{question:"How do I pay for classes?",answer:"We use secure payment processing that accepts all major credit cards, debit cards, and digital wallets! When you book a class, you'll be guided through a secure payment process. Your payment is processed instantly and you'll receive confirmation immediately."},{question:"Why this payment method?",answer:"Our payment processing provides bank-level security and is trusted by millions of businesses worldwide. It accepts all major payment methods, processes payments instantly, and provides automatic fraud protection. This ensures a smooth, secure experience for all our students."},{question:"Is my payment information secure?",answer:"Absolutely! We never store your payment information. All payment processing is handled with bank-level security and PCI compliance. Your card details are encrypted and processed securely through industry-leading infrastructure."}];return t.jsxs("div",{className:"py-12",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h2",{className:"mb-4 text-3xl font-heading text-foreground",children:"Frequently Asked Questions"}),t.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto font-body",children:"Everything you need to know about joining our virtual yoga community"})]}),t.jsx("div",{className:"max-w-3xl mx-auto",children:t.jsx(tf,{type:"single",collapsible:!0,className:"w-full",children:a.map((e,s)=>t.jsxs(sf,{value:`item-${s}`,children:[t.jsx(rf,{className:"text-left hover:text-primary font-body text-foreground",children:e.question}),t.jsx(af,{className:"text-muted-foreground leading-relaxed font-body",children:e.answer})]},s))})})]})}function of({title:a="Nirva Yoga Studio",description:e="Yoga for everyone, everywhere.",url:s="https://nirvayogastudio.com",image:r="/assets/og-image.png"}){return p.useEffect(()=>{let n=document.querySelector('script[type="application/ld+json"]');n||(n=document.createElement("script"),n.type="application/ld+json",document.head.appendChild(n)),n.text=JSON.stringify({"@context":"https://schema.org","@type":"YogaStudio",name:a,description:e,url:s,image:r})},[a,e,s,r]),t.jsxs(t.Fragment,{children:[t.jsx("title",{children:a}),t.jsx("meta",{name:"description",content:e}),t.jsx("meta",{property:"og:title",content:a}),t.jsx("meta",{property:"og:description",content:e}),t.jsx("meta",{property:"og:image",content:r}),t.jsx("meta",{property:"og:url",content:s})]})}function ct({...a}){return t.jsx(Qi,{"data-slot":"dialog",...a})}function lf({...a}){return t.jsx(ol,{"data-slot":"dialog-trigger",...a})}function cf({...a}){return t.jsx(al,{"data-slot":"dialog-portal",...a})}function df({className:a,...e}){return t.jsx(nl,{"data-slot":"dialog-overlay",className:re("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...e})}function dt({className:a,children:e,...s}){return t.jsxs(cf,{"data-slot":"dialog-portal",children:[t.jsx(df,{}),t.jsxs(el,{"data-slot":"dialog-content",className:re("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...s,children:[e,t.jsxs(tl,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[t.jsx(ea,{}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ut({className:a,...e}){return t.jsx("div",{"data-slot":"dialog-header",className:re("flex flex-col gap-2 text-center sm:text-left",a),...e})}function ht({className:a,...e}){return t.jsx(sl,{"data-slot":"dialog-title",className:re("text-lg leading-none font-semibold",a),...e})}function ft({className:a,...e}){return t.jsx(rl,{"data-slot":"dialog-description",className:re("text-muted-foreground text-sm",a),...e})}var lr="Tabs",[uf,_g]=$s(lr,[Nn]),Io=Nn(),[hf,ja]=uf(lr),Oo=p.forwardRef((a,e)=>{const{__scopeTabs:s,value:r,onValueChange:n,defaultValue:o,orientation:i="horizontal",dir:c,activationMode:l="automatic",...d}=a,u=Qs(c),[h,v]=cs({prop:r,onChange:n,defaultProp:o??"",caller:lr});return t.jsx(hf,{scope:s,baseId:hs(),value:h,onValueChange:v,orientation:i,dir:u,activationMode:l,children:t.jsx(de.div,{dir:u,"data-orientation":i,...d,ref:e})})});Oo.displayName=lr;var $o="TabsList",Do=p.forwardRef((a,e)=>{const{__scopeTabs:s,loop:r=!0,...n}=a,o=ja($o,s),i=Io(s);return t.jsx(il,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:r,children:t.jsx(de.div,{role:"tablist","aria-orientation":o.orientation,...n,ref:e})})});Do.displayName=$o;var Lo="TabsTrigger",Mo=p.forwardRef((a,e)=>{const{__scopeTabs:s,value:r,disabled:n=!1,...o}=a,i=ja(Lo,s),c=Io(s),l=Bo(i.baseId,r),d=Fo(i.baseId,r),u=r===i.value;return t.jsx(ll,{asChild:!0,...c,focusable:!n,active:u,children:t.jsx(de.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:l,...o,ref:e,onMouseDown:he(a.onMouseDown,h=>{!n&&h.button===0&&h.ctrlKey===!1?i.onValueChange(r):h.preventDefault()}),onKeyDown:he(a.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&i.onValueChange(r)}),onFocus:he(a.onFocus,()=>{const h=i.activationMode!=="manual";!u&&!n&&h&&i.onValueChange(r)})})})});Mo.displayName=Lo;var Uo="TabsContent",zo=p.forwardRef((a,e)=>{const{__scopeTabs:s,value:r,forceMount:n,children:o,...i}=a,c=ja(Uo,s),l=Bo(c.baseId,r),d=Fo(c.baseId,r),u=r===c.value,h=p.useRef(u);return p.useEffect(()=>{const v=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(v)},[]),t.jsx(fs,{present:n||u,children:({present:v})=>t.jsx(de.div,{"data-state":u?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":l,hidden:!v,id:d,tabIndex:0,...i,ref:e,style:{...a.style,animationDuration:h.current?"0s":void 0},children:v&&o})})});zo.displayName=Uo;function Bo(a,e){return`${a}-trigger-${e}`}function Fo(a,e){return`${a}-content-${e}`}var ff=Oo,mf=Do,gf=Mo,pf=zo;function qo({className:a,...e}){return t.jsx(ff,{"data-slot":"tabs",className:re("flex flex-col gap-2",a),...e})}function Wo({className:a,...e}){return t.jsx(mf,{"data-slot":"tabs-list",className:re("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",a),...e})}function Ee({className:a,...e}){return t.jsx(gf,{"data-slot":"tabs-trigger",className:re("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...e})}function Te({className:a,...e}){return t.jsx(pf,{"data-slot":"tabs-content",className:re("flex-1 outline-none",a),...e})}function xf({isOpen:a,onClose:e,onLogin:s,onSignup:r,onResetPassword:n}){const[o,i]=p.useState(""),[c,l]=p.useState(""),[d,u]=p.useState(""),[h,v]=p.useState(!1),[f,j]=p.useState("");p.useRef(null);const y=async m=>{if(m.preventDefault(),o&&c){v(!0),j("");try{await s(o,c),e()}catch{j("Login failed. Please check your credentials.")}finally{v(!1)}}},x=async m=>{if(m.preventDefault(),o&&c&&d){v(!0),j("");try{await r(o,c,d),j("Account created! Please check your email to confirm your account.")}catch(g){j(g.message||"Signup failed. Please try again.")}finally{v(!1)}}},b=async m=>{if(m.preventDefault(),o){v(!0),j("");try{await n(o),j("Password reset email sent! Check your inbox.")}catch(g){j(g.message||"Failed to send reset email. Please try again.")}finally{v(!1)}}};return t.jsx(ct,{open:a,onOpenChange:e,children:t.jsxs(dt,{className:"sm:max-w-md",children:[t.jsxs(ut,{children:[t.jsx(ht,{children:"Join Nirva Yoga"}),t.jsx(ft,{children:"Sign in to your account, create a new account, or reset your password."})]}),t.jsxs(qo,{defaultValue:"login",className:"w-full",children:[t.jsxs(Wo,{className:"grid w-full grid-cols-3",children:[t.jsx(Ee,{value:"login",children:"Login"}),t.jsx(Ee,{value:"signup",children:"Sign Up"}),t.jsx(Ee,{value:"reset",children:"Reset Password"})]}),t.jsx(Te,{value:"login",children:t.jsxs("form",{onSubmit:y,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(J,{htmlFor:"login-email",children:"Email"}),t.jsx(ie,{id:"login-email",type:"email",value:o,onChange:m=>i(m.target.value),placeholder:"your.email@example.com",required:!0})]}),t.jsxs("div",{children:[t.jsx(J,{htmlFor:"login-password",children:"Password"}),t.jsx(ie,{id:"login-password",type:"password",value:c,onChange:m=>l(m.target.value),placeholder:"••••••••",required:!0})]}),t.jsx($,{type:"submit",className:"w-full",disabled:h,children:h?"Signing In...":"Sign In"})]})}),t.jsx(Te,{value:"signup",children:t.jsxs("form",{onSubmit:x,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(J,{htmlFor:"signup-name",children:"Full Name"}),t.jsx(ie,{id:"signup-name",type:"text",value:d,onChange:m=>u(m.target.value),placeholder:"John Doe",required:!0})]}),t.jsxs("div",{children:[t.jsx(J,{htmlFor:"signup-email",children:"Email"}),t.jsx(ie,{id:"signup-email",type:"email",value:o,onChange:m=>i(m.target.value),placeholder:"your.email@example.com",required:!0})]}),t.jsxs("div",{children:[t.jsx(J,{htmlFor:"signup-password",children:"Password"}),t.jsx(ie,{id:"signup-password",type:"password",value:c,onChange:m=>l(m.target.value),placeholder:"••••••••",required:!0,minLength:6})]}),t.jsx($,{type:"submit",className:"w-full",disabled:h,children:h?"Creating Account...":"Create Account"})]})}),t.jsx(Te,{value:"reset",children:t.jsxs("form",{onSubmit:b,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(J,{htmlFor:"reset-email",children:"Email"}),t.jsx(ie,{id:"reset-email",type:"email",value:o,onChange:m=>i(m.target.value),placeholder:"your.email@example.com",required:!0})]}),t.jsx($,{type:"submit",className:"w-full",disabled:h,children:h?"Sending...":"Send Reset Email"})]})})]}),f&&t.jsxs("div",{className:`text-center text-sm mt-4 p-4 rounded-lg ${f.includes("success")||f.includes("sent")||f.includes("created")?"bg-green-50 text-green-700 border border-green-200":f.includes("already exists")?"bg-amber-50 text-amber-800 border border-amber-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[f,f.includes("already exists")&&t.jsx("div",{className:"mt-2",children:t.jsxs("p",{className:"text-amber-700 text-sm",children:["💡 ",t.jsx("strong",{children:"Tip:"}),' Use the "Reset Password" tab above to reset your password']})})]}),t.jsx("div",{className:"text-center text-sm text-muted-foreground mt-4",children:t.jsx("p",{children:"🔒 Secure login required for all purchases"})})]})})}var vf="Separator",pn="horizontal",bf=["horizontal","vertical"],Ho=p.forwardRef((a,e)=>{const{decorative:s,orientation:r=pn,...n}=a,o=yf(r)?r:pn,c=s?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return t.jsx(de.div,{"data-orientation":o,...c,...n,ref:e})});Ho.displayName=vf;function yf(a){return bf.includes(a)}var wf=Ho;function xn({className:a,orientation:e="horizontal",decorative:s=!0,...r}){return t.jsx(wf,{"data-slot":"separator-root",decorative:s,orientation:e,className:re("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...r})}function jf({user:a,onLogout:e,onNavigateToClasses:s,onNavigateToPackages:r}){if(!a)return null;const n=a.classPacks.singleClasses+a.classPacks.fivePack+a.classPacks.tenPack;return t.jsxs("div",{className:"space-y-6 p-1",children:[t.jsxs(U,{children:[t.jsx(ne,{children:t.jsxs(oe,{className:"flex items-center justify-between",children:[t.jsx("span",{children:"My Account"}),t.jsx($,{variant:"destructive",size:"sm",onClick:e,children:"Logout"})]})}),t.jsx(F,{children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),t.jsx("p",{className:"font-medium",children:a.email})]}),a.name&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),t.jsx("p",{className:"font-medium",children:a.name})]})]})})]}),t.jsxs(U,{children:[t.jsx(ne,{children:t.jsxs(oe,{className:"flex items-center gap-2",children:[t.jsx(cl,{className:"w-5 h-5"}),"My Class Packages"]})}),t.jsxs(F,{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-3",children:[a.classPacks.singleClasses>0&&t.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-blue-900",children:"Single Classes"}),t.jsx("p",{className:"text-sm text-blue-700",children:"Individual purchases"})]}),t.jsxs(_e,{variant:"default",className:"bg-blue-600 hover:bg-blue-700",children:[a.classPacks.singleClasses," classes"]})]}),t.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"5-Class Package"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Never expires"})]}),t.jsxs(_e,{variant:a.classPacks.fivePack>0?"default":"secondary",children:[a.classPacks.fivePack," classes"]})]}),t.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"10-Class Package"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Never expires"})]}),t.jsxs(_e,{variant:a.classPacks.tenPack>0?"default":"secondary",children:[a.classPacks.tenPack," classes"]})]})]}),t.jsx(xn,{}),t.jsxs("div",{className:"text-center p-4 bg-primary/10 border border-primary/20 rounded-lg",children:[t.jsx("p",{className:"text-primary text-3xl font-bold",children:n}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Classes Remaining"}),n>0&&t.jsx("p",{className:"text-xs text-primary/80 mt-1",children:"Ready to book!"}),n===0&&t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Purchase more to continue"})]})]})]}),t.jsxs(U,{children:[t.jsx(ne,{children:t.jsxs(oe,{className:"flex items-center gap-2",children:[t.jsx(De,{className:"w-5 h-5"}),"Quick Actions"]})}),t.jsxs(F,{className:"space-y-3",children:[n>0?t.jsxs("div",{className:"space-y-3",children:[t.jsxs($,{onClick:s,className:"w-full justify-start",size:"lg",children:[t.jsx(De,{className:"w-4 h-4 mr-2"}),"Book a Class (",n," classes available)"]}),t.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"✨ Use your remaining classes to book any available class"})]}):t.jsxs("div",{className:"space-y-3",children:[t.jsxs($,{onClick:r,className:"w-full justify-start",size:"lg",variant:"outline",children:[t.jsx(As,{className:"w-4 h-4 mr-2"}),"Purchase Class Packages"]}),t.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"🧘‍♀️ Buy packages to start booking classes"})]}),t.jsx(xn,{}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs($,{onClick:s,variant:"outline",size:"sm",className:"justify-start",children:[t.jsx(De,{className:"w-4 h-4 mr-2"}),"View Schedule"]}),t.jsxs($,{onClick:r,variant:"outline",size:"sm",className:"justify-start",children:[t.jsx(As,{className:"w-4 h-4 mr-2"}),"Buy Packages"]})]})]})]}),t.jsx(U,{className:"bg-muted/50",children:t.jsx(F,{className:"pt-6",children:t.jsxs("div",{className:"text-xs text-muted-foreground text-center space-y-1",children:[t.jsx("p",{children:"✨ Class packages never expire and can be used anytime!"}),t.jsx("p",{children:"🧘‍♀️ When you book a class, it will be deducted from your packages automatically."}),t.jsx("p",{children:"💰 Single classes can be paid via Zelle ($11 each)."}),t.jsx("p",{children:"🚫 All payments are final - no refunds policy applies."})]})})})]})}function Vr(a,[e,s]){return Math.min(s,Math.max(e,a))}function _f(a,e){return p.useReducer((s,r)=>e[s][r]??s,a)}var _a="ScrollArea",[Vo,Ng]=$s(_a),[Nf,Me]=Vo(_a),Go=p.forwardRef((a,e)=>{const{__scopeScrollArea:s,type:r="hover",dir:n,scrollHideDelay:o=600,...i}=a,[c,l]=p.useState(null),[d,u]=p.useState(null),[h,v]=p.useState(null),[f,j]=p.useState(null),[y,x]=p.useState(null),[b,m]=p.useState(0),[g,_]=p.useState(0),[S,R]=p.useState(!1),[N,D]=p.useState(!1),M=Ce(e,Q=>l(Q)),Z=Qs(n);return t.jsx(Nf,{scope:s,type:r,dir:Z,scrollHideDelay:o,scrollArea:c,viewport:d,onViewportChange:u,content:h,onContentChange:v,scrollbarX:f,onScrollbarXChange:j,scrollbarXEnabled:S,onScrollbarXEnabledChange:R,scrollbarY:y,onScrollbarYChange:x,scrollbarYEnabled:N,onScrollbarYEnabledChange:D,onCornerWidthChange:m,onCornerHeightChange:_,children:t.jsx(de.div,{dir:Z,...i,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":g+"px",...a.style}})})});Go.displayName=_a;var Yo="ScrollAreaViewport",Ko=p.forwardRef((a,e)=>{const{__scopeScrollArea:s,children:r,nonce:n,...o}=a,i=Me(Yo,s),c=p.useRef(null),l=Ce(e,c,i.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),t.jsx(de.div,{"data-radix-scroll-area-viewport":"",...o,ref:l,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...a.style},children:t.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Ko.displayName=Yo;var rt="ScrollAreaScrollbar",Jo=p.forwardRef((a,e)=>{const{forceMount:s,...r}=a,n=Me(rt,a.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=n,c=a.orientation==="horizontal";return p.useEffect(()=>(c?o(!0):i(!0),()=>{c?o(!1):i(!1)}),[c,o,i]),n.type==="hover"?t.jsx(kf,{...r,ref:e,forceMount:s}):n.type==="scroll"?t.jsx(Sf,{...r,ref:e,forceMount:s}):n.type==="auto"?t.jsx(Zo,{...r,ref:e,forceMount:s}):n.type==="always"?t.jsx(Na,{...r,ref:e}):null});Jo.displayName=rt;var kf=p.forwardRef((a,e)=>{const{forceMount:s,...r}=a,n=Me(rt,a.__scopeScrollArea),[o,i]=p.useState(!1);return p.useEffect(()=>{const c=n.scrollArea;let l=0;if(c){const d=()=>{window.clearTimeout(l),i(!0)},u=()=>{l=window.setTimeout(()=>i(!1),n.scrollHideDelay)};return c.addEventListener("pointerenter",d),c.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),c.removeEventListener("pointerenter",d),c.removeEventListener("pointerleave",u)}}},[n.scrollArea,n.scrollHideDelay]),t.jsx(fs,{present:s||o,children:t.jsx(Zo,{"data-state":o?"visible":"hidden",...r,ref:e})})}),Sf=p.forwardRef((a,e)=>{const{forceMount:s,...r}=a,n=Me(rt,a.__scopeScrollArea),o=a.orientation==="horizontal",i=dr(()=>l("SCROLL_END"),100),[c,l]=_f("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(c==="idle"){const d=window.setTimeout(()=>l("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(d)}},[c,n.scrollHideDelay,l]),p.useEffect(()=>{const d=n.viewport,u=o?"scrollLeft":"scrollTop";if(d){let h=d[u];const v=()=>{const f=d[u];h!==f&&(l("SCROLL"),i()),h=f};return d.addEventListener("scroll",v),()=>d.removeEventListener("scroll",v)}},[n.viewport,o,l,i]),t.jsx(fs,{present:s||c!=="hidden",children:t.jsx(Na,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:he(a.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:he(a.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),Zo=p.forwardRef((a,e)=>{const s=Me(rt,a.__scopeScrollArea),{forceMount:r,...n}=a,[o,i]=p.useState(!1),c=a.orientation==="horizontal",l=dr(()=>{if(s.viewport){const d=s.viewport.offsetWidth<s.viewport.scrollWidth,u=s.viewport.offsetHeight<s.viewport.scrollHeight;i(c?d:u)}},10);return us(s.viewport,l),us(s.content,l),t.jsx(fs,{present:r||o,children:t.jsx(Na,{"data-state":o?"visible":"hidden",...n,ref:e})})}),Na=p.forwardRef((a,e)=>{const{orientation:s="vertical",...r}=a,n=Me(rt,a.__scopeScrollArea),o=p.useRef(null),i=p.useRef(0),[c,l]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=si(c.viewport,c.content),u={...r,sizes:c,onSizesChange:l,hasThumb:d>0&&d<1,onThumbChange:v=>o.current=v,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:v=>i.current=v};function h(v,f){return Rf(v,i.current,c,f)}return s==="horizontal"?t.jsx(Cf,{...u,ref:e,onThumbPositionChange:()=>{if(n.viewport&&o.current){const v=n.viewport.scrollLeft,f=vn(v,c,n.dir);o.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:v=>{n.viewport&&(n.viewport.scrollLeft=v)},onDragScroll:v=>{n.viewport&&(n.viewport.scrollLeft=h(v,n.dir))}}):s==="vertical"?t.jsx(Pf,{...u,ref:e,onThumbPositionChange:()=>{if(n.viewport&&o.current){const v=n.viewport.scrollTop,f=vn(v,c);o.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:v=>{n.viewport&&(n.viewport.scrollTop=v)},onDragScroll:v=>{n.viewport&&(n.viewport.scrollTop=h(v))}}):null}),Cf=p.forwardRef((a,e)=>{const{sizes:s,onSizesChange:r,...n}=a,o=Me(rt,a.__scopeScrollArea),[i,c]=p.useState(),l=p.useRef(null),d=Ce(e,l,o.onScrollbarXChange);return p.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),t.jsx(Qo,{"data-orientation":"horizontal",...n,ref:d,sizes:s,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":cr(s)+"px",...a.style},onThumbPointerDown:u=>a.onThumbPointerDown(u.x),onDragScroll:u=>a.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(o.viewport){const v=o.viewport.scrollLeft+u.deltaX;a.onWheelScroll(v),ai(v,h)&&u.preventDefault()}},onResize:()=>{l.current&&o.viewport&&i&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Zs(i.paddingLeft),paddingEnd:Zs(i.paddingRight)}})}})}),Pf=p.forwardRef((a,e)=>{const{sizes:s,onSizesChange:r,...n}=a,o=Me(rt,a.__scopeScrollArea),[i,c]=p.useState(),l=p.useRef(null),d=Ce(e,l,o.onScrollbarYChange);return p.useEffect(()=>{l.current&&c(getComputedStyle(l.current))},[l]),t.jsx(Qo,{"data-orientation":"vertical",...n,ref:d,sizes:s,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":cr(s)+"px",...a.style},onThumbPointerDown:u=>a.onThumbPointerDown(u.y),onDragScroll:u=>a.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(o.viewport){const v=o.viewport.scrollTop+u.deltaY;a.onWheelScroll(v),ai(v,h)&&u.preventDefault()}},onResize:()=>{l.current&&o.viewport&&i&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Zs(i.paddingTop),paddingEnd:Zs(i.paddingBottom)}})}})}),[Ef,Xo]=Vo(rt),Qo=p.forwardRef((a,e)=>{const{__scopeScrollArea:s,sizes:r,hasThumb:n,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:c,onThumbPositionChange:l,onDragScroll:d,onWheelScroll:u,onResize:h,...v}=a,f=Me(rt,s),[j,y]=p.useState(null),x=Ce(e,M=>y(M)),b=p.useRef(null),m=p.useRef(""),g=f.viewport,_=r.content-r.viewport,S=kt(u),R=kt(l),N=dr(h,10);function D(M){if(b.current){const Z=M.clientX-b.current.left,Q=M.clientY-b.current.top;d({x:Z,y:Q})}}return p.useEffect(()=>{const M=Z=>{const Q=Z.target;(j==null?void 0:j.contains(Q))&&S(Z,_)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[g,j,_,S]),p.useEffect(R,[r,R]),us(j,N),us(f.content,N),t.jsx(Ef,{scope:s,scrollbar:j,hasThumb:n,onThumbChange:kt(o),onThumbPointerUp:kt(i),onThumbPositionChange:R,onThumbPointerDown:kt(c),children:t.jsx(de.div,{...v,ref:x,style:{position:"absolute",...v.style},onPointerDown:he(a.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),b.current=j.getBoundingClientRect(),m.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),D(M))}),onPointerMove:he(a.onPointerMove,D),onPointerUp:he(a.onPointerUp,M=>{const Z=M.target;Z.hasPointerCapture(M.pointerId)&&Z.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=m.current,f.viewport&&(f.viewport.style.scrollBehavior=""),b.current=null})})})}),Js="ScrollAreaThumb",ei=p.forwardRef((a,e)=>{const{forceMount:s,...r}=a,n=Xo(Js,a.__scopeScrollArea);return t.jsx(fs,{present:s||n.hasThumb,children:t.jsx(Tf,{ref:e,...r})})}),Tf=p.forwardRef((a,e)=>{const{__scopeScrollArea:s,style:r,...n}=a,o=Me(Js,s),i=Xo(Js,s),{onThumbPositionChange:c}=i,l=Ce(e,h=>i.onThumbChange(h)),d=p.useRef(void 0),u=dr(()=>{d.current&&(d.current(),d.current=void 0)},100);return p.useEffect(()=>{const h=o.viewport;if(h){const v=()=>{if(u(),!d.current){const f=If(h,c);d.current=f,c()}};return c(),h.addEventListener("scroll",v),()=>h.removeEventListener("scroll",v)}},[o.viewport,u,c]),t.jsx(de.div,{"data-state":i.hasThumb?"visible":"hidden",...n,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:he(a.onPointerDownCapture,h=>{const f=h.target.getBoundingClientRect(),j=h.clientX-f.left,y=h.clientY-f.top;i.onThumbPointerDown({x:j,y})}),onPointerUp:he(a.onPointerUp,i.onThumbPointerUp)})});ei.displayName=Js;var ka="ScrollAreaCorner",ti=p.forwardRef((a,e)=>{const s=Me(ka,a.__scopeScrollArea),r=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&r?t.jsx(Af,{...a,ref:e}):null});ti.displayName=ka;var Af=p.forwardRef((a,e)=>{const{__scopeScrollArea:s,...r}=a,n=Me(ka,s),[o,i]=p.useState(0),[c,l]=p.useState(0),d=!!(o&&c);return us(n.scrollbarX,()=>{var h;const u=((h=n.scrollbarX)==null?void 0:h.offsetHeight)||0;n.onCornerHeightChange(u),l(u)}),us(n.scrollbarY,()=>{var h;const u=((h=n.scrollbarY)==null?void 0:h.offsetWidth)||0;n.onCornerWidthChange(u),i(u)}),d?t.jsx(de.div,{...r,ref:e,style:{width:o,height:c,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...a.style}}):null});function Zs(a){return a?parseInt(a,10):0}function si(a,e){const s=a/e;return isNaN(s)?0:s}function cr(a){const e=si(a.viewport,a.content),s=a.scrollbar.paddingStart+a.scrollbar.paddingEnd,r=(a.scrollbar.size-s)*e;return Math.max(r,18)}function Rf(a,e,s,r="ltr"){const n=cr(s),o=n/2,i=e||o,c=n-i,l=s.scrollbar.paddingStart+i,d=s.scrollbar.size-s.scrollbar.paddingEnd-c,u=s.content-s.viewport,h=r==="ltr"?[0,u]:[u*-1,0];return ri([l,d],h)(a)}function vn(a,e,s="ltr"){const r=cr(e),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-n,i=e.content-e.viewport,c=o-r,l=s==="ltr"?[0,i]:[i*-1,0],d=Vr(a,l);return ri([0,i],[0,c])(d)}function ri(a,e){return s=>{if(a[0]===a[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(a[1]-a[0]);return e[0]+r*(s-a[0])}}function ai(a,e){return a>0&&a<e}var If=(a,e=()=>{})=>{let s={left:a.scrollLeft,top:a.scrollTop},r=0;return function n(){const o={left:a.scrollLeft,top:a.scrollTop},i=s.left!==o.left,c=s.top!==o.top;(i||c)&&e(),s=o,r=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(r)};function dr(a,e){const s=kt(a),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,e)},[s,e])}function us(a,e){const s=kt(e);st(()=>{let r=0;if(a){const n=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(s)});return n.observe(a),()=>{window.cancelAnimationFrame(r),n.unobserve(a)}}},[a,s])}var Of=Go,$f=Ko,Df=ti;function ni({className:a,children:e,...s}){return t.jsxs(Of,{"data-slot":"scroll-area",className:re("relative",a),...s,children:[t.jsx($f,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),t.jsx(Lf,{}),t.jsx(Df,{})]})}function Lf({className:a,orientation:e="vertical",...s}){return t.jsx(Jo,{"data-slot":"scroll-area-scrollbar",orientation:e,className:re("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",a),...s,children:t.jsx(ei,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function Mf(){return t.jsx(ni,{className:"h-[60vh]",children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"mb-2",children:"Nirva Yoga Terms of Service"}),t.jsx("p",{className:"text-muted-foreground",children:"Effective Date: September 5, 2025"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{children:t.jsx("p",{className:"mb-4",children:"Welcome to Nirva Yoga. By visiting our website, booking a class, or attending our studio, you agree to the following Terms of Service."})}),t.jsxs("div",{children:[t.jsx("h2",{className:"mb-3",children:"1. Classes, Workshops, and Events"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx("p",{children:"Class schedules may change from time to time. We will do our best to notify you of updates."}),t.jsx("p",{children:"Registration may be required to secure your spot in a class, workshop, or event."})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"mb-3",children:"2. Payments"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx("p",{children:"All classes, memberships, and events must be paid in full at the time of booking."}),t.jsx("p",{children:"Payments are final. We do not offer cancellations, refunds, or transfers for any reason, including missed or unused classes."})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"mb-3",children:"3. Health and Safety"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx("p",{children:"By participating in our offerings, you confirm that you are in good health and able to engage in physical activity."}),t.jsx("p",{children:"Always listen to your body and practice at your own pace."}),t.jsx("p",{children:"Please inform the instructor of any injuries or health conditions before class."}),t.jsx("p",{children:"Nirva Yoga is not liable for injuries or health issues that may arise during practice. Participation is at your own risk."})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"mb-3",children:"4. Code of Conduct"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx("p",{children:"Please arrive on time and respect the peaceful atmosphere of our classes."}),t.jsx("p",{children:"Phones and devices should be silenced during sessions."}),t.jsx("p",{children:"We reserve the right to refuse service to anyone whose behavior is disruptive, unsafe, or disrespectful."})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"mb-3",children:"5. Website and Online Content"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx("p",{children:"All schedules, images, and written content on our website are the property of Nirva Yoga and may not be copied or used without permission."}),t.jsx("p",{children:"Our website and booking system are provided for personal, non-commercial use only."})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"mb-3",children:"6. Updates to Terms"}),t.jsx("div",{className:"space-y-2 text-sm",children:t.jsx("p",{children:"We may update these Terms of Service occasionally. Any changes will take effect when posted on our website."})})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"mb-3",children:"7. Contact Us"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx("p",{children:"If you have any questions about these Terms, please contact us:"}),t.jsx("p",{children:"📧 Email: nirvayogastudio@gmail.com"})]})]}),t.jsxs("div",{className:"text-center pt-6 border-t border-border",children:[t.jsx("p",{className:"text-sm text-muted-foreground italic",children:"🙏 Thank you for your understanding and for being part of the Nirva Yoga community."}),t.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"— The Nirva Yoga Team"})]})]})]})})}function Uf(){return t.jsx(ni,{className:"h-[60vh]",children:t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"mb-2",children:"Nirva Yoga Privacy Policy"}),t.jsx("p",{className:"text-muted-foreground",children:"Effective Date: September 5th, 2025"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{children:t.jsx("p",{className:"mb-4",children:"At Nirva Yoga, we believe that privacy is part of well-being. Just as we value creating a safe space in our studio, we are committed to protecting the personal information you share with us. This Privacy Policy explains how we handle your information when you visit our website, register for classes, attend events, or communicate with us."})}),t.jsxs("div",{children:[t.jsx("h2",{className:"mb-3",children:"1. Information We Collect"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx("p",{children:"To serve you better, we may collect:"}),t.jsx("p",{children:"• Your name and contact information (such as email address or phone number)"}),t.jsx("p",{children:"• Registration and payment details when you sign up for classes or workshops"}),t.jsx("p",{children:"• Basic technical details like IP address, browser type, or device information when you use our website"}),t.jsx("p",{children:"• Preferences you share with us, such as class interests or feedback"})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"mb-3",children:"2. How We Use Your Information"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx("p",{children:"We use your information to:"}),t.jsx("p",{children:"• Confirm class bookings and process payments"}),t.jsx("p",{children:"• Share updates about schedules, workshops, and studio news"}),t.jsx("p",{children:"• Respond to your questions or feedback"}),t.jsx("p",{children:"• Improve our offerings and community experience"}),t.jsx("p",{children:"• Meet any legal or regulatory requirements"})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"mb-3",children:"3. How We Protect Your Information"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx("p",{children:"• Payment information is processed securely through trusted third-party providers"}),t.jsx("p",{children:"• We use secure hosting services and firewalls to protect website data"}),t.jsx("p",{children:"• Only authorized team members have access to personal information needed for studio operations"}),t.jsx("p",{children:"• We never sell or rent your information to outside companies"})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"mb-3",children:"4. Sharing Your Information"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx("p",{children:"Your information may only be shared with:"}),t.jsx("p",{children:"• Service providers that help us operate (e.g., scheduling or email platforms)"}),t.jsx("p",{children:"• Legal authorities if required by law"}),t.jsx("p",{children:"• We do not share personal information for marketing by other organizations"})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"mb-3",children:"5. Your Choices"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx("p",{children:"• You can unsubscribe from our emails at any time by clicking the link provided or contacting us directly"}),t.jsx("p",{children:"• You can request to review, update, or delete your information by emailing us at nirvayogastudio@gmail.com"})]})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"mb-3",children:"6. Cookies and Website Tools"}),t.jsx("div",{className:"space-y-2 text-sm",children:t.jsx("p",{children:"Our website may use cookies or analytics tools to understand how visitors interact with our pages. This helps us improve your online experience. You can adjust your browser settings to limit or block cookies if you prefer."})})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"mb-3",children:"7. Updates to This Policy"}),t.jsx("div",{className:"space-y-2 text-sm",children:t.jsx("p",{children:"As our studio grows, we may update this Privacy Policy. Any changes will be posted here with a new effective date."})})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"mb-3",children:"8. Contact Us"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx("p",{children:"If you have questions or requests regarding your information, please reach out:"}),t.jsx("p",{children:"📧 Email: nirvayogastudio@gmail.com"})]})]}),t.jsxs("div",{className:"text-center pt-6 border-t border-border",children:[t.jsx("p",{className:"text-sm text-muted-foreground italic",children:"✨ Thank you for being part of the Nirva Yoga community. We honor your trust both on and off the mat."}),t.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"— The Nirva Yoga Team"})]})]})]})})}function Ot({onShowTerms:a,onShowPrivacy:e}){return t.jsxs("footer",{className:"text-center py-8 border-t border-border",children:[t.jsxs("p",{className:"text-muted-foreground mb-4",children:["Follow us"," ",t.jsx("a",{href:"https://instagram.com/nirvayogastudio",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"@NirvaYogaStudio"})]}),t.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-sm text-muted-foreground",children:[t.jsx("button",{onClick:a,className:"hover:text-primary transition-colors",children:"Terms of Service"}),t.jsx("span",{children:"•"}),t.jsx("button",{onClick:e,className:"hover:text-primary transition-colors",children:"Privacy Policy"}),t.jsx("span",{children:"•"}),t.jsx("span",{children:"© 2025 Nirva Yoga Studio"})]})]})}const zf=[];function Bf(){const[a,e]=p.useState(zf),[s,r]=p.useState(!1);p.useEffect(()=>{const i=c=>{const l=c.detail,d={id:Date.now().toString(),timestamp:new Date,...l};e(u=>[d,...u]),r(!0),setTimeout(()=>{r(!1)},1e4)};return window.addEventListener("classBooked",i),()=>{window.removeEventListener("classBooked",i)}},[]);const n=()=>{e([]),r(!1)},o=i=>i.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return!s||a.length===0?null:t.jsx("div",{className:"fixed top-4 right-4 z-50 w-80",children:t.jsx(Br,{className:"border-primary/20 bg-primary/5",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(dl,{className:"w-4 h-4 mt-0.5 text-primary"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium text-primary",children:"New Booking!"}),t.jsx(_e,{variant:"secondary",className:"text-xs",children:"Admin Alert"})]}),t.jsx($,{variant:"ghost",size:"sm",onClick:()=>r(!1),className:"h-auto p-1",children:t.jsx(ea,{className:"w-3 h-3"})})]}),a.slice(0,3).map(i=>t.jsx("div",{className:"mb-2 last:mb-0",children:t.jsx(Fr,{className:"text-sm",children:t.jsxs("div",{className:"space-y-1",children:[t.jsxs("p",{children:[t.jsx("strong",{children:i.studentName})," booked:"]}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.className," • ",i.teacher,t.jsx("br",{}),i.date," at ",i.time,t.jsx("br",{}),t.jsx("span",{className:"text-xs opacity-75",children:o(i.timestamp)})]})]})})},i.id)),a.length>3&&t.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["+",a.length-3," more bookings..."]}),t.jsx($,{variant:"outline",size:"sm",onClick:n,className:"w-full mt-2 h-7 text-xs",children:"Clear All"})]})]})})})}function Ff({className:a,...e}){return t.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:t.jsx("table",{"data-slot":"table",className:re("w-full caption-bottom text-sm",a),...e})})}function qf({className:a,...e}){return t.jsx("thead",{"data-slot":"table-header",className:re("[&_tr]:border-b",a),...e})}function Wf({className:a,...e}){return t.jsx("tbody",{"data-slot":"table-body",className:re("[&_tr:last-child]:border-0",a),...e})}function bn({className:a,...e}){return t.jsx("tr",{"data-slot":"table-row",className:re("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...e})}function $t({className:a,...e}){return t.jsx("th",{"data-slot":"table-head",className:re("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...e})}function Dt({className:a,...e}){return t.jsx("td",{"data-slot":"table-cell",className:re("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...e})}function Hf(a){const e=p.useRef({value:a,previous:a});return p.useMemo(()=>(e.current.value!==a&&(e.current.previous=e.current.value,e.current.value=a),e.current.previous),[a])}var oi=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Vf="VisuallyHidden",Gf=p.forwardRef((a,e)=>t.jsx(de.span,{...a,ref:e,style:{...oi,...a.style}}));Gf.displayName=Vf;var Yf=[" ","Enter","ArrowUp","ArrowDown"],Kf=[" ","Enter"],Ht="Select",[ur,hr,Jf]=_n(Ht),[xs,kg]=$s(Ht,[Jf,kn]),fr=kn(),[Zf,Et]=xs(Ht),[Xf,Qf]=xs(Ht),ii=a=>{const{__scopeSelect:e,children:s,open:r,defaultOpen:n,onOpenChange:o,value:i,defaultValue:c,onValueChange:l,dir:d,name:u,autoComplete:h,disabled:v,required:f,form:j}=a,y=fr(e),[x,b]=p.useState(null),[m,g]=p.useState(null),[_,S]=p.useState(!1),R=Qs(d),[N,D]=cs({prop:r,defaultProp:n??!1,onChange:o,caller:Ht}),[M,Z]=cs({prop:i,defaultProp:c,onChange:l,caller:Ht}),Q=p.useRef(null),q=x?j||!!x.closest("form"):!0,[T,ue]=p.useState(new Set),be=Array.from(T).map(ce=>ce.props.value).join(";");return t.jsx(ul,{...y,children:t.jsxs(Zf,{required:f,scope:e,trigger:x,onTriggerChange:b,valueNode:m,onValueNodeChange:g,valueNodeHasChildren:_,onValueNodeHasChildrenChange:S,contentId:hs(),value:M,onValueChange:Z,open:N,onOpenChange:D,dir:R,triggerPointerDownPosRef:Q,disabled:v,children:[t.jsx(ur.Provider,{scope:e,children:t.jsx(Xf,{scope:a.__scopeSelect,onNativeOptionAdd:p.useCallback(ce=>{ue(fe=>new Set(fe).add(ce))},[]),onNativeOptionRemove:p.useCallback(ce=>{ue(fe=>{const I=new Set(fe);return I.delete(ce),I})},[]),children:s})}),q?t.jsxs(Ei,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:h,value:M,onChange:ce=>Z(ce.target.value),disabled:v,form:j,children:[M===void 0?t.jsx("option",{value:""}):null,Array.from(T)]},be):null]})})};ii.displayName=Ht;var li="SelectTrigger",ci=p.forwardRef((a,e)=>{const{__scopeSelect:s,disabled:r=!1,...n}=a,o=fr(s),i=Et(li,s),c=i.disabled||r,l=Ce(e,i.onTriggerChange),d=hr(s),u=p.useRef("touch"),[h,v,f]=Ai(y=>{const x=d().filter(g=>!g.disabled),b=x.find(g=>g.value===i.value),m=Ri(x,y,b);m!==void 0&&i.onValueChange(m.value)}),j=y=>{c||(i.onOpenChange(!0),f()),y&&(i.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return t.jsx(hl,{asChild:!0,...o,children:t.jsx(de.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Ti(i.value)?"":void 0,...n,ref:l,onClick:he(n.onClick,y=>{y.currentTarget.focus(),u.current!=="mouse"&&j(y)}),onPointerDown:he(n.onPointerDown,y=>{u.current=y.pointerType;const x=y.target;x.hasPointerCapture(y.pointerId)&&x.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(j(y),y.preventDefault())}),onKeyDown:he(n.onKeyDown,y=>{const x=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&v(y.key),!(x&&y.key===" ")&&Yf.includes(y.key)&&(j(),y.preventDefault())})})})});ci.displayName=li;var di="SelectValue",ui=p.forwardRef((a,e)=>{const{__scopeSelect:s,className:r,style:n,children:o,placeholder:i="",...c}=a,l=Et(di,s),{onValueNodeHasChildrenChange:d}=l,u=o!==void 0,h=Ce(e,l.onValueNodeChange);return st(()=>{d(u)},[d,u]),t.jsx(de.span,{...c,ref:h,style:{pointerEvents:"none"},children:Ti(l.value)?t.jsx(t.Fragment,{children:i}):o})});ui.displayName=di;var em="SelectIcon",hi=p.forwardRef((a,e)=>{const{__scopeSelect:s,children:r,...n}=a;return t.jsx(de.span,{"aria-hidden":!0,...n,ref:e,children:r||"▼"})});hi.displayName=em;var tm="SelectPortal",fi=a=>t.jsx(fl,{asChild:!0,...a});fi.displayName=tm;var Vt="SelectContent",mi=p.forwardRef((a,e)=>{const s=Et(Vt,a.__scopeSelect),[r,n]=p.useState();if(st(()=>{n(new DocumentFragment)},[]),!s.open){const o=r;return o?aa.createPortal(t.jsx(gi,{scope:a.__scopeSelect,children:t.jsx(ur.Slot,{scope:a.__scopeSelect,children:t.jsx("div",{children:a.children})})}),o):null}return t.jsx(pi,{...a,ref:e})});mi.displayName=Vt;var Ve=10,[gi,Tt]=xs(Vt),sm="SelectContentImpl",rm=xl("SelectContent.RemoveScroll"),pi=p.forwardRef((a,e)=>{const{__scopeSelect:s,position:r="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:o,onPointerDownOutside:i,side:c,sideOffset:l,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:v,collisionPadding:f,sticky:j,hideWhenDetached:y,avoidCollisions:x,...b}=a,m=Et(Vt,s),[g,_]=p.useState(null),[S,R]=p.useState(null),N=Ce(e,k=>_(k)),[D,M]=p.useState(null),[Z,Q]=p.useState(null),q=hr(s),[T,ue]=p.useState(!1),be=p.useRef(!1);p.useEffect(()=>{if(g)return ml(g)},[g]),gl();const ce=p.useCallback(k=>{const[Y,...B]=q().map(te=>te.ref.current),[K]=B.slice(-1),z=document.activeElement;for(const te of k)if(te===z||(te==null||te.scrollIntoView({block:"nearest"}),te===Y&&S&&(S.scrollTop=0),te===K&&S&&(S.scrollTop=S.scrollHeight),te==null||te.focus(),document.activeElement!==z))return},[q,S]),fe=p.useCallback(()=>ce([D,g]),[ce,D,g]);p.useEffect(()=>{T&&fe()},[T,fe]);const{onOpenChange:I,triggerPointerDownPosRef:P}=m;p.useEffect(()=>{if(g){let k={x:0,y:0};const Y=K=>{var z,te;k={x:Math.abs(Math.round(K.pageX)-(((z=P.current)==null?void 0:z.x)??0)),y:Math.abs(Math.round(K.pageY)-(((te=P.current)==null?void 0:te.y)??0))}},B=K=>{k.x<=10&&k.y<=10?K.preventDefault():g.contains(K.target)||I(!1),document.removeEventListener("pointermove",Y),P.current=null};return P.current!==null&&(document.addEventListener("pointermove",Y),document.addEventListener("pointerup",B,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Y),document.removeEventListener("pointerup",B,{capture:!0})}}},[g,I,P]),p.useEffect(()=>{const k=()=>I(!1);return window.addEventListener("blur",k),window.addEventListener("resize",k),()=>{window.removeEventListener("blur",k),window.removeEventListener("resize",k)}},[I]);const[H,W]=Ai(k=>{const Y=q().filter(z=>!z.disabled),B=Y.find(z=>z.ref.current===document.activeElement),K=Ri(Y,k,B);K&&setTimeout(()=>K.ref.current.focus())}),w=p.useCallback((k,Y,B)=>{const K=!be.current&&!B;(m.value!==void 0&&m.value===Y||K)&&(M(k),K&&(be.current=!0))},[m.value]),E=p.useCallback(()=>g==null?void 0:g.focus(),[g]),C=p.useCallback((k,Y,B)=>{const K=!be.current&&!B;(m.value!==void 0&&m.value===Y||K)&&Q(k)},[m.value]),O=r==="popper"?Gr:xi,L=O===Gr?{side:c,sideOffset:l,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:v,collisionPadding:f,sticky:j,hideWhenDetached:y,avoidCollisions:x}:{};return t.jsx(gi,{scope:s,content:g,viewport:S,onViewportChange:R,itemRefCallback:w,selectedItem:D,onItemLeave:E,itemTextRefCallback:C,focusSelectedItem:fe,selectedItemText:Z,position:r,isPositioned:T,searchRef:H,children:t.jsx(pl,{as:rm,allowPinchZoom:!0,children:t.jsx(vl,{asChild:!0,trapped:m.open,onMountAutoFocus:k=>{k.preventDefault()},onUnmountAutoFocus:he(n,k=>{var Y;(Y=m.trigger)==null||Y.focus({preventScroll:!0}),k.preventDefault()}),children:t.jsx(bl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:k=>k.preventDefault(),onDismiss:()=>m.onOpenChange(!1),children:t.jsx(O,{role:"listbox",id:m.contentId,"data-state":m.open?"open":"closed",dir:m.dir,onContextMenu:k=>k.preventDefault(),...b,...L,onPlaced:()=>ue(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:he(b.onKeyDown,k=>{const Y=k.ctrlKey||k.altKey||k.metaKey;if(k.key==="Tab"&&k.preventDefault(),!Y&&k.key.length===1&&W(k.key),["ArrowUp","ArrowDown","Home","End"].includes(k.key)){let K=q().filter(z=>!z.disabled).map(z=>z.ref.current);if(["ArrowUp","End"].includes(k.key)&&(K=K.slice().reverse()),["ArrowUp","ArrowDown"].includes(k.key)){const z=k.target,te=K.indexOf(z);K=K.slice(te+1)}setTimeout(()=>ce(K)),k.preventDefault()}})})})})})})});pi.displayName=sm;var am="SelectItemAlignedPosition",xi=p.forwardRef((a,e)=>{const{__scopeSelect:s,onPlaced:r,...n}=a,o=Et(Vt,s),i=Tt(Vt,s),[c,l]=p.useState(null),[d,u]=p.useState(null),h=Ce(e,N=>u(N)),v=hr(s),f=p.useRef(!1),j=p.useRef(!0),{viewport:y,selectedItem:x,selectedItemText:b,focusSelectedItem:m}=i,g=p.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&d&&y&&x&&b){const N=o.trigger.getBoundingClientRect(),D=d.getBoundingClientRect(),M=o.valueNode.getBoundingClientRect(),Z=b.getBoundingClientRect();if(o.dir!=="rtl"){const z=Z.left-D.left,te=M.left-z,we=N.left-te,Se=N.width+we,Je=Math.max(Se,D.width),Ze=window.innerWidth-Ve,gt=Vr(te,[Ve,Math.max(Ve,Ze-Je)]);c.style.minWidth=Se+"px",c.style.left=gt+"px"}else{const z=D.right-Z.right,te=window.innerWidth-M.right-z,we=window.innerWidth-N.right-te,Se=N.width+we,Je=Math.max(Se,D.width),Ze=window.innerWidth-Ve,gt=Vr(te,[Ve,Math.max(Ve,Ze-Je)]);c.style.minWidth=Se+"px",c.style.right=gt+"px"}const Q=v(),q=window.innerHeight-Ve*2,T=y.scrollHeight,ue=window.getComputedStyle(d),be=parseInt(ue.borderTopWidth,10),ce=parseInt(ue.paddingTop,10),fe=parseInt(ue.borderBottomWidth,10),I=parseInt(ue.paddingBottom,10),P=be+ce+T+I+fe,H=Math.min(x.offsetHeight*5,P),W=window.getComputedStyle(y),w=parseInt(W.paddingTop,10),E=parseInt(W.paddingBottom,10),C=N.top+N.height/2-Ve,O=q-C,L=x.offsetHeight/2,k=x.offsetTop+L,Y=be+ce+k,B=P-Y;if(Y<=C){const z=Q.length>0&&x===Q[Q.length-1].ref.current;c.style.bottom="0px";const te=d.clientHeight-y.offsetTop-y.offsetHeight,we=Math.max(O,L+(z?E:0)+te+fe),Se=Y+we;c.style.height=Se+"px"}else{const z=Q.length>0&&x===Q[0].ref.current;c.style.top="0px";const we=Math.max(C,be+y.offsetTop+(z?w:0)+L)+B;c.style.height=we+"px",y.scrollTop=Y-C+y.offsetTop}c.style.margin=`${Ve}px 0`,c.style.minHeight=H+"px",c.style.maxHeight=q+"px",r==null||r(),requestAnimationFrame(()=>f.current=!0)}},[v,o.trigger,o.valueNode,c,d,y,x,b,o.dir,r]);st(()=>g(),[g]);const[_,S]=p.useState();st(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const R=p.useCallback(N=>{N&&j.current===!0&&(g(),m==null||m(),j.current=!1)},[g,m]);return t.jsx(om,{scope:s,contentWrapper:c,shouldExpandOnScrollRef:f,onScrollButtonChange:R,children:t.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:t.jsx(de.div,{...n,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});xi.displayName=am;var nm="SelectPopperPosition",Gr=p.forwardRef((a,e)=>{const{__scopeSelect:s,align:r="start",collisionPadding:n=Ve,...o}=a,i=fr(s);return t.jsx(yl,{...i,...o,ref:e,align:r,collisionPadding:n,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Gr.displayName=nm;var[om,Sa]=xs(Vt,{}),Yr="SelectViewport",vi=p.forwardRef((a,e)=>{const{__scopeSelect:s,nonce:r,...n}=a,o=Tt(Yr,s),i=Sa(Yr,s),c=Ce(e,o.onViewportChange),l=p.useRef(0);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),t.jsx(ur.Slot,{scope:s,children:t.jsx(de.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:he(n.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:v}=i;if(v!=null&&v.current&&h){const f=Math.abs(l.current-u.scrollTop);if(f>0){const j=window.innerHeight-Ve*2,y=parseFloat(h.style.minHeight),x=parseFloat(h.style.height),b=Math.max(y,x);if(b<j){const m=b+f,g=Math.min(j,m),_=m-g;h.style.height=g+"px",h.style.bottom==="0px"&&(u.scrollTop=_>0?_:0,h.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});vi.displayName=Yr;var bi="SelectGroup",[im,lm]=xs(bi),cm=p.forwardRef((a,e)=>{const{__scopeSelect:s,...r}=a,n=hs();return t.jsx(im,{scope:s,id:n,children:t.jsx(de.div,{role:"group","aria-labelledby":n,...r,ref:e})})});cm.displayName=bi;var yi="SelectLabel",dm=p.forwardRef((a,e)=>{const{__scopeSelect:s,...r}=a,n=lm(yi,s);return t.jsx(de.div,{id:n.id,...r,ref:e})});dm.displayName=yi;var Xs="SelectItem",[um,wi]=xs(Xs),ji=p.forwardRef((a,e)=>{const{__scopeSelect:s,value:r,disabled:n=!1,textValue:o,...i}=a,c=Et(Xs,s),l=Tt(Xs,s),d=c.value===r,[u,h]=p.useState(o??""),[v,f]=p.useState(!1),j=Ce(e,m=>{var g;return(g=l.itemRefCallback)==null?void 0:g.call(l,m,r,n)}),y=hs(),x=p.useRef("touch"),b=()=>{n||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return t.jsx(um,{scope:s,value:r,disabled:n,textId:y,isSelected:d,onItemTextChange:p.useCallback(m=>{h(g=>g||((m==null?void 0:m.textContent)??"").trim())},[]),children:t.jsx(ur.ItemSlot,{scope:s,value:r,disabled:n,textValue:u,children:t.jsx(de.div,{role:"option","aria-labelledby":y,"data-highlighted":v?"":void 0,"aria-selected":d&&v,"data-state":d?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...i,ref:j,onFocus:he(i.onFocus,()=>f(!0)),onBlur:he(i.onBlur,()=>f(!1)),onClick:he(i.onClick,()=>{x.current!=="mouse"&&b()}),onPointerUp:he(i.onPointerUp,()=>{x.current==="mouse"&&b()}),onPointerDown:he(i.onPointerDown,m=>{x.current=m.pointerType}),onPointerMove:he(i.onPointerMove,m=>{var g;x.current=m.pointerType,n?(g=l.onItemLeave)==null||g.call(l):x.current==="mouse"&&m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:he(i.onPointerLeave,m=>{var g;m.currentTarget===document.activeElement&&((g=l.onItemLeave)==null||g.call(l))}),onKeyDown:he(i.onKeyDown,m=>{var _;((_=l.searchRef)==null?void 0:_.current)!==""&&m.key===" "||(Kf.includes(m.key)&&b(),m.key===" "&&m.preventDefault())})})})})});ji.displayName=Xs;var Cs="SelectItemText",_i=p.forwardRef((a,e)=>{const{__scopeSelect:s,className:r,style:n,...o}=a,i=Et(Cs,s),c=Tt(Cs,s),l=wi(Cs,s),d=Qf(Cs,s),[u,h]=p.useState(null),v=Ce(e,b=>h(b),l.onItemTextChange,b=>{var m;return(m=c.itemTextRefCallback)==null?void 0:m.call(c,b,l.value,l.disabled)}),f=u==null?void 0:u.textContent,j=p.useMemo(()=>t.jsx("option",{value:l.value,disabled:l.disabled,children:f},l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:y,onNativeOptionRemove:x}=d;return st(()=>(y(j),()=>x(j)),[y,x,j]),t.jsxs(t.Fragment,{children:[t.jsx(de.span,{id:l.textId,...o,ref:v}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?aa.createPortal(o.children,i.valueNode):null]})});_i.displayName=Cs;var Ni="SelectItemIndicator",ki=p.forwardRef((a,e)=>{const{__scopeSelect:s,...r}=a;return wi(Ni,s).isSelected?t.jsx(de.span,{"aria-hidden":!0,...r,ref:e}):null});ki.displayName=Ni;var Kr="SelectScrollUpButton",Si=p.forwardRef((a,e)=>{const s=Tt(Kr,a.__scopeSelect),r=Sa(Kr,a.__scopeSelect),[n,o]=p.useState(!1),i=Ce(e,r.onScrollButtonChange);return st(()=>{if(s.viewport&&s.isPositioned){let c=function(){const d=l.scrollTop>0;o(d)};const l=s.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[s.viewport,s.isPositioned]),n?t.jsx(Pi,{...a,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=s;c&&l&&(c.scrollTop=c.scrollTop-l.offsetHeight)}}):null});Si.displayName=Kr;var Jr="SelectScrollDownButton",Ci=p.forwardRef((a,e)=>{const s=Tt(Jr,a.__scopeSelect),r=Sa(Jr,a.__scopeSelect),[n,o]=p.useState(!1),i=Ce(e,r.onScrollButtonChange);return st(()=>{if(s.viewport&&s.isPositioned){let c=function(){const d=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<d;o(u)};const l=s.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[s.viewport,s.isPositioned]),n?t.jsx(Pi,{...a,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=s;c&&l&&(c.scrollTop=c.scrollTop+l.offsetHeight)}}):null});Ci.displayName=Jr;var Pi=p.forwardRef((a,e)=>{const{__scopeSelect:s,onAutoScroll:r,...n}=a,o=Tt("SelectScrollButton",s),i=p.useRef(null),c=hr(s),l=p.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return p.useEffect(()=>()=>l(),[l]),st(()=>{var u;const d=c().find(h=>h.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[c]),t.jsx(de.div,{"aria-hidden":!0,...n,ref:e,style:{flexShrink:0,...n.style},onPointerDown:he(n.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:he(n.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:he(n.onPointerLeave,()=>{l()})})}),hm="SelectSeparator",fm=p.forwardRef((a,e)=>{const{__scopeSelect:s,...r}=a;return t.jsx(de.div,{"aria-hidden":!0,...r,ref:e})});fm.displayName=hm;var Zr="SelectArrow",mm=p.forwardRef((a,e)=>{const{__scopeSelect:s,...r}=a,n=fr(s),o=Et(Zr,s),i=Tt(Zr,s);return o.open&&i.position==="popper"?t.jsx(wl,{...n,...r,ref:e}):null});mm.displayName=Zr;var gm="SelectBubbleInput",Ei=p.forwardRef(({__scopeSelect:a,value:e,...s},r)=>{const n=p.useRef(null),o=Ce(r,n),i=Hf(e);return p.useEffect(()=>{const c=n.current;if(!c)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==e&&u){const h=new Event("change",{bubbles:!0});u.call(c,e),c.dispatchEvent(h)}},[i,e]),t.jsx(de.select,{...s,style:{...oi,...s.style},ref:o,defaultValue:e})});Ei.displayName=gm;function Ti(a){return a===""||a===void 0}function Ai(a){const e=kt(a),s=p.useRef(""),r=p.useRef(0),n=p.useCallback(i=>{const c=s.current+i;e(c),function l(d){s.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(c)},[e]),o=p.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,n,o]}function Ri(a,e,s){const n=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,o=s?a.indexOf(s):-1;let i=pm(a,Math.max(o,0));n.length===1&&(i=i.filter(d=>d!==s));const l=i.find(d=>d.textValue.toLowerCase().startsWith(n.toLowerCase()));return l!==s?l:void 0}function pm(a,e){return a.map((s,r)=>a[(e+r)%a.length])}var xm=ii,vm=ci,bm=ui,ym=hi,wm=fi,jm=mi,_m=vi,Nm=ji,km=_i,Sm=ki,Cm=Si,Pm=Ci;function Ut({...a}){return t.jsx(xm,{"data-slot":"select",...a})}function zt({...a}){return t.jsx(bm,{"data-slot":"select-value",...a})}function Bt({className:a,size:e="default",children:s,...r}){return t.jsxs(vm,{"data-slot":"select-trigger","data-size":e,className:re("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...r,children:[s,t.jsx(ym,{asChild:!0,children:t.jsx(sa,{className:"size-4 opacity-50"})})]})}function Ft({className:a,children:e,position:s="popper",...r}){return t.jsx(wm,{children:t.jsxs(jm,{"data-slot":"select-content",className:re("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:s,...r,children:[t.jsx(Em,{}),t.jsx(_m,{className:re("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),t.jsx(Tm,{})]})})}function mt({className:a,children:e,...s}){return t.jsxs(Nm,{"data-slot":"select-item",className:re("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...s,children:[t.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:t.jsx(Sm,{children:t.jsx(jn,{className:"size-4"})})}),t.jsx(km,{children:e})]})}function Em({className:a,...e}){return t.jsx(Cm,{"data-slot":"select-scroll-up-button",className:re("flex cursor-default items-center justify-center py-1",a),...e,children:t.jsx(jl,{className:"size-4"})})}function Tm({className:a,...e}){return t.jsx(Pm,{"data-slot":"select-scroll-down-button",className:re("flex cursor-default items-center justify-center py-1",a),...e,children:t.jsx(sa,{className:"size-4"})})}function Am({onClose:a}){const[e,s]=p.useState([]),[r,n]=p.useState(!0),[o,i]=p.useState(!1),[c,l]=p.useState(null),[d,u]=p.useState(null),[h,v]=p.useState(null),f=["Harshada","Archana"],j=["All Levels","Beginner","Intermediate","Advanced"],y=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}];p.useEffect(()=>{x()},[]);const x=async()=>{try{n(!0),u(null);const N=await Re.getAllClasses();s(N)}catch(N){console.error("Error loading classes:",N),u("Failed to load classes. Please try again.")}finally{n(!1)}},b=async N=>{try{u(null),await Re.createClass(N),v("Class added successfully!"),i(!1),x(),setTimeout(()=>v(null),3e3)}catch(D){console.error("Error adding class:",D),u("Failed to add class. Please try again.")}},m=async(N,D)=>{try{u(null),await Re.updateClass(N,D),v("Class updated successfully!"),l(null),x(),setTimeout(()=>v(null),3e3)}catch(M){console.error("Error updating class:",M),u("Failed to update class. Please try again.")}},g=async N=>{if(confirm("Are you sure you want to delete this class? This action cannot be undone."))try{u(null),await Re.deleteClass(N),v("Class deleted successfully!"),x(),setTimeout(()=>v(null),3e3)}catch(D){console.error("Error deleting class:",D),u("Failed to delete class. Please try again.")}},_=async(N,D)=>{try{u(null),await Re.updateClass(N,{is_active:!D}),v(`Class ${D?"deactivated":"activated"} successfully!`),x(),setTimeout(()=>v(null),3e3)}catch(M){console.error("Error toggling class status:",M),u("Failed to update class status. Please try again.")}},S=N=>{const[D,M]=N.split(":"),Z=parseInt(D,10),Q=Z>=12?"PM":"AM";return`${Z%12||12}:${M} ${Q}`},R=N=>{var D;return((D=y.find(M=>M.value===N))==null?void 0:D.label)||"Unknown"};return r?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),t.jsx("p",{className:"text-muted-foreground mt-2",children:"Loading classes..."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-heading",children:"Class Schedule Management"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage your yoga class schedule. Add, edit, or remove classes as needed."})]}),t.jsxs(ct,{open:o,onOpenChange:i,children:[t.jsx(lf,{asChild:!0,children:t.jsxs($,{children:[t.jsx(As,{className:"w-4 h-4 mr-2"}),"Add Class"]})}),t.jsxs(dt,{children:[t.jsxs(ut,{children:[t.jsx(ht,{children:"Add New Class"}),t.jsx(ft,{children:"Create a new recurring class template that will be used to generate class instances."})]}),t.jsx(Rm,{teachers:f,levels:j,daysOfWeek:y,onAddClass:b,onClose:()=>i(!1)})]})]})]}),d&&t.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[t.jsx(ra,{className:"w-4 h-4"}),d]}),h&&t.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700",children:[t.jsx(Wt,{className:"w-4 h-4"}),h]}),t.jsx("div",{className:"grid gap-4",children:e.length===0?t.jsx(U,{children:t.jsxs(F,{className:"text-center py-8",children:[t.jsx(De,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),t.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No Classes Yet"}),t.jsx("p",{className:"text-muted-foreground mb-4",children:"Get started by adding your first yoga class to the schedule."}),t.jsxs($,{onClick:()=>i(!0),children:[t.jsx(As,{className:"w-4 h-4 mr-2"}),"Add Your First Class"]})]})}):e.map(N=>t.jsx(U,{className:N.is_active?"":"opacity-60",children:t.jsx(F,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("h3",{className:"font-semibold text-lg",children:N.name}),t.jsx(_e,{variant:N.is_active?"default":"secondary",className:N.is_active?"bg-green-600 hover:bg-green-700":"",children:N.is_active?"Active":"Inactive"}),t.jsx(_e,{variant:"outline",className:"text-xs",children:N.level})]}),t.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted-foreground",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(De,{className:"w-3 h-3"}),R(N.day_of_week)]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(qt,{className:"w-3 h-3"}),S(N.start_time)]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(et,{className:"w-3 h-3"}),N.teacher]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(qt,{className:"w-3 h-3"}),N.duration," min"]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(et,{className:"w-3 h-3"}),"Max ",N.max_students," students"]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($,{size:"sm",variant:"outline",onClick:()=>l(N),children:t.jsx(Sn,{className:"w-4 h-4"})}),t.jsx($,{size:"sm",variant:"outline",onClick:()=>_(N.id,N.is_active),children:N.is_active?"Deactivate":"Activate"}),t.jsx($,{size:"sm",variant:"outline",onClick:()=>g(N.id),className:"text-red-600 hover:text-red-700",children:t.jsx(Cn,{className:"w-4 h-4"})})]})]})})},N.id))}),c&&t.jsx(ct,{open:!!c,onOpenChange:()=>l(null),children:t.jsxs(dt,{children:[t.jsxs(ut,{children:[t.jsx(ht,{children:"Edit Class"}),t.jsx(ft,{children:"Update the class template details. Changes will apply to future class instances."})]}),t.jsx(Im,{classData:c,teachers:f,levels:j,daysOfWeek:y,onUpdateClass:m,onClose:()=>l(null)})]})})]})}function Rm({teachers:a,levels:e,daysOfWeek:s,onAddClass:r,onClose:n}){const[o,i]=p.useState({name:"",teacher:"",day_of_week:1,start_time:"",duration:"60 min",level:"All Levels",max_students:10,is_active:!0}),c=l=>{if(l.preventDefault(),!o.name||!o.teacher||!o.start_time){alert("Please fill in all required fields");return}r(o)};return t.jsxs("form",{onSubmit:c,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(J,{htmlFor:"name",children:"Class Name *"}),t.jsx(ie,{id:"name",value:o.name,onChange:l=>i(d=>({...d,name:l.target.value})),placeholder:"e.g., Morning Flow",required:!0})]}),t.jsxs("div",{children:[t.jsx(J,{htmlFor:"teacher",children:"Teacher *"}),t.jsxs(Ut,{value:o.teacher,onValueChange:l=>i(d=>({...d,teacher:l})),children:[t.jsx(Bt,{children:t.jsx(zt,{placeholder:"Select teacher"})}),t.jsx(Ft,{children:a.map(l=>t.jsx(mt,{value:l,children:l},l))})]})]}),t.jsxs("div",{children:[t.jsx(J,{htmlFor:"day_of_week",children:"Day of Week *"}),t.jsxs(Ut,{value:o.day_of_week.toString(),onValueChange:l=>i(d=>({...d,day_of_week:parseInt(l)})),children:[t.jsx(Bt,{children:t.jsx(zt,{})}),t.jsx(Ft,{children:s.map(l=>t.jsx(mt,{value:l.value.toString(),children:l.label},l.value))})]})]}),t.jsxs("div",{children:[t.jsx(J,{htmlFor:"start_time",children:"Start Time *"}),t.jsx(ie,{id:"start_time",type:"time",value:o.start_time,onChange:l=>i(d=>({...d,start_time:l.target.value})),required:!0})]}),t.jsxs("div",{children:[t.jsx(J,{htmlFor:"duration",children:"Duration (minutes)"}),t.jsx(ie,{id:"duration",type:"number",value:o.duration.replace(" min",""),onChange:l=>i(d=>({...d,duration:`${l.target.value} min`})),min:"30",max:"120"})]}),t.jsxs("div",{children:[t.jsx(J,{htmlFor:"level",children:"Level"}),t.jsxs(Ut,{value:o.level,onValueChange:l=>i(d=>({...d,level:l})),children:[t.jsx(Bt,{children:t.jsx(zt,{})}),t.jsx(Ft,{children:e.map(l=>t.jsx(mt,{value:l,children:l},l))})]})]}),t.jsxs("div",{children:[t.jsx(J,{htmlFor:"max_students",children:"Max Students"}),t.jsx(ie,{id:"max_students",type:"number",value:o.max_students,onChange:l=>i(d=>({...d,max_students:parseInt(l.target.value)})),min:"1",max:"20"})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx($,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),t.jsx($,{type:"submit",children:"Add Class"})]})]})}function Im({classData:a,teachers:e,levels:s,daysOfWeek:r,onUpdateClass:n,onClose:o}){const[i,c]=p.useState({name:a.name,teacher:a.teacher,day_of_week:a.day_of_week,start_time:a.start_time,duration:a.duration,level:a.level,max_students:a.max_students,is_active:a.is_active}),l=d=>{d.preventDefault(),n(a.id,i)};return t.jsxs("form",{onSubmit:l,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(J,{htmlFor:"name",children:"Class Name"}),t.jsx(ie,{id:"name",value:i.name,onChange:d=>c(u=>({...u,name:d.target.value})),required:!0})]}),t.jsxs("div",{children:[t.jsx(J,{htmlFor:"teacher",children:"Teacher"}),t.jsxs(Ut,{value:i.teacher,onValueChange:d=>c(u=>({...u,teacher:d})),children:[t.jsx(Bt,{children:t.jsx(zt,{})}),t.jsx(Ft,{children:e.map(d=>t.jsx(mt,{value:d,children:d},d))})]})]}),t.jsxs("div",{children:[t.jsx(J,{htmlFor:"day_of_week",children:"Day of Week"}),t.jsxs(Ut,{value:i.day_of_week.toString(),onValueChange:d=>c(u=>({...u,day_of_week:parseInt(d)})),children:[t.jsx(Bt,{children:t.jsx(zt,{})}),t.jsx(Ft,{children:r.map(d=>t.jsx(mt,{value:d.value.toString(),children:d.label},d.value))})]})]}),t.jsxs("div",{children:[t.jsx(J,{htmlFor:"start_time",children:"Start Time"}),t.jsx(ie,{id:"start_time",type:"time",value:i.start_time,onChange:d=>c(u=>({...u,start_time:d.target.value})),required:!0})]}),t.jsxs("div",{children:[t.jsx(J,{htmlFor:"duration",children:"Duration (minutes)"}),t.jsx(ie,{id:"duration",type:"number",value:i.duration.replace(" min",""),onChange:d=>c(u=>({...u,duration:`${d.target.value} min`})),min:"30",max:"120"})]}),t.jsxs("div",{children:[t.jsx(J,{htmlFor:"level",children:"Level"}),t.jsxs(Ut,{value:i.level,onValueChange:d=>c(u=>({...u,level:d})),children:[t.jsx(Bt,{children:t.jsx(zt,{})}),t.jsx(Ft,{children:s.map(d=>t.jsx(mt,{value:d,children:d},d))})]})]}),t.jsxs("div",{children:[t.jsx(J,{htmlFor:"max_students",children:"Max Students"}),t.jsx(ie,{id:"max_students",type:"number",value:i.max_students,onChange:d=>c(u=>({...u,max_students:parseInt(d.target.value)})),min:"1",max:"20"})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx($,{type:"button",variant:"outline",onClick:o,children:"Cancel"}),t.jsx($,{type:"submit",children:"Update Class"})]})]})}const Om=void 0,$m=void 0,Xr=ha(Om,$m),He={success:a=>alert(`✅ ${a}`),error:a=>alert(`❌ ${a}`)};function Dm({onClose:a}){const[e,s]=p.useState([]),[r,n]=p.useState([]),[o,i]=p.useState(!0),[c,l]=p.useState(!1),[d,u]=p.useState(!1),[h,v]=p.useState(null),[f,j]=p.useState(null),[y,x]=p.useState(null),[b,m]=p.useState(""),[g,_]=p.useState({}),[S,R]=p.useState(new Set);p.useEffect(()=>{N()},[]);const N=async()=>{try{i(!0),j(null);const[I,P]=await Promise.all([Re.getAllClassInstances(),Re.getAllClasses()]);console.log("📊 Loaded sessions:",I.map(H=>{var W;return{id:H.id,class_name:(W=H.class)==null?void 0:W.name,class_date:H.class_date}})),console.log("📊 Loaded classes:",P.map(H=>({id:H.id,name:H.name}))),s(I),n(P)}catch(I){console.error("Error loading data:",I),j("Failed to load sessions. Please try again.")}finally{i(!1)}},D=async I=>{try{console.log("🔍 Fetching bookings for session:",I);const{data:P,error:H}=await Xr.from("user_booked_classes").select("*").eq("class_instance_id",I);console.log("📊 All bookings for this session:",P),console.log("📊 All bookings error:",H);const{data:W,error:w}=await Xr.from("user_booked_classes").select(`
          id,
          user_id,
          class_name,
          teacher,
          class_date,
          class_time,
          booked_at,
          class_instance_id,
          is_cancelled,
          user:users(email, name)
        `).eq("class_instance_id",I).eq("is_cancelled",!1).order("booked_at",{ascending:!1});if(w)throw console.error("❌ Error fetching session bookings:",w),w;console.log("✅ Found active bookings:",W),console.log("📊 Total bookings (including cancelled):",(P==null?void 0:P.length)||0),console.log("📊 Active bookings:",(W==null?void 0:W.length)||0),_(E=>({...E,[I]:W||[]}))}catch(P){console.error("Error fetching session bookings:",P)}},M=async I=>{console.log("🔄 Toggling session expansion for:",I);const P=S.has(I);P||await D(I),R(H=>{const W=new Set(H);return P?W.delete(I):W.add(I),W})},Z=async I=>{try{const P=r.find(C=>C.id===I.classId);if(!P)throw new Error("Class template not found");const W=(C=>{const[O,L,k]=C.split("-").map(Number),Y=new Date(O,L-1,k),K=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][Y.getMonth()],z=Y.getDate();return console.log("🔍 Date conversion:",{input:C,parsed:{year:O,month:L,day:k},output:`${K} ${z}`}),`${K} ${z}`})(I.class_date),w=P.start_time.substring(0,5),E=parseInt(P.duration.replace(" min",""));await Re.createClassInstance(I.classId,I.class_date),He.success("Session created successfully! Zoom meetings will be created when students book."),N(),l(!1)}catch(P){console.error("Error adding session:",P),He.error(`Failed to add session: ${P.message}`)}},Q=async(I,P)=>{try{console.log("🔍 Updating session:",{instanceId:I,updates:P,class_date:P.class_date}),await Re.updateClassInstance(I,P),He.success("Session updated successfully!"),N(),v(null)}catch(H){console.error("Error updating session:",H),He.error(`Failed to update session: ${H.message}`)}},q=async I=>{if(confirm("Are you sure you want to delete this session? This action cannot be undone."))try{await Re.deleteClassInstance(I),He.success("Session deleted successfully!"),N()}catch(P){console.error("Error deleting session:",P),He.error(`Failed to delete session: ${P.message}`)}},T=async(I,P)=>{try{await Re.updateClassInstance(I,{is_cancelled:!P}),He.success(`Session ${P?"restored":"cancelled"} successfully!`),N()}catch(H){console.error("Error toggling session status:",H),He.error(`Failed to update session status: ${H.message}`)}},ue=async I=>{try{const P=new Date(I.startDate),H=[];for(let W=0;W<7;W++){const w=new Date(P);w.setDate(P.getDate()+W);const E=`${w.getFullYear()}-${String(w.getMonth()+1).padStart(2,"0")}-${String(w.getDate()).padStart(2,"0")}`,C=w.getDay();console.log("🔍 Quick add week date:",{original:P,dayOffset:W,currentDate:w.toDateString(),dateStr:E,dayOfWeek:C});const O=r.filter(L=>L.day_of_week===C&&I.selectedClasses.includes(L.id));for(const L of O)H.push({classId:L.id,class_date:E})}for(const W of H){const w=r.find(k=>k.id===W.classId);if(!w)continue;const C=(k=>{const Y=new Date(k),K=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][Y.getMonth()],z=Y.getDate();return`${K} ${z}`})(W.class_date),O=w.start_time.substring(0,5),L=parseInt(w.duration.replace(" min",""));await Re.createClassInstance(W.classId,W.class_date)}He.success(`Successfully created ${H.length} sessions for the week!`),N(),u(!1)}catch(P){console.error("Error adding week:",P),He.error(`Failed to add week: ${P.message}`)}},be=I=>{const[P,H,W]=I.split("-").map(Number),w=new Date(P,H-1,W);return console.log("🔍 Formatting date:",{input:I,parsed:{year:P,month:H,day:W},result:w.toDateString()}),w.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},ce=I=>{const[P,H]=I.split(":"),W=parseInt(P),w=W>=12?"PM":"AM";return`${W%12||12}:${H} ${w}`},fe=e.filter(I=>b?I.class_date.includes(b):!0);return o?t.jsx("div",{className:"text-center py-8",children:"Loading sessions..."}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-heading",children:"Manage Class Sessions"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(ie,{type:"date",placeholder:"Filter by date",value:b,onChange:I=>m(I.target.value),className:"w-48"}),t.jsxs($,{onClick:()=>l(!0),children:[t.jsx(As,{className:"w-4 h-4 mr-2"}),"Add Session"]}),t.jsxs($,{onClick:()=>u(!0),variant:"outline",children:[t.jsx(De,{className:"w-4 h-4 mr-2"}),"Quick Add Week"]})]})]}),f&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-2",children:[t.jsx(ra,{className:"w-5 h-5 text-red-500"}),t.jsx("span",{className:"text-red-700",children:f})]}),y&&t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-2",children:[t.jsx(Wt,{className:"w-5 h-5 text-green-500"}),t.jsx("span",{className:"text-green-700",children:y})]}),t.jsx("div",{className:"grid gap-4",children:fe.length===0?t.jsx(U,{children:t.jsxs(F,{className:"text-center py-8",children:[t.jsx("p",{className:"text-muted-foreground mb-4",children:"No sessions found."}),t.jsx($,{onClick:()=>l(!0),children:"Create Your First Session"})]})}):fe.map(I=>{var P,H,W,w,E,C;return t.jsxs(U,{children:[t.jsxs(ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(oe,{className:"text-lg font-medium",children:((P=I.class)==null?void 0:P.name)||"Unknown Class"}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(_e,{className:I.is_cancelled?"bg-red-500":"bg-green-500",children:I.is_cancelled?"Cancelled":"Active"})})]}),t.jsxs(F,{children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(De,{className:"w-4 h-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm",children:be(I.class_date)})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(qt,{className:"w-4 h-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm",children:ce(((H=I.class)==null?void 0:H.start_time)||"00:00")})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(et,{className:"w-4 h-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm",children:((W=I.class)==null?void 0:W.teacher)||"Unknown"})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("span",{className:"text-sm text-muted-foreground",children:((w=I.class)==null?void 0:w.duration)||"60 min"})})]}),I.zoom_meeting_id&&t.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 mb-4",children:[t.jsx("h4",{className:"font-medium mb-2",children:"Zoom Meeting Details"}),t.jsxs("div",{className:"space-y-1 text-sm",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Meeting ID:"})," ",I.zoom_meeting_id]}),I.zoom_password&&t.jsxs("p",{children:[t.jsx("strong",{children:"Password:"})," ",I.zoom_password]}),I.zoom_link&&t.jsxs("p",{children:[t.jsx("strong",{children:"Join Link:"}),t.jsx("a",{href:I.zoom_link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline ml-1",children:"Click to join"})]})]})]}),t.jsxs("div",{className:"border-t pt-4 mt-4",children:[t.jsxs($,{variant:"ghost",size:"sm",onClick:()=>M(I.id),className:"w-full justify-between p-0 h-auto",children:[t.jsxs("span",{className:"font-medium",children:["Bookings (",((E=g[I.id])==null?void 0:E.length)||0,")"]}),t.jsx("span",{className:"text-muted-foreground",children:S.has(I.id)?"▼":"▶"})]}),S.has(I.id)&&t.jsx("div",{className:"mt-3 space-y-2",children:((C=g[I.id])==null?void 0:C.length)>0?t.jsx("div",{className:"space-y-1",children:g[I.id].map(O=>{var L;return t.jsx("div",{className:"p-2 bg-muted/50 rounded-lg",children:t.jsx("span",{className:"font-medium",children:((L=O.user)==null?void 0:L.name)||"Unknown User"})},O.id)})}):t.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[t.jsx(et,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),t.jsx("p",{children:"No bookings yet"})]})})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs($,{size:"sm",variant:"outline",onClick:()=>v(I),children:[t.jsx(Sn,{className:"w-4 h-4 mr-2"}),"Edit"]}),t.jsx($,{size:"sm",variant:"outline",onClick:()=>T(I.id,I.is_cancelled),children:I.is_cancelled?"Restore":"Cancel"}),t.jsxs($,{size:"sm",variant:"destructive",onClick:()=>q(I.id),children:[t.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]},I.id)})}),c&&t.jsx(Lm,{classes:r,onAddSession:Z,onClose:()=>l(!1)}),h&&t.jsx(Mm,{session:h,classes:r,onUpdateSession:Q,onClose:()=>v(null)}),d&&t.jsx(Um,{classes:r,onAddWeek:ue,onClose:()=>u(!1)})]})}function Lm({classes:a,onAddSession:e,onClose:s}){const[r,n]=p.useState({classId:"",class_date:""}),o=i=>{i.preventDefault(),e(r)};return t.jsx(ct,{open:!0,onOpenChange:s,children:t.jsxs(dt,{className:"sm:max-w-2xl",children:[t.jsxs(ut,{children:[t.jsx(ht,{children:"Add New Session"}),t.jsx(ft,{children:"Create a new class session for a specific date."})]}),t.jsxs("form",{onSubmit:o,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(J,{htmlFor:"classId",children:"Class"}),t.jsxs("select",{id:"classId",value:r.classId,onChange:i=>n({...r,classId:i.target.value}),className:"w-full p-2 border rounded-md",required:!0,children:[t.jsx("option",{value:"",children:"Select a class"}),a.map(i=>t.jsxs("option",{value:i.id,children:[i.name," - ",i.teacher," (",i.start_time,")"]},i.id))]})]}),t.jsxs("div",{children:[t.jsx(J,{htmlFor:"class_date",children:"Date"}),t.jsx(ie,{id:"class_date",type:"date",value:r.class_date,onChange:i=>n({...r,class_date:i.target.value}),required:!0})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),t.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Zoom Meeting"})]}),t.jsx("p",{className:"text-sm text-blue-700",children:"Zoom meetings will be automatically created when students book this class session."})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx($,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsx($,{type:"submit",children:"Add Session"})]})]})]})})}function Mm({session:a,classes:e,onUpdateSession:s,onClose:r}){var c,l,d;const[n,o]=p.useState({class_date:a.class_date,is_cancelled:a.is_cancelled}),i=u=>{u.preventDefault(),console.log("🔍 Edit Session Debug:",{originalSessionDate:a.class_date,formDataDate:n.class_date,sessionId:a.id}),s(a.id,n)};return t.jsx(ct,{open:!0,onOpenChange:r,children:t.jsxs(dt,{className:"sm:max-w-2xl",children:[t.jsxs(ut,{children:[t.jsx(ht,{children:"Edit Session"}),t.jsx(ft,{children:"Update the session details and Zoom meeting information."})]}),t.jsxs("form",{onSubmit:i,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(J,{children:"Class"}),t.jsxs("div",{className:"p-2 bg-muted rounded-md",children:[(c=a.class)==null?void 0:c.name," - ",(l=a.class)==null?void 0:l.teacher," (",(d=a.class)==null?void 0:d.start_time,")"]})]}),t.jsxs("div",{children:[t.jsx(J,{htmlFor:"class_date",children:"Date"}),t.jsx(ie,{id:"class_date",type:"date",value:n.class_date,onChange:u=>o({...n,class_date:u.target.value}),required:!0})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),t.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Zoom Meeting"})]}),t.jsx("p",{className:"text-sm text-blue-700",children:"Zoom meetings are automatically created when students book this class session."}),a.zoom_meeting_id&&t.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:[t.jsxs("p",{children:["Meeting ID: ",a.zoom_meeting_id]}),a.zoom_link&&t.jsxs("p",{children:["Join Link: ",t.jsx("a",{href:a.zoom_link,target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Click to join"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",id:"is_cancelled",checked:n.is_cancelled,onChange:u=>o({...n,is_cancelled:u.target.checked})}),t.jsx(J,{htmlFor:"is_cancelled",children:"Session is cancelled"})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx($,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),t.jsx($,{type:"submit",children:"Update Session"})]})]})]})})}function Um({classes:a,onAddWeek:e,onClose:s}){const[r,n]=p.useState(""),[o,i]=p.useState([]),c=h=>{if(h.preventDefault(),!r||o.length===0){He.error("Please select a start date and at least one class");return}e({startDate:r,selectedClasses:o})},l=h=>{i(v=>v.includes(h)?v.filter(f=>f!==h):[...v,h])},d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=a.reduce((h,v)=>{const f=d[v.day_of_week];return h[f]||(h[f]=[]),h[f].push(v),h},{});return t.jsx(ct,{open:!0,onOpenChange:s,children:t.jsxs(dt,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[t.jsxs(ut,{children:[t.jsx(ht,{children:"Quick Add Week"}),t.jsx(ft,{children:"Select a start date and classes to automatically create sessions for the entire week."})]}),t.jsxs("form",{onSubmit:c,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx(J,{htmlFor:"startDate",children:"Week Start Date (Monday)"}),t.jsx(ie,{id:"startDate",type:"date",value:r,onChange:h=>n(h.target.value),required:!0}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select the Monday of the week you want to add classes for"})]}),t.jsxs("div",{children:[t.jsx(J,{children:"Select Classes to Add"}),t.jsx("div",{className:"grid gap-4 md:grid-cols-2 mt-2",children:Object.entries(u).map(([h,v])=>t.jsxs(U,{children:[t.jsx(ne,{className:"pb-2",children:t.jsx(oe,{className:"text-base",children:h})}),t.jsx(F,{className:"space-y-2",children:v.map(f=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",id:f.id,checked:o.includes(f.id),onChange:()=>l(f.id),className:"rounded"}),t.jsxs("label",{htmlFor:f.id,className:"text-sm cursor-pointer flex-1",children:[t.jsx("div",{className:"font-medium",children:f.name}),t.jsxs("div",{className:"text-xs text-muted-foreground",children:[f.start_time," • ",f.teacher," • ",f.level]})]})]},f.id))})]},h))})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx($,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),t.jsxs($,{type:"submit",children:["Add Week (",o.length," classes selected)"]})]})]})]})})}function zm(){const[a,e]=p.useState([]),[s,r]=p.useState(!0),[n,o]=p.useState(null),[i,c]=p.useState("active"),[l,d]=p.useState(""),[u,h]=p.useState("");p.useEffect(()=>{v()},[i]);const v=async()=>{try{r(!0),o(null),console.log("📊 Loading bookings with filter:",i);let g=Xr.from("user_booked_classes").select(`
          id,
          user_id,
          class_name,
          teacher,
          class_date,
          class_time,
          booked_at,
          is_cancelled,
          cancelled_at,
          class_instance_id,
          user:users(name, email)
        `).order("booked_at",{ascending:!1});i==="active"?g=g.eq("is_cancelled",!1):i==="cancelled"&&(g=g.eq("is_cancelled",!0));const{data:_,error:S}=await g;if(S)throw console.error("❌ Error loading bookings:",S),S;console.log("✅ Loaded bookings:",(_==null?void 0:_.length)||0);const R=(_||[]).map(N=>{var D;return{...N,user:((D=N.user)==null?void 0:D[0])||null}});e(R)}catch(g){console.error("Error loading bookings:",g),o("Failed to load bookings")}finally{r(!1)}},f=a.filter(g=>{var R,N,D,M;const _=g.class_name.toLowerCase().includes(l.toLowerCase())||g.teacher.toLowerCase().includes(l.toLowerCase())||((N=(R=g.user)==null?void 0:R.name)==null?void 0:N.toLowerCase().includes(l.toLowerCase()))||((M=(D=g.user)==null?void 0:D.email)==null?void 0:M.toLowerCase().includes(l.toLowerCase())),S=!u||g.class_date===u;return _&&S}),j=g=>{const[_,S,R]=g.split("-").map(Number);return new Date(_,S-1,R).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})},y=g=>{const[_,S]=g.split(":"),R=parseInt(_),N=R>=12?"PM":"AM";return`${R%12||12}:${S} ${N}`},x=g=>new Date(g).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),b=()=>{const g=[["Class Name","Teacher","Date","Time","Student Name","Student Email","Booked At","Status"].join(","),...f.map(N=>{var D,M;return[N.class_name,N.teacher,N.class_date,N.class_time,((D=N.user)==null?void 0:D.name)||"Unknown",((M=N.user)==null?void 0:M.email)||"Unknown",x(N.booked_at),N.is_cancelled?"Cancelled":"Active"].join(",")})].join(`
`),_=new Blob([g],{type:"text/csv"}),S=window.URL.createObjectURL(_),R=document.createElement("a");R.href=S,R.download=`bookings-${new Date().toISOString().split("T")[0]}.csv`,R.click(),window.URL.revokeObjectURL(S)},m={total:a.length,active:a.filter(g=>!g.is_cancelled).length,cancelled:a.filter(g=>g.is_cancelled).length,today:a.filter(g=>g.class_date===new Date().toISOString().split("T")[0]).length};return s?t.jsxs("div",{className:"flex items-center justify-center p-8",children:[t.jsx($a,{className:"w-6 h-6 animate-spin mr-2"}),"Loading bookings..."]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Class Analytics"}),t.jsx("p",{className:"text-muted-foreground",children:"View all class bookings and student details"})]}),t.jsxs($,{onClick:b,variant:"outline",size:"sm",children:[t.jsx(_l,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(U,{children:t.jsx(F,{className:"p-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(et,{className:"w-4 h-4 text-blue-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Bookings"}),t.jsx("p",{className:"text-2xl font-bold",children:m.total})]})]})})}),t.jsx(U,{children:t.jsx(F,{className:"p-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(et,{className:"w-4 h-4 text-green-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active"}),t.jsx("p",{className:"text-2xl font-bold",children:m.active})]})]})})}),t.jsx(U,{children:t.jsx(F,{className:"p-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(et,{className:"w-4 h-4 text-red-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Cancelled"}),t.jsx("p",{className:"text-2xl font-bold",children:m.cancelled})]})]})})}),t.jsx(U,{children:t.jsx(F,{className:"p-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(De,{className:"w-4 h-4 text-purple-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Today"}),t.jsx("p",{className:"text-2xl font-bold",children:m.today})]})]})})})]}),t.jsx(U,{children:t.jsx(F,{className:"p-4",children:t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsx(ie,{placeholder:"Search by class, teacher, or student...",value:l,onChange:g=>d(g.target.value),className:"w-full"})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(Ut,{value:i,onValueChange:g=>c(g),children:[t.jsx(Bt,{className:"w-32",children:t.jsx(zt,{})}),t.jsxs(Ft,{children:[t.jsx(mt,{value:"all",children:"All"}),t.jsx(mt,{value:"active",children:"Active"}),t.jsx(mt,{value:"cancelled",children:"Cancelled"})]})]}),t.jsx(ie,{type:"date",value:u,onChange:g=>h(g.target.value),className:"w-40",placeholder:"Filter by date"}),t.jsx($,{onClick:v,variant:"outline",size:"sm",children:t.jsx($a,{className:"w-4 h-4"})})]})]})})}),t.jsxs("div",{className:"space-y-4",children:[n&&t.jsx(U,{className:"border-red-200 bg-red-50",children:t.jsx(F,{className:"p-4",children:t.jsx("p",{className:"text-red-600",children:n})})}),f.length===0?t.jsx(U,{children:t.jsxs(F,{className:"p-8 text-center",children:[t.jsx(et,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No bookings found"}),t.jsx("p",{className:"text-muted-foreground",children:l||u?"Try adjusting your search filters":"No bookings have been made yet"})]})}):f.map(g=>{var _,S;return t.jsx(U,{className:g.is_cancelled?"opacity-60":"",children:t.jsx(F,{className:"p-4",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("h3",{className:"text-lg font-semibold",children:g.class_name}),t.jsx(_e,{variant:g.is_cancelled?"destructive":"default",children:g.is_cancelled?"Cancelled":"Active"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ct,{className:"w-4 h-4 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:((_=g.user)==null?void 0:_.name)||"Unknown User"}),t.jsx("p",{className:"text-muted-foreground",children:((S=g.user)==null?void 0:S.email)||"No email"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(De,{className:"w-4 h-4 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:j(g.class_date)}),t.jsx("p",{className:"text-muted-foreground",children:y(g.class_time)})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(et,{className:"w-4 h-4 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:g.teacher}),t.jsx("p",{className:"text-muted-foreground",children:"Instructor"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(qt,{className:"w-4 h-4 text-muted-foreground"}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-medium",children:["Booked ",x(g.booked_at)]}),g.cancelled_at&&t.jsxs("p",{className:"text-muted-foreground",children:["Cancelled ",x(g.cancelled_at)]})]})]})]})]})})})},g.id)})]})]})}function Bm(){const[a,e]=p.useState(!1),[s,r]=p.useState(!1),[n,o]=p.useState(null),i=async()=>{try{e(!0),o(null),console.log("🗄️ Testing database connection and creating sample classes...");const{data:c,error:l}=await ye.from("classes").select("*").limit(1);if(l){console.error("Cannot access classes table:",l),o(`Database access error: ${l.message}. Please check your Supabase setup and run the SQL script in database-rls-fix.sql`);return}const d=[{name:"Morning Flow",teacher:"Harshada",day_of_week:1,start_time:"08:00:00",duration:"60 min",level:"All Levels",max_students:10,is_active:!0},{name:"Evening Restore",teacher:"Archana",day_of_week:1,start_time:"18:00:00",duration:"60 min",level:"All Levels",max_students:10,is_active:!0},{name:"Morning Flow",teacher:"Harshada",day_of_week:2,start_time:"08:00:00",duration:"60 min",level:"All Levels",max_students:10,is_active:!0},{name:"Evening Restore",teacher:"Archana",day_of_week:2,start_time:"18:00:00",duration:"60 min",level:"All Levels",max_students:10,is_active:!0}],{error:u}=await ye.from("classes").insert(d);u&&console.log("Classes may already exist:",u.message),console.log("✅ Database connection successful!"),r(!0)}catch(c){console.error("Database initialization error:",c),o(c instanceof Error?c.message:"Unknown error occurred")}finally{e(!1)}};return t.jsxs(U,{className:"max-w-md mx-auto",children:[t.jsx(ne,{children:t.jsxs(oe,{className:"flex items-center gap-2",children:[t.jsx(Nl,{className:"w-5 h-5"}),"Database Setup"]})}),t.jsx(F,{className:"space-y-4",children:s?t.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[t.jsx(Wt,{className:"w-5 h-5"}),t.jsx("span",{children:"Database initialized successfully!"})]}):n?t.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[t.jsx(ra,{className:"w-5 h-5"}),t.jsxs("span",{children:["Error: ",n]})]}):t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Initialize the database with default class templates. This will create the necessary tables and populate them with your class schedule."}),t.jsx($,{onClick:i,disabled:a,className:"w-full",children:a?"Initializing...":"Initialize Database"})]})})]})}function Fm(){const[a,e]=p.useState(null),[s,r]=p.useState(!1),n=async()=>{r(!0),e(null);try{console.log("🧪 Testing Zoom API directly...");const i=await(await fetch("/.netlify/functions/create-zoom-meeting-fetch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({className:"Test Class",teacher:"Test Teacher",date:"2025-09-08",time:"6:00 pm",duration:60})})).json();console.log("🧪 Zoom API Response:",i),e(i)}catch(o){console.error("🧪 Zoom API Error:",o),e({error:o instanceof Error?o.message:String(o)})}finally{r(!1)}};return t.jsxs(U,{className:"w-full max-w-2xl",children:[t.jsx(ne,{children:t.jsx(oe,{children:"🧪 Zoom API Debug Test"})}),t.jsxs(F,{className:"space-y-4",children:[t.jsx($,{onClick:n,disabled:s,className:"w-full",children:s?"Testing...":"Test Zoom API"}),a&&t.jsxs("div",{className:"mt-4",children:[t.jsx("h3",{className:"font-semibold mb-2",children:"Result:"}),t.jsx("pre",{className:"bg-gray-100 p-4 rounded text-sm overflow-auto",children:JSON.stringify(a,null,2)})]})]})]})}function qm(){const[a,e]=p.useState(null),[s,r]=p.useState(!1),n=async()=>{r(!0),e(null);try{console.log("🧪 Testing booking process...");const o={id:"test-class-123",className:"Test Yoga Class",teacher:"Test Teacher",time:"6:00 pm"},i="2025-09-08";console.log("🎥 Testing Zoom meeting creation...");const l=await(await fetch("/.netlify/functions/create-zoom-meeting-fetch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({className:o.className,teacher:o.teacher,date:i,time:o.time,duration:60})})).json();console.log("🎥 Zoom API Response:",l),e({classItem:o,day:i,zoomData:l})}catch(o){console.error("🧪 Booking Test Error:",o),e({error:o instanceof Error?o.message:String(o)})}finally{r(!1)}};return t.jsxs(U,{className:"w-full max-w-2xl",children:[t.jsx(ne,{children:t.jsx(oe,{children:"🧪 Booking Process Test"})}),t.jsxs(F,{className:"space-y-4",children:[t.jsx($,{onClick:n,disabled:s,className:"w-full",children:s?"Testing...":"Test Booking Process"}),a&&t.jsxs("div",{className:"mt-4",children:[t.jsx("h3",{className:"font-semibold mb-2",children:"Result:"}),t.jsx("pre",{className:"bg-gray-100 p-4 rounded text-sm overflow-auto",children:JSON.stringify(a,null,2)})]})]})]})}function Wm(){const[a,e]=p.useState(null),[s,r]=p.useState(!1),n=async()=>{r(!0),e(null);try{console.log("🧪 Testing database operations..."),console.log("🧪 Test 1: Creating user...");const o=await le.createOrUpdateUser({email:"test@example.com",name:"Test User"});console.log("✅ User created:",o),console.log("🧪 Test 2: Updating user credits..."),await le.updateUserCredits(o.id,{single_classes:1,five_pack_classes:0,ten_pack_classes:0}),console.log("✅ Credits updated"),console.log("🧪 Test 3: Booking a class..."),await le.bookClass(o.id,{class_name:"Test Yoga Class",teacher:"Test Teacher",class_date:"2025-09-08",class_time:"6:00 pm",zoom_meeting_id:"test-123",zoom_password:"test123",zoom_link:"https://zoom.us/j/test123"}),console.log("✅ Class booked"),console.log("🧪 Test 4: Getting user credits...");const i=await le.getUserCredits(o.id);console.log("✅ Credits retrieved:",i),console.log("🧪 Test 5: Getting user booked classes...");const c=await le.getUserBookedClasses(o.id);console.log("✅ Booked classes retrieved:",c),e({success:!0,userRecord:o,credits:i,bookedClasses:c})}catch(o){console.error("🧪 Database Test Error:",o),e({success:!1,error:o instanceof Error?o.message:String(o)})}finally{r(!1)}};return t.jsxs(U,{className:"w-full max-w-2xl",children:[t.jsx(ne,{children:t.jsx(oe,{children:"🧪 Database Operations Test"})}),t.jsxs(F,{className:"space-y-4",children:[t.jsx($,{onClick:n,disabled:s,className:"w-full",children:s?"Testing...":"Test Database Operations"}),a&&t.jsxs("div",{className:"mt-4",children:[t.jsx("h3",{className:"font-semibold mb-2",children:"Result:"}),t.jsx("pre",{className:"bg-gray-100 p-4 rounded text-sm overflow-auto",children:JSON.stringify(a,null,2)})]})]})]})}var Ii="basil",Hm=function(e){return e===3?"v3":e},Oi="https://js.stripe.com",Vm="".concat(Oi,"/").concat(Ii,"/stripe.js"),Gm=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Ym=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var Km=function(e){return Gm.test(e)||Ym.test(e)},Jm=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Oi,'"]')),s=0;s<e.length;s++){var r=e[s];if(Km(r.src))return r}return null},yn=function(e){var s="",r=document.createElement("script");r.src="".concat(Vm).concat(s);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},Zm=function(e,s){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:s})},Ns=null,Ws=null,Hs=null,Xm=function(e){return function(s){e(new Error("Failed to load Stripe.js",{cause:s}))}},Qm=function(e,s){return function(){window.Stripe?e(window.Stripe):s(new Error("Stripe.js not available"))}},eg=function(e){return Ns!==null?Ns:(Ns=new Promise(function(s,r){if(typeof window>"u"||typeof document>"u"){s(null);return}if(window.Stripe){s(window.Stripe);return}try{var n=Jm();if(!(n&&e)){if(!n)n=yn(e);else if(n&&Hs!==null&&Ws!==null){var o;n.removeEventListener("load",Hs),n.removeEventListener("error",Ws),(o=n.parentNode)===null||o===void 0||o.removeChild(n),n=yn(e)}}Hs=Qm(s,r),Ws=Xm(r),n.addEventListener("load",Hs),n.addEventListener("error",Ws)}catch(i){r(i);return}}),Ns.catch(function(s){return Ns=null,Promise.reject(s)}))},tg=function(e,s,r){if(e===null)return null;var n=s[0],o=n.match(/^pk_test/),i=Hm(e.version),c=Ii;o&&i!==c&&console.warn("Stripe.js@".concat(i," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(c,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var l=e.apply(void 0,s);return Zm(l,r),l},ks,$i=!1,Di=function(){return ks||(ks=eg(null).catch(function(e){return ks=null,Promise.reject(e)}),ks)};Promise.resolve().then(function(){return Di()}).catch(function(a){$i||console.warn(a)});var Sg=function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];$i=!0;var n=Date.now();return Di().then(function(o){return tg(o,s,n)})};class Qr{static async initialize(){return this.stripe?this.stripe:(console.error("Missing VITE_STRIPE_PUBLISHABLE_KEY"),null)}static async createPaymentIntent(e){try{const s=await fetch("/.netlify/functions/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:Math.round(e.amount*100),currency:"usd",metadata:{studentName:e.studentName,studentEmail:e.studentEmail,studentPhone:e.studentPhone||"",classDetails:JSON.stringify(e.classDetails||{}),packageDetails:JSON.stringify(e.packageDetails||{})}})});if(!s.ok)throw new Error("Failed to create payment intent");const{clientSecret:r,paymentIntentId:n}=await s.json();return n&&this.paymentDataCache.set(n,e),r}catch(s){return console.error("Error creating payment intent:",s),null}}static async processPayment(e,s,r){console.log("🚀 Starting processPayment with clientSecret:",e);try{if(console.log("🔧 Initializing Stripe..."),!await this.initialize())throw new Error("Stripe failed to load");console.log("✅ Stripe initialized successfully"),console.log("Simulating successful payment for testing...");const o=e.split("_secret_")[0];console.log("Payment intent ID:",o);const i=this.paymentDataCache.get(o);console.log("Cached payment data:",i);const c={id:o,status:"succeeded",amount:i?Math.round(i.amount*100):100,currency:"usd",metadata:{studentName:(i==null?void 0:i.studentName)||"Test User",studentEmail:(i==null?void 0:i.studentEmail)||"test@example.com",studentPhone:(i==null?void 0:i.studentPhone)||"",classDetails:JSON.stringify((i==null?void 0:i.classDetails)||{}),packageDetails:JSON.stringify((i==null?void 0:i.packageDetails)||{})}};console.log("Mock payment intent created:",c),console.log("Payment processing complete, calling onSuccess..."),s(c),console.log("✅ onSuccess callback called")}catch(n){console.error("❌ Payment processing error:",n),console.error("❌ Error stack:",n.stack),r(n.message||"Payment processing failed")}}static async handleSuccessfulPayment(e){try{const s=e.metadata,r=JSON.parse(s.classDetails||"{}"),n=JSON.parse(s.packageDetails||"{}");r.className?(await le.createBooking({student_name:s.studentName,student_email:s.studentEmail,class_name:r.className,teacher:r.teacher,class_date:r.day,class_time:r.time,payment_method:"Credit Card",amount:s.amount/100,zoom_meeting_id:r.zoomMeetingId,zoom_password:r.zoomPassword,zoom_link:r.zoomLink}),await Oe.sendBookingNotification({studentName:s.studentName,studentEmail:s.studentEmail,className:r.className,teacher:r.teacher,date:r.day,time:r.time,zoomMeetingId:r.zoomMeetingId,zoomPassword:r.zoomPassword,zoomLink:r.zoomLink}),await Oe.sendStudentConfirmation({studentName:s.studentName,studentEmail:s.studentEmail,className:r.className,teacher:r.teacher,date:r.day,time:r.time,zoomMeetingId:r.zoomMeetingId,zoomPassword:r.zoomPassword,zoomLink:r.zoomLink})):n.type&&(await le.createPackage({student_email:s.studentEmail,package_type:n.type,total_classes:n.type==="five"?5:10,remaining_classes:n.type==="five"?5:10}),await Oe.sendPackagePurchaseNotification({studentName:s.studentName,studentEmail:s.studentEmail,packageType:n.type,packagePrice:s.amount/100,classesAdded:n.type==="five"?5:10,totalClasses:n.type==="five"?5:10}),await Oe.sendPackagePurchaseConfirmation({studentName:s.studentName,studentEmail:s.studentEmail,packageType:n.type,packagePrice:s.amount/100,classesAdded:n.type==="five"?5:10,totalClasses:n.type==="five"?5:10}))}catch(s){console.error("Error handling successful payment:",s)}}static async validatePayment(e){try{const s=await fetch(`/api/validate-payment/${e}`),{status:r}=await s.json();return r==="succeeded"}catch(s){return console.error("Error validating payment:",s),!1}}}ys(Qr,"stripe",null),ys(Qr,"paymentDataCache",new Map);const sg={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function rg(){const[a,e]=p.useState(!1),[s,r]=p.useState([]),[n,o]=p.useState("1.00"),[i,c]=p.useState("test@example.com"),[l,d]=p.useState("Test User"),u=[{number:"4242424242424242",name:"Visa (Success)",cvc:"123",exp:"12/25"},{number:"4000000000000002",name:"Visa (Declined)",cvc:"123",exp:"12/25"},{number:"4000000000009995",name:"Visa (Insufficient Funds)",cvc:"123",exp:"12/25"},{number:"4000000000000069",name:"Visa (Expired Card)",cvc:"123",exp:"12/25"}],h=(b,m,g,_)=>{const S={id:Date.now(),test:b,status:m,message:g,details:_,timestamp:new Date().toLocaleTimeString()};r(R=>[S,...R.slice(0,9)])},v=async()=>{e(!0);try{h("Stripe Connection","success","Testing Stripe API connection...");const b={amount:Math.round(parseFloat(n)*100),currency:"usd",studentName:l,studentEmail:i,metadata:{test:"true",email:i,name:l}},m=await Qr.createPaymentIntent(b);m?h("Stripe Connection","success","Stripe API connection successful!",{clientSecret:m.substring(0,20)+"..."}):h("Stripe Connection","error","Failed to create payment intent")}catch(b){const m=b instanceof Error?b.message:"Unknown error";h("Stripe Connection","error",`Stripe connection failed: ${m}`)}finally{e(!1)}},f=async()=>{e(!0);try{h("Package Purchase","success","Testing package purchase flow...");const b={type:"five",price:53,studentEmail:i,studentName:l},m=await le.createOrUpdateUser({email:i,name:l});m?(h("Package Purchase","success","User created/updated successfully",{userId:m.id}),await le.updateUserCredits(m.id,{single_classes:0,five_pack_classes:5,ten_pack_classes:0}),h("Package Purchase","success","Credits updated successfully")):h("Package Purchase","error","Failed to create/update user")}catch(b){const m=b instanceof Error?b.message:"Unknown error";h("Package Purchase","error",`Package purchase test failed: ${m}`)}finally{e(!1)}},j=async()=>{e(!0);try{h("Webhook Test","success","Testing webhook endpoint...");const m=await fetch("/.netlify/functions/stripe-webhook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:"evt_test_webhook",object:"event",type:"payment_intent.succeeded",data:{object:{id:"pi_test_123",amount:1100,currency:"usd",status:"succeeded",metadata:{test:"true"}}},created:Math.floor(Date.now()/1e3)})});m.ok?h("Webhook Test","success","Webhook endpoint is accessible",{status:m.status}):h("Webhook Test","error",`Webhook returned error: ${m.status}`)}catch(b){const m=b instanceof Error?b.message:"Unknown error";h("Webhook Test","error",`Webhook test failed: ${m}`)}finally{e(!1)}},y=()=>{const m=["VITE_STRIPE_PUBLISHABLE_KEY","STRIPE_SECRET_KEY","STRIPE_WEBHOOK_SECRET"].filter(g=>g.startsWith("VITE_")?!sg[g]:!1);m.length===0?h("Environment Variables","success","All client-side environment variables are set"):h("Environment Variables","error",`Missing environment variables: ${m.join(", ")}`)},x=()=>{r([])};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs(U,{children:[t.jsx(ne,{children:t.jsxs(oe,{className:"flex items-center gap-2",children:[t.jsx(Sr,{className:"w-5 h-5"}),"Payment Test Configuration"]})}),t.jsx(F,{className:"space-y-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(J,{htmlFor:"testAmount",children:"Test Amount ($)"}),t.jsx(ie,{id:"testAmount",type:"number",step:"0.01",value:n,onChange:b=>o(b.target.value),placeholder:"1.00"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(J,{htmlFor:"testEmail",children:"Test Email"}),t.jsx(ie,{id:"testEmail",type:"email",value:i,onChange:b=>c(b.target.value),placeholder:"test@example.com"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(J,{htmlFor:"testName",children:"Test Name"}),t.jsx(ie,{id:"testName",value:l,onChange:b=>d(b.target.value),placeholder:"Test User"})]})]})})]}),t.jsxs(U,{children:[t.jsx(ne,{children:t.jsx(oe,{children:"Stripe Test Cards"})}),t.jsx(F,{children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map((b,m)=>t.jsxs("div",{className:"p-3 border rounded-lg",children:[t.jsx("div",{className:"font-medium",children:b.name}),t.jsxs("div",{className:"text-sm text-muted-foreground",children:["Card: ",b.number]}),t.jsxs("div",{className:"text-sm text-muted-foreground",children:["CVC: ",b.cvc," | Exp: ",b.exp]})]},m))})})]}),t.jsxs(U,{children:[t.jsx(ne,{children:t.jsx(oe,{children:"Run Tests"})}),t.jsx(F,{children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs($,{onClick:y,variant:"outline",className:"w-full",children:[t.jsx(Pn,{className:"w-4 h-4 mr-2"}),"Check Environment"]}),t.jsxs($,{onClick:v,disabled:a,className:"w-full",children:[t.jsx(Sr,{className:"w-4 h-4 mr-2"}),"Test Stripe API"]}),t.jsxs($,{onClick:f,disabled:a,variant:"outline",className:"w-full",children:[t.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Test Package Purchase"]}),t.jsxs($,{onClick:j,disabled:a,variant:"outline",className:"w-full",children:[t.jsx(En,{className:"w-4 h-4 mr-2"}),"Test Webhook"]})]})})]}),t.jsxs(U,{children:[t.jsx(ne,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(oe,{children:"Test Results"}),t.jsx($,{onClick:x,variant:"outline",size:"sm",children:"Clear Results"})]})}),t.jsx(F,{children:s.length===0?t.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No test results yet. Run a test to see results here."}):t.jsx("div",{className:"space-y-2",children:s.map(b=>t.jsxs("div",{className:`p-3 rounded-lg border ${b.status==="success"?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[b.status==="success"?t.jsx(Wt,{className:"w-4 h-4 text-green-600"}):t.jsx(ta,{className:"w-4 h-4 text-red-600"}),t.jsx("span",{className:"font-medium",children:b.test}),t.jsx(_e,{variant:b.status==="success"?"default":"destructive",children:b.status})]}),t.jsx("span",{className:"text-sm text-muted-foreground",children:b.timestamp})]}),t.jsx("p",{className:"mt-1 text-sm",children:b.message}),b.details&&t.jsx("pre",{className:"mt-2 text-xs bg-gray-100 p-2 rounded overflow-x-auto",children:JSON.stringify(b.details,null,2)})]},b.id))})})]})]})}function ag(){const[a,e]=p.useState(!1),[s,r]=p.useState([]),[n,o]=p.useState("test@example.com"),[i,c]=p.useState("Test User"),[l,d]=p.useState("This is a test email from Nirva Yoga Studio admin panel."),u=[{id:"registration-inquiry",name:"Registration Inquiry",description:"Test new student registration email",recipient:"Admin (nirvayogastudio@gmail.com)"},{id:"registration-confirmation",name:"Registration Confirmation",description:"Test student welcome email",recipient:"Student"},{id:"contact-inquiry",name:"Contact Inquiry",description:"Test general contact form email",recipient:"Admin (nirvayogastudio@gmail.com)"},{id:"booking-notification",name:"Booking Notification",description:"Test class booking notification",recipient:"Admin (nirvayogastudio@gmail.com)"},{id:"student-confirmation",name:"Student Confirmation",description:"Test student booking confirmation",recipient:"Student"},{id:"package-purchase",name:"Package Purchase",description:"Test package purchase notification",recipient:"Admin (nirvayogastudio@gmail.com)"},{id:"package-purchase-confirmation",name:"Package Purchase Confirmation",description:"Test package purchase confirmation",recipient:"Student"},{id:"class-cancellation",name:"Class Cancellation",description:"Test class cancellation email",recipient:"Student"}],h=(x,b,m,g)=>{const _={id:Date.now(),test:x,status:b,message:m,details:g,timestamp:new Date().toLocaleTimeString()};r(S=>[_,...S.slice(0,9)])},v=async x=>{e(!0);const b=u.find(m=>m.id===x);try{h((b==null?void 0:b.name)||x,"success",`Testing ${b==null?void 0:b.name}...`);let m={firstName:i.split(" ")[0]||"Test",lastName:i.split(" ")[1]||"User",email:n};switch(x){case"registration-inquiry":case"registration-confirmation":m={...m,interestLevel:"Beginner",yogaGoals:l};break;case"contact-inquiry":m={...m,subject:"Test Contact Inquiry",message:l};break;case"booking-notification":case"student-confirmation":m={...m,className:"Test Yoga Class",teacher:"Test Teacher",date:new Date().toLocaleDateString(),time:"6:00 PM",zoomMeetingId:"test-123456",zoomPassword:"test123",zoomLink:"https://zoom.us/j/test123456"};break;case"package-purchase":case"package-purchase-confirmation":m={...m,packageType:"five",packagePrice:53,classesAdded:5,totalClasses:5};break;case"class-cancellation":m={...m,className:"Test Yoga Class",teacher:"Test Teacher",date:new Date().toLocaleDateString(),time:"6:00 PM"};break}await Oe.sendEmail({type:x,data:m}),h((b==null?void 0:b.name)||x,"success",`Email sent successfully to ${b==null?void 0:b.recipient}`,{emailType:x,recipient:b==null?void 0:b.recipient}),tt.success(`${b==null?void 0:b.name} email sent successfully!`)}catch(m){const g=m instanceof Error?m.message:"Unknown error";h((b==null?void 0:b.name)||x,"error",`Email test failed: ${g}`,{error:g}),tt.error(`Failed to send ${b==null?void 0:b.name} email`)}finally{e(!1)}},f=async()=>{e(!0),h("All Emails","success","Starting comprehensive email test...");for(const x of u)try{await v(x.id),await new Promise(b=>setTimeout(b,1e3))}catch{}h("All Emails","success","Comprehensive email test completed"),e(!1)},j=async()=>{e(!0);try{h("Email Service","success","Testing email service connection..."),await Oe.sendEmail({type:"registration-inquiry",data:{firstName:"Service",lastName:"Test",email:n,interestLevel:"Test",yogaGoals:"Testing email service connectivity"}}),h("Email Service","success","Email service is working correctly")}catch(x){const b=x instanceof Error?x.message:"Unknown error";h("Email Service","error",`Email service test failed: ${b}`)}finally{e(!1)}},y=()=>{r([])};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs(U,{children:[t.jsx(ne,{children:t.jsxs(oe,{className:"flex items-center gap-2",children:[t.jsx(is,{className:"w-5 h-5"}),"Email Test Configuration"]})}),t.jsxs(F,{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(J,{htmlFor:"testEmail",children:"Test Email"}),t.jsx(ie,{id:"testEmail",type:"email",value:n,onChange:x=>o(x.target.value),placeholder:"test@example.com"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(J,{htmlFor:"testName",children:"Test Name"}),t.jsx(ie,{id:"testName",value:i,onChange:x=>c(x.target.value),placeholder:"Test User"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(J,{htmlFor:"testMessage",children:"Test Message"}),t.jsx(fa,{id:"testMessage",value:l,onChange:x=>d(x.target.value),placeholder:"Enter test message content...",rows:3})]})]})]}),t.jsxs(U,{children:[t.jsx(ne,{children:t.jsx(oe,{children:"Available Email Types"})}),t.jsx(F,{children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(x=>t.jsxs("div",{className:"p-4 border rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-medium",children:x.name}),t.jsx(_e,{variant:"outline",children:x.recipient})]}),t.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:x.description}),t.jsxs($,{onClick:()=>v(x.id),disabled:a,size:"sm",className:"w-full",children:[t.jsx(Da,{className:"w-4 h-4 mr-2"}),"Test ",x.name]})]},x.id))})})]}),t.jsxs(U,{children:[t.jsx(ne,{children:t.jsx(oe,{children:"Quick Tests"})}),t.jsx(F,{children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs($,{onClick:j,disabled:a,className:"w-full",children:[t.jsx(is,{className:"w-4 h-4 mr-2"}),"Test Email Service"]}),t.jsxs($,{onClick:f,disabled:a,variant:"outline",className:"w-full",children:[t.jsx(Da,{className:"w-4 h-4 mr-2"}),"Test All Emails"]}),t.jsxs($,{onClick:y,variant:"outline",className:"w-full",children:[t.jsx(kl,{className:"w-4 h-4 mr-2"}),"Clear Results"]})]})})]}),t.jsxs(U,{children:[t.jsx(ne,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(oe,{children:"Test Results"}),t.jsxs(_e,{variant:"outline",children:[s.length," tests"]})]})}),t.jsx(F,{children:s.length===0?t.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No test results yet. Run a test to see results here."}):t.jsx("div",{className:"space-y-2",children:s.map(x=>t.jsxs("div",{className:`p-3 rounded-lg border ${x.status==="success"?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[x.status==="success"?t.jsx(Wt,{className:"w-4 h-4 text-green-600"}):t.jsx(ta,{className:"w-4 h-4 text-red-600"}),t.jsx("span",{className:"font-medium",children:x.test}),t.jsx(_e,{variant:x.status==="success"?"default":"destructive",children:x.status})]}),t.jsx("span",{className:"text-sm text-muted-foreground",children:x.timestamp})]}),t.jsx("p",{className:"mt-1 text-sm",children:x.message}),x.details&&t.jsx("pre",{className:"mt-2 text-xs bg-gray-100 p-2 rounded overflow-x-auto",children:JSON.stringify(x.details,null,2)})]},x.id))})})]})]})}const ng=[{id:"1",studentName:"Sarah Johnson",studentEmail:"sarah.j@email.com",className:"Morning Flow",teacher:"Harshada",date:"September 10, 2025",time:"8:00 AM - 9:00 AM",timestamp:new Date("2025-09-05T14:30:00"),paymentMethod:"Credit Card",amount:11,zoomMeetingId:"123456789",zoomPassword:"yoga123",zoomLink:"https://zoom.us/j/123456789?pwd=yoga123"},{id:"2",studentName:"Mike Chen",studentEmail:"mike.chen@email.com",className:"Evening Restore",teacher:"Archana",date:"September 11, 2025",time:"7:00 PM - 8:00 PM",timestamp:new Date("2025-09-05T16:45:00"),paymentMethod:"Credit Card",amount:11,zoomMeetingId:"987654321",zoomPassword:"restore456",zoomLink:"https://zoom.us/j/987654321?pwd=restore456"},{id:"3",studentName:"Emma Davis",studentEmail:"emma.davis@email.com",className:"Power Flow",teacher:"Archana",date:"September 12, 2025",time:"6:00 PM - 7:00 PM",timestamp:new Date("2025-09-05T18:20:00"),paymentMethod:"5-Class Pack",amount:0,zoomMeetingId:"456789123",zoomPassword:"power789",zoomLink:"https://zoom.us/j/456789123?pwd=power789"}];function og({user:a,onBack:e}){const[s,r]=p.useState([]),[n,o]=p.useState("all"),[i,c]=p.useState(!1),[l,d]=p.useState(!0),u=(a==null?void 0:a.email)==="nirvayogastudio@gmail.com";p.useEffect(()=>{(async()=>{if(u)try{d(!0);const _=(await le.getBookings()).map(S=>({id:S.id,studentName:S.student_name,studentEmail:S.student_email,className:S.class_name,teacher:S.teacher,date:S.class_date,time:S.class_time,timestamp:new Date(S.created_at),paymentMethod:S.payment_method,amount:S.amount,zoomMeetingId:S.zoom_meeting_id,zoomPassword:S.zoom_password,zoomLink:S.zoom_link}));r(_),console.log("✅ Loaded bookings from database:",_.length)}catch(g){console.error("❌ Error loading bookings:",g),r(ng)}finally{d(!1)}})()},[u]),p.useEffect(()=>{const m=g=>{const _=g.detail,S={id:Date.now().toString(),timestamp:new Date,paymentMethod:"Credit Card",amount:11,..._};r(R=>[S,...R])};return window.addEventListener("classBooked",m),()=>{window.removeEventListener("classBooked",m)}},[]);const h=[...new Set(s.map(m=>m.className))],v=n==="all"?s:s.filter(m=>m.className===n),f=Object.entries(s.reduce((m,g)=>{const _=`${g.className}-${g.teacher}-${g.date}-${g.time}`;return m[_]||(m[_]={className:g.className,teacher:g.teacher,date:g.date,time:g.time,zoomMeetingId:g.zoomMeetingId||"",zoomPassword:g.zoomPassword||"",zoomLink:g.zoomLink||"",studentCount:0,students:[]}),m[_].students.push(g),m[_].studentCount++,m},{})).map(([m,g])=>g),j=s.reduce((m,g)=>m+g.amount,0),y=s.length,x=s.filter(m=>new Date(m.timestamp).toDateString()===new Date().toDateString()).length,b=m=>{navigator.clipboard.writeText(m)};return u?t.jsx("div",{className:"min-h-screen bg-background",children:t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"mb-2",children:"Nirva Yoga Studio - Admin Dashboard"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage class bookings, view student enrollment, and access Zoom links"}),l&&t.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:t.jsx("p",{className:"text-blue-800",children:"🔄 Loading data from database..."})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[t.jsx(U,{children:t.jsxs(F,{className:"flex items-center p-6",children:[t.jsx(Pn,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),t.jsxs("p",{className:"text-2xl font-bold",children:["$",j.toFixed(2)]})]})]})}),t.jsx(U,{children:t.jsxs(F,{className:"flex items-center p-6",children:[t.jsx(et,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Bookings"}),t.jsx("p",{className:"text-2xl font-bold",children:y})]})]})}),t.jsx(U,{children:t.jsxs(F,{className:"flex items-center p-6",children:[t.jsx(De,{className:"h-8 w-8 text-purple-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Today's Bookings"}),t.jsx("p",{className:"text-2xl font-bold",children:x})]})]})}),t.jsx(U,{children:t.jsxs(F,{className:"flex items-center p-6",children:[t.jsx(qt,{className:"h-8 w-8 text-orange-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Classes Offered"}),t.jsx("p",{className:"text-2xl font-bold",children:h.length})]})]})})]}),t.jsxs(qo,{defaultValue:"schedule-editor",className:"space-y-6",children:[t.jsxs(Wo,{children:[t.jsx(Ee,{value:"schedule-editor",children:"Schedule Editor"}),t.jsx(Ee,{value:"session-manager",children:"Session Manager"}),t.jsx(Ee,{value:"analytics",children:"Analytics"}),t.jsx(Ee,{value:"zoom-classes",children:"Zoom Classes"}),t.jsx(Ee,{value:"all-bookings",children:"All Bookings"}),t.jsx(Ee,{value:"by-class",children:"By Class"}),t.jsx(Ee,{value:"database-setup",children:"Database Setup"}),t.jsx(Ee,{value:"zoom-debug",children:"Zoom Debug"}),t.jsx(Ee,{value:"booking-test",children:"Booking Test"}),t.jsx(Ee,{value:"database-test",children:"Database Test"}),t.jsx(Ee,{value:"payment-test",children:"Payment Test"}),t.jsx(Ee,{value:"email-test",children:"Email Test"})]}),t.jsx(Te,{value:"schedule-editor",className:"space-y-6",children:t.jsx("div",{className:"grid gap-6",children:t.jsxs(U,{children:[t.jsx(ne,{children:t.jsxs(oe,{className:"flex items-center gap-2",children:[t.jsx(De,{className:"w-5 h-5"}),"Schedule Management"]})}),t.jsxs(F,{children:[t.jsx("p",{className:"text-muted-foreground mb-4",children:"Manage class schedules for the entire month. Add, edit, or remove classes without coding."}),t.jsx(Am,{})]})]})})}),t.jsx(Te,{value:"session-manager",className:"space-y-6",children:t.jsx("div",{className:"grid gap-6",children:t.jsxs(U,{children:[t.jsx(ne,{children:t.jsxs(oe,{className:"flex items-center gap-2",children:[t.jsx(qt,{className:"w-5 h-5"}),"Session Management"]})}),t.jsxs(F,{children:[t.jsx("p",{className:"text-muted-foreground mb-4",children:"Manage individual class sessions. Create, edit, delete, or cancel specific class instances."}),t.jsx(Dm,{})]})]})})}),t.jsx(Te,{value:"analytics",className:"space-y-6",children:t.jsx(zm,{})}),t.jsx(Te,{value:"zoom-classes",className:"space-y-6",children:t.jsx("div",{className:"grid gap-6",children:f.map((m,g)=>t.jsxs(U,{children:[t.jsx(ne,{children:t.jsxs(oe,{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Cl,{className:"h-5 w-5 text-blue-600"}),t.jsx("span",{children:m.className}),t.jsxs(_e,{variant:"secondary",children:[m.studentCount," ",m.studentCount===1?"student":"students"]})]}),t.jsxs("div",{className:"text-sm text-muted-foreground",children:[m.date," • ",m.time]})]})}),t.jsx(F,{children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"Zoom Meeting Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-blue-700",children:"Meeting ID:"}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("code",{className:"bg-white px-2 py-1 rounded text-sm",children:m.zoomMeetingId}),t.jsx($,{size:"sm",variant:"outline",onClick:()=>b(m.zoomMeetingId),children:t.jsx(pr,{className:"h-3 w-3"})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-blue-700",children:"Password:"}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("code",{className:"bg-white px-2 py-1 rounded text-sm",children:m.zoomPassword}),t.jsx($,{size:"sm",variant:"outline",onClick:()=>b(m.zoomPassword),children:t.jsx(pr,{className:"h-3 w-3"})})]})]})]}),t.jsxs("div",{className:"mt-3",children:[t.jsx("label",{className:"text-sm font-medium text-blue-700",children:"Join Link:"}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("code",{className:"bg-white px-2 py-1 rounded text-sm flex-1 truncate",children:m.zoomLink}),t.jsx($,{size:"sm",variant:"outline",onClick:()=>b(m.zoomLink),children:t.jsx(pr,{className:"h-3 w-3"})}),t.jsx($,{size:"sm",variant:"default",onClick:()=>window.open(m.zoomLink,"_blank"),children:t.jsx(La,{className:"h-3 w-3"})})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold mb-3",children:"Enrolled Students"}),t.jsx("div",{className:"space-y-2",children:m.students.map(_=>t.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ct,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"font-medium",children:_.studentName})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(is,{className:"h-3 w-3"}),t.jsx("a",{href:`mailto:${_.studentEmail}`,className:"hover:text-primary",children:_.studentEmail})]})]}),t.jsxs("div",{className:"text-right space-y-1",children:[t.jsx(_e,{variant:_.amount>0?"default":"secondary",className:"text-xs",children:_.paymentMethod}),t.jsxs("div",{className:"text-xs text-muted-foreground",children:["Booked: ",_.timestamp.toLocaleDateString()]})]})]},_.id))})]})]})})]},g))})}),t.jsx(Te,{value:"all-bookings",className:"space-y-6",children:t.jsxs(U,{children:[t.jsx(ne,{children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(oe,{children:"Recent Bookings"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx($,{variant:n==="all"?"default":"outline",size:"sm",onClick:()=>o("all"),children:"All Classes"}),h.map(m=>t.jsx($,{variant:n===m?"default":"outline",size:"sm",onClick:()=>o(m),children:m},m))]})]})}),t.jsxs(F,{children:[t.jsxs(Ff,{children:[t.jsx(qf,{children:t.jsxs(bn,{children:[t.jsx($t,{children:"Student"}),t.jsx($t,{children:"Class"}),t.jsx($t,{children:"Teacher"}),t.jsx($t,{children:"Date & Time"}),t.jsx($t,{children:"Payment"}),t.jsx($t,{children:"Zoom"}),t.jsx($t,{children:"Booked"})]})}),t.jsx(Wf,{children:v.map(m=>t.jsxs(bn,{children:[t.jsx(Dt,{children:t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ct,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"font-medium",children:m.studentName})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(is,{className:"h-3 w-3"}),t.jsx("a",{href:`mailto:${m.studentEmail}`,className:"hover:text-primary",children:m.studentEmail})]})]})}),t.jsx(Dt,{children:t.jsx("div",{className:"font-medium",children:m.className})}),t.jsx(Dt,{children:t.jsx("div",{className:"text-muted-foreground",children:m.teacher})}),t.jsx(Dt,{children:t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"font-medium",children:m.date}),t.jsx("div",{className:"text-sm text-muted-foreground",children:m.time})]})}),t.jsx(Dt,{children:t.jsxs("div",{className:"space-y-1",children:[t.jsx(_e,{variant:m.amount>0?"default":"secondary",children:m.paymentMethod}),m.amount>0&&t.jsxs("div",{className:"text-sm font-medium",children:["$",m.amount.toFixed(2)]})]})}),t.jsx(Dt,{children:m.zoomLink?t.jsxs($,{size:"sm",variant:"outline",onClick:()=>window.open(m.zoomLink,"_blank"),children:[t.jsx(La,{className:"h-3 w-3 mr-1"}),"Join"]}):t.jsx("span",{className:"text-muted-foreground text-sm",children:"No link"})}),t.jsx(Dt,{children:t.jsxs("div",{className:"text-sm text-muted-foreground",children:[m.timestamp.toLocaleDateString()," ",m.timestamp.toLocaleTimeString()]})})]},m.id))})]}),v.length===0&&t.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No bookings found for the selected filter."})]})]})}),t.jsx(Te,{value:"by-class",className:"space-y-6",children:t.jsx("div",{className:"grid gap-6",children:Object.entries(s.reduce((m,g)=>(m[g.className]||(m[g.className]=[]),m[g.className].push(g),m),{})).map(([m,g])=>t.jsxs(U,{children:[t.jsx(ne,{children:t.jsxs(oe,{className:"flex items-center justify-between",children:[t.jsx("span",{children:m}),t.jsxs(_e,{variant:"secondary",children:[g.length," ",g.length===1?"student":"students"]})]})}),t.jsx(F,{children:t.jsx("div",{className:"space-y-4",children:g.map(_=>t.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ct,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"font-medium",children:_.studentName})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(is,{className:"h-3 w-3"}),t.jsx("a",{href:`mailto:${_.studentEmail}`,className:"hover:text-primary",children:_.studentEmail})]})]}),t.jsxs("div",{className:"text-right space-y-1",children:[t.jsx("div",{className:"text-sm font-medium",children:_.date}),t.jsx("div",{className:"text-sm text-muted-foreground",children:_.time}),t.jsx(_e,{variant:_.amount>0?"default":"secondary",className:"text-xs",children:_.paymentMethod})]})]},_.id))})})]},m))})}),t.jsx(Te,{value:"database-setup",className:"space-y-6",children:t.jsx(Bm,{})}),t.jsx(Te,{value:"zoom-debug",className:"space-y-6",children:t.jsxs(U,{children:[t.jsx(ne,{children:t.jsx(oe,{children:"Zoom API Debug Test"})}),t.jsx(F,{children:t.jsx(Fm,{})})]})}),t.jsx(Te,{value:"booking-test",className:"space-y-6",children:t.jsxs(U,{children:[t.jsx(ne,{children:t.jsx(oe,{children:"Booking System Test"})}),t.jsx(F,{children:t.jsx(qm,{})})]})}),t.jsx(Te,{value:"database-test",className:"space-y-6",children:t.jsxs(U,{children:[t.jsx(ne,{children:t.jsx(oe,{children:"Database Operations Test"})}),t.jsx(F,{children:t.jsx(Wm,{})})]})}),t.jsx(Te,{value:"payment-test",className:"space-y-6",children:t.jsxs(U,{children:[t.jsx(ne,{children:t.jsx(oe,{children:"Payment System Test"})}),t.jsx(F,{children:t.jsx(rg,{})})]})}),t.jsx(Te,{value:"email-test",className:"space-y-6",children:t.jsxs(U,{children:[t.jsx(ne,{children:t.jsx(oe,{children:"Email System Test"})}),t.jsx(F,{children:t.jsx(ag,{})})]})})]}),t.jsx(U,{className:"mt-8",children:t.jsxs(F,{className:"p-6",children:[t.jsx("h3",{className:"mb-2",children:"Admin Notes"}),t.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[t.jsxs("p",{children:["📧 ",t.jsx("strong",{children:"Email Notifications:"})," All bookings automatically send notifications to nirvayogastudio@gmail.com"]}),t.jsxs("p",{children:["🔄 ",t.jsx("strong",{children:"Real-time Updates:"})," New bookings appear instantly in this dashboard"]}),t.jsxs("p",{children:["📊 ",t.jsx("strong",{children:"Payment Tracking:"})," Monitor both paid classes and class pack usage"]}),t.jsxs("p",{children:["🎥 ",t.jsx("strong",{children:"Zoom Integration:"})," Each class gets a unique Zoom meeting with shared link"]}),t.jsxs("p",{children:["⚠️ ",t.jsx("strong",{children:"Production Note:"})," Connect to a real payment processor and email service for live environment"]})]})]})})]})}):t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsx(U,{className:"w-full max-w-md mx-4",children:t.jsxs(F,{className:"p-8 text-center",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx(Sl,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),t.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Access Denied"}),t.jsx("p",{className:"text-muted-foreground",children:"You don't have permission to access the admin panel."})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-yellow-800 mb-2",children:[t.jsx(En,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:"Admin Access Required"})]}),t.jsx("p",{className:"text-sm text-yellow-700",children:"Only authorized administrators can access this panel."})]}),e&&t.jsx($,{onClick:e,className:"w-full",children:"Go Back"})]})]})})})}const ig=p.lazy(()=>lt(()=>import("./stripe-elements-payment-KMd-hILd.js"),__vite__mapDeps([0,1,2])).then(a=>({default:a.StripeElementsPayment})));function lg(){const[a,e]=p.useState("home"),[s,r]=p.useState(["home"]),[n,o]=p.useState(null),[i,c]=p.useState(null),[l,d]=p.useState(null),[u,h]=p.useState(!0),[v,f]=p.useState([]),[j,y]=p.useState({}),[x,b]=p.useState(!1),[m,g]=p.useState(!1),[_,S]=p.useState(!1),[R,N]=p.useState(!1);p.useEffect(()=>{(async()=>{try{const E=new URLSearchParams(window.location.search),C=E.get("token"),O=E.get("email");if(console.log("🔍 Password reset debug:",{search:window.location.search,token:C,email:O,hasToken:!!C,hasEmail:!!O,currentView:a}),C&&O&&a!=="password-reset"){console.log("🎯 Navigating to password reset page"),e("password-reset");return}const L=localStorage.getItem("nirva_user");if(L){const k=JSON.parse(L);d(k),await D(k.email)}}catch{localStorage.removeItem("nirva_user")}finally{h(!1)}})()},[]);const D=async w=>{try{const E=await le.createOrUpdateUser({email:w,name:w.split("@")[0]});let C={single_classes:0,five_pack_classes:0,ten_pack_classes:0};try{const k=await le.getUserCredits(E.id);k&&(C={single_classes:k.single_classes||0,five_pack_classes:k.five_pack_classes||0,ten_pack_classes:k.ten_pack_classes||0})}catch{}let O={};try{const k=await le.getUserBookedClasses(E.id);if(k){const Y=B=>{if(!B)return"00:00";if(B.includes("AM")||B.includes("PM"))return B;const[K,z]=B.split(":"),te=parseInt(K),we=te>=12?"PM":"AM";return`${te%12||12}:${z} ${we}`};k.forEach(B=>{const K=`${B.class_name}-${B.class_date}-${Y(B.class_time)}`;O[K]={className:B.class_name,teacher:B.teacher,time:B.class_time,day:B.class_date,zoomLink:B.zoom_link,zoomPassword:B.zoom_password,meetingId:B.zoom_meeting_id,bookedAt:B.booked_at}})}}catch{}const L={email:E.email,name:E.name||w.split("@")[0],classPacks:{singleClasses:C.single_classes,fivePack:C.five_pack_classes,tenPack:C.ten_pack_classes}};d(L),y(O),localStorage.setItem("nirva_user",JSON.stringify(L))}catch{}},M=async(w,E)=>{if(!E)throw new Error("Password is required. Please enter your password.");if(w==="nirvayogastudio@gmail.com"){if(E!=="nirva2024")throw new Error("Incorrect password for admin account. Please try again.")}else try{const C=await le.getUserByEmail(w);if(!C)throw new Error("Account not found. Please sign up first.");if(!C.password_hash)throw new Error("Account not properly set up. Please sign up again.");if(!await le.verifyPassword(E,C.password_hash))throw new Error("Invalid password. Please try again.")}catch(C){throw console.error("Login failed:",C),C.message.includes("Account not found")||C.message.includes("not properly set up")?new Error("Account not found. Please sign up first."):C.message.includes("Invalid password")?new Error("Invalid password. Please try again."):new Error("Login failed. Please try again or contact support.")}try{const C=await le.getUserByEmail(w);let O={single_classes:0,five_pack_classes:0,ten_pack_classes:0};try{const B=await le.getUserCredits(C.id);B&&(O={single_classes:B.single_classes||0,five_pack_classes:B.five_pack_classes||0,ten_pack_classes:B.ten_pack_classes||0})}catch{}let L={};try{L=(await le.getUserBookedClasses(C.id)).reduce((K,z)=>{const te=`${z.class_name}-${z.class_date}-${z.class_time}`;return K[te]={className:z.class_name,teacher:z.teacher,time:z.class_time,day:z.class_date,zoomLink:z.zoom_link||"",zoomPassword:z.zoom_password||"",meetingId:z.zoom_meeting_id||"",bookedAt:z.booked_at},K},{})}catch{}const k={email:w,name:C.name||w.split("@")[0],classPacks:{singleClasses:O.single_classes,fivePack:O.five_pack_classes,tenPack:O.ten_pack_classes}};d(k),y(L);try{const B=new Date,K=B.toISOString().split("T")[0],z=new Date(B.getTime()+14*24*60*60*1e3).toISOString().split("T")[0],{ClassManagementService:te}=await lt(async()=>{const{ClassManagementService:Se}=await Promise.resolve().then(()=>Su);return{ClassManagementService:Se}},void 0),we=await te.getClassInstances(K,z);f(we),console.log("📅 Loaded class instances:",we)}catch(B){console.log("⚠️ Error loading class instances:",B)}localStorage.setItem("nirva_user",JSON.stringify(k))}catch(C){console.error("❌ Error loading user data:",C),d({email:w,name:w.split("@")[0],classPacks:{singleClasses:0,fivePack:0,tenPack:0}})}},Z=async(w,E,C)=>{try{if(await le.getUserByEmail(w))throw new Error('An account with this email already exists. Please use the "Reset Password" tab if you forgot your password, or try logging in with your existing credentials.');if(!await le.createOrUpdateUser({email:w,name:C,password:E}))throw new Error("Failed to create account. Please try again.");try{const{EmailService:k}=await lt(async()=>{const{EmailService:Y}=await Promise.resolve().then(()=>dn);return{EmailService:Y}},void 0);await k.sendWelcomeEmail({studentName:C,studentEmail:w})}catch(k){console.error("⚠️ Failed to send welcome email:",k)}return{user:{email:w,name:C}}}catch(O){throw console.error("Signup failed:",O),O.message.includes("already exists")||O.message.includes("duplicate key")?new Error('An account with this email already exists. Please use the "Reset Password" tab if you forgot your password, or try logging in with your existing credentials.'):O.message.includes("Password must be at least 6 characters")?new Error("Password must be at least 6 characters long."):new Error(O.message||"Failed to create account. Please try again.")}},Q=async w=>{try{const E=await le.getUserByEmail(w);if(!E)throw new Error("No account found with this email address.");const C=crypto.getRandomValues(new Uint8Array(32)).reduce((k,Y)=>k+Y.toString(16).padStart(2,"0"),""),O=new Date(Date.now()+24*60*60*1e3);try{await le.storePasswordResetToken(w,C,O)}catch{console.warn("Password reset tokens table not available yet. Please run the database migration.")}const{EmailService:L}=await lt(async()=>{const{EmailService:k}=await Promise.resolve().then(()=>dn);return{EmailService:k}},void 0);await L.sendEmail({type:"password-reset",data:{studentName:E.name||w.split("@")[0],studentEmail:w,resetToken:C}})}catch(E){throw console.error("Password reset failed:",E),E.message.includes("No account found")?new Error("No account found with this email address."):new Error(E.message||"Failed to send reset email. Please try again.")}},q=async()=>{localStorage.removeItem("nirva_user"),d(null),y({}),g(!1)},T=w=>{r(C=>[...C,w]),e(w);const E=w==="home"?"/":`/${w}`;window.history.pushState({},"",E)};p.useEffect(()=>{const w=()=>{const E=new URLSearchParams(window.location.search),C=E.get("token"),O=E.get("email");if(C&&O){console.log("🎯 PopState: Navigating to password reset page"),e("password-reset");return}const L=window.location.pathname;e(L==="/"||L===""?"home":L==="/register"?"register":L==="/classes"?"classes":L==="/teachers"?"teachers":L==="/packages"?"packages":L==="/contact"?"contact":L==="/faq"?"faq":L==="/admin"?"admin":"home")};return w(),window.addEventListener("popstate",w),()=>{window.removeEventListener("popstate",w)}},[]);const ue=()=>{if(s.length>1){const w=[...s];w.pop();const E=w[w.length-1];r(w),e(E),o(null),c(null)}else e("home"),o(null),c(null)},be=w=>{if(!l){b(!0);return}if(w==="single")c({type:"single",price:11,name:"Single Class"}),T("payment");else{const E={five:53,ten:105},C={five:"5-Class Package",ten:"10-Class Package"};c({type:w,price:E[w],name:C[w]}),T("payment")}},ce=w=>{var k,Y,B,K;console.log("🔍 isClassBooked called with classId:",w),console.log("🔍 classInstances available:",(v==null?void 0:v.length)||0),console.log("🔍 bookedClasses available:",Object.keys(j).length);const E=v==null?void 0:v.find(z=>z.id===w);if(!E)return console.log("⚠️ Class item not found in instances for ID:",w),!1;console.log("🔍 Found class item:",E);const C=z=>{const[te,we]=z.split(":"),Se=parseInt(te),Je=Se>=12?"PM":"AM";return`${Se%12||12}:${we} ${Je}`},O=`${((k=E.class)==null?void 0:k.name)||E.class_name}-${E.class_date}-${C(((Y=E.class)==null?void 0:Y.start_time)||"00:00")}`,L=j[O]!==void 0;return console.log("🔍 Checking if class is booked:",{classId:w,classKey:O,isBooked:L,bookedClassesKeys:Object.keys(j),classItemName:((B=E.class)==null?void 0:B.name)||E.class_name,classItemDate:E.class_date,classItemTime:(K=E.class)==null?void 0:K.start_time}),L},fe=async(w,E)=>{var O,L,k,Y,B,K,z,te,we,Se,Je,Ze,gt;if(!l){b(!0);return}if(ce(w.id)){alert("✅ This class is already booked! Check your account for Zoom details.");return}if(l.classPacks.singleClasses+l.classPacks.fivePack+l.classPacks.tenPack===0){alert("❌ No classes remaining. Please purchase a package first.");return}try{console.log("📅 Processing class booking with existing credits...");const at=await le.createOrUpdateUser({email:l.email,name:l.name});console.log("🎥 Creating Zoom meeting for class..."),console.log("📅 Meeting details:",{className:w.className,teacher:w.teacher,day:E,time:w.time});const Ue=(G=>{if(/^\d{4}-\d{2}-\d{2}$/.test(G))return G;const me=new Date(G);return isNaN(me.getTime())?(console.error("Invalid day format:",G),"2025-09-01"):`${me.getFullYear()}-${String(me.getMonth()+1).padStart(2,"0")}-${String(me.getDate()).padStart(2,"0")}`})(E);let V=null;try{const G=await fetch("/.netlify/functions/create-zoom-meeting-fetch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({className:w.className,teacher:w.teacher,date:Ue,time:w.time,duration:60,meetingType:"scheduled"})});if(!G.ok)throw new Error(`HTTP ${G.status}: ${await G.text()}`);const me=await G.json();if(me.success&&me.meeting)V={classId:w.id,className:w.className,teacher:w.teacher,date:Ue,time:w.time,duration:60,zoomMeeting:{meeting_id:me.meeting.meeting_id,password:me.meeting.password,join_url:me.meeting.join_url,start_time:me.meeting.start_time,duration:me.meeting.duration}};else throw new Error("Invalid response from Zoom API")}catch{const me="nirva-yoga-classes",Yt="yoga123";V={classId:w.id,className:w.className,teacher:w.teacher,date:Ue,time:w.time,duration:60,zoomMeeting:{meeting_id:me,password:Yt,join_url:`https://zoom.us/j/${me}?pwd=${Yt}`,start_time:new Date().toISOString(),duration:60}}}if(!V||!((O=V.zoomMeeting)!=null&&O.join_url)){const G=`fallback-${Date.now()}`;V={classId:w.id,className:w.className,teacher:w.teacher,date:Ue,time:w.time,duration:60,zoomMeeting:{meeting_id:G,password:"yoga123",join_url:`https://zoom.us/j/${G}?pwd=yoga123`,start_time:new Date().toISOString(),duration:60}}}try{console.log("💾 Saving class booking to database..."),console.log("💾 User ID:",at.id),console.log("💾 Class data:",{class_name:w.className,teacher:w.teacher,class_date:Ue,class_time:w.time,class_instance_id:w.id,zoom_meeting_id:((L=V==null?void 0:V.zoomMeeting)==null?void 0:L.meeting_id)||"",zoom_password:((k=V==null?void 0:V.zoomMeeting)==null?void 0:k.password)||"",zoom_link:((Y=V==null?void 0:V.zoomMeeting)==null?void 0:Y.join_url)||""}),await le.bookClass(at.id,{class_name:w.className,teacher:w.teacher,class_date:Ue,class_time:w.time,class_instance_id:w.id,zoom_meeting_id:((B=V==null?void 0:V.zoomMeeting)==null?void 0:B.meeting_id)||"",zoom_password:((K=V==null?void 0:V.zoomMeeting)==null?void 0:K.password)||"",zoom_link:((z=V==null?void 0:V.zoomMeeting)==null?void 0:z.join_url)||""}),console.log("✅ Class booking saved to database with Zoom data")}catch(G){console.log("⚠️ Database booking failed, but continuing with local state update:",G)}const vs=G=>{if(!G)return"00:00";if(G.includes("AM")||G.includes("PM"))return G;const[me,Yt]=G.split(":"),Ms=parseInt(me),Kt=Ms>=12?"PM":"AM";return`${Ms%12||12}:${Yt} ${Kt}`},Xe=`${w.className}-${Ue}-${vs(w.time)}`,bs={className:w.className,teacher:w.teacher,time:w.time,day:E,zoomLink:((te=V==null?void 0:V.zoomMeeting)==null?void 0:te.join_url)||"",zoomPassword:((we=V==null?void 0:V.zoomMeeting)==null?void 0:we.password)||"",meetingId:((Se=V==null?void 0:V.zoomMeeting)==null?void 0:Se.meeting_id)||"",bookedAt:new Date().toISOString()};console.log("📝 Storing booked class data:",bs),console.log("🔗 Zoom link being stored:",bs.zoomLink),console.log("📋 Class key for storage:",Xe),console.log("📋 Class item details:",{className:w.className,time:w.time,formattedDate:Ue,formattedTime:vs(w.time)}),console.log("🔗 Full zoomMeeting object:",V),y(G=>{const me={...G,[Xe]:bs};return console.log("📋 Updated booked classes state:",me),console.log("📋 Keys in booked classes:",Object.keys(me)),me});const $e={...l.classPacks};$e.singleClasses>0?($e.singleClasses-=1,console.log("➖ Deducted 1 single class")):$e.fivePack>0?($e.fivePack-=1,console.log("➖ Deducted 1 class from fivePack")):$e.tenPack>0&&($e.tenPack-=1,console.log("➖ Deducted 1 class from tenPack"));try{await le.updateUserCredits(at.id,{single_classes:$e.singleClasses,five_pack_classes:$e.fivePack,ten_pack_classes:$e.tenPack}),console.log("✅ Credits updated in database")}catch(G){console.log("⚠️ Failed to update credits in database:",G)}d(G=>G&&(console.log("📊 Updated class packs after booking:",$e),{...G,classPacks:$e}));try{console.log("📧 Sending class booking confirmation email...");const G={studentName:l.name||l.email||"Unknown",studentEmail:l.email||"",className:w.className,teacher:w.teacher,date:E,time:w.time,zoomLink:((Je=V==null?void 0:V.zoomMeeting)==null?void 0:Je.join_url)||"",zoomPassword:((Ze=V==null?void 0:V.zoomMeeting)==null?void 0:Ze.password)||"",zoomMeetingId:((gt=V==null?void 0:V.zoomMeeting)==null?void 0:gt.meeting_id)||""};console.log("📧 Email data being sent:",G),console.log("🔗 Zoom link in email:",G.zoomLink),console.log("🔗 Zoom password in email:",G.zoomPassword),console.log("📧 Full zoomMeeting object:",V),await Oe.sendStudentConfirmation(G),console.log("✅ Confirmation email sent")}catch(G){console.log("⚠️ Email sending failed, but booking was successful:",G)}alert("✅ Class booked successfully! Check your email for Zoom details.")}catch(at){console.error("❌ Error booking class:",at),alert("❌ Failed to book class. Please try again.")}},I=async w=>{if(!(!l||!window.confirm("Are you sure you want to cancel this class? Your credit will be restored.")))try{console.log("🚫 Cancelling class:",w);const C=await le.createOrUpdateUser({email:l.email,name:l.name}),O=j[w];if(!O){console.error("❌ Class not found in booked classes");return}try{await le.cancelClass(C.id,{class_name:O.className,class_date:O.day,class_time:O.time}),console.log("✅ Class cancelled in database")}catch(k){console.log("⚠️ Failed to cancel class in database:",k)}y(k=>{const Y={...k};return delete Y[w],Y});const L={...l.classPacks};O.className.includes("Single")||L.singleClasses>0?(L.singleClasses+=1,console.log("➕ Restored 1 single class")):L.fivePack<5?(L.fivePack+=1,console.log("➕ Restored 1 class to fivePack")):L.tenPack<10&&(L.tenPack+=1,console.log("➕ Restored 1 class to tenPack"));try{await le.updateUserCredits(C.id,{single_classes:L.singleClasses,five_pack_classes:L.fivePack,ten_pack_classes:L.tenPack}),console.log("✅ Credits restored in database")}catch(k){console.log("⚠️ Failed to restore credits in database:",k)}d(k=>k&&(console.log("📊 Updated class packs after cancellation:",L),{...k,classPacks:L}));try{console.log("📧 Sending cancellation email..."),await Oe.sendEmail({type:"class-cancellation",data:{studentName:l.name||l.email||"Unknown",studentEmail:l.email||"",className:O.className,teacher:O.teacher,date:O.day,time:O.time}}),console.log("✅ Cancellation email sent")}catch(k){console.log("⚠️ Email sending failed, but cancellation was successful:",k)}alert("✅ Class cancelled successfully! Your credit has been restored.")}catch(C){console.error("❌ Error cancelling class:",C),alert("❌ Failed to cancel class. Please try again.")}},P=(w,E)=>{if(!l){b(!0);return}o({className:w.className,teacher:w.teacher,time:w.time,day:E,id:w.id}),c({type:"single",price:11,name:"Single Class"}),T("payment")},H=()=>{if(!l){b(!0);return}c({type:"single",price:11,name:"Single Class"}),o(null),T("payment")},W=()=>{switch(a){case"payment":return t.jsx(p.Suspense,{fallback:t.jsx("div",{className:"container mx-auto px-4 py-12 text-center",children:"Loading payment..."}),children:t.jsx(ig,{onBack:ue,selectedClass:n,selectedPackage:i,user:l,onSuccess:async()=>{console.log("🎉 Payment success callback triggered!"),console.log("Selected class:",n),console.log("Selected package:",i),console.log("Current user:",l),console.log("Current user classPacks:",l==null?void 0:l.classPacks);try{if(n){console.log("📅 Processing single class purchase..."),console.log("Class details:",n),console.log("User email:",l==null?void 0:l.email),console.log("About to call createOrUpdateUser..."),console.log("Calling createOrUpdateUser with:",{email:(l==null?void 0:l.email)||"",name:l==null?void 0:l.name});const w=await le.createOrUpdateUser({email:(l==null?void 0:l.email)||"",name:l==null?void 0:l.name});console.log("User record created/updated:",w);const E=(l==null?void 0:l.classPacks)||{singleClasses:0,fivePack:0,tenPack:0};console.log("Current credits before update:",E);const C={...E};C.singleClasses+=1,console.log("➕ Adding 1 single class"),console.log("New credits after update:",C);try{console.log("Updating credits in database with userRecord.id:",w.id),console.log("Credits to update:",{single_classes:C.singleClasses,five_pack_classes:C.fivePack,ten_pack_classes:C.tenPack}),await le.updateUserCredits(w.id,{single_classes:C.singleClasses,five_pack_classes:C.fivePack,ten_pack_classes:C.tenPack}),console.log("✅ Credits updated in database")}catch(O){console.log("⚠️ Failed to update credits in database:",O)}d(O=>{if(!O)return O;console.log("📊 Updated class packs after single class purchase:",C);const L={...O,classPacks:C};return console.log("📊 Updated user state:",L),L}),console.log("✅ Single class credit added successfully"),console.log("Note: User will need to book the class separately using their credits")}else if(i){console.log("📦 Processing package purchase..."),console.log("Package details:",i),console.log("Package type:",i.type),console.log("User email:",l==null?void 0:l.email);const w=await le.createOrUpdateUser({email:(l==null?void 0:l.email)||"",name:l==null?void 0:l.name});let C={...(l==null?void 0:l.classPacks)||{singleClasses:0,fivePack:0,tenPack:0}};i.type==="single"?(C.singleClasses+=1,console.log("➕ Adding 1 single class")):i.type==="five"?(C.fivePack+=5,console.log("➕ Adding 5 classes to fivePack")):i.type==="ten"&&(C.tenPack+=10,console.log("➕ Adding 10 classes to tenPack"));try{await le.updateUserCredits(w.id,{single_classes:C.singleClasses,five_pack_classes:C.fivePack,ten_pack_classes:C.tenPack}),console.log("✅ Credits updated in database")}catch(O){console.log("⚠️ Failed to update credits in database:",O)}d(O=>O&&(console.log("📊 Updated class packs after purchase:",C),{...O,classPacks:C})),console.log("✅ User credits updated successfully")}else console.log("❌ No valid class or package selected"),console.log("Selected class:",n),console.log("Selected package:",i)}catch(w){console.error("❌ Error saving to database:",w),console.error("❌ Error details:",w),console.log("⚠️ Database error occurred, but continuing with state update...")}setTimeout(()=>{i?i.type==="single"?alert("✅ Single class purchased successfully! You now have 1 class available to book."):alert(`✅ Payment successful! You now have ${i.type==="five"?"5":"10"} classes available.`):n&&alert("✅ Class booked successfully! Check your account for details.")},100),e("home"),o(null),c(null)}})});case"classes":return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx(wt,{user:l,onLoginClick:()=>b(!0),onAccountClick:()=>g(!0),currentView:a,onNavigateHome:()=>T("home"),onNavigateClasses:()=>T("classes"),onNavigateTeachers:()=>T("teachers"),onNavigatePackages:()=>T("packages"),onNavigateContact:()=>T("contact"),onNavigateRegister:()=>T("register"),onNavigateFAQ:()=>T("faq"),onNavigateAdmin:()=>T("admin")}),t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsx(Cu,{onBookClass:fe,onCancelClass:I,onPayForClass:P,user:l,bookedClasses:j,isClassBooked:ce})}),t.jsx(Ot,{onShowTerms:()=>S(!0),onShowPrivacy:()=>N(!0)})]});case"teachers":return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx(wt,{user:l,onLoginClick:()=>b(!0),onAccountClick:()=>g(!0),currentView:a,onNavigateHome:()=>T("home"),onNavigateClasses:()=>T("classes"),onNavigateTeachers:()=>T("teachers"),onNavigatePackages:()=>T("packages"),onNavigateContact:()=>T("contact"),onNavigateRegister:()=>T("register"),onNavigateFAQ:()=>T("faq"),onNavigateAdmin:()=>T("admin")}),t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsx(Iu,{})}),t.jsx(Ot,{onShowTerms:()=>S(!0),onShowPrivacy:()=>N(!0)})]});case"packages":return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx(wt,{user:l,onLoginClick:()=>b(!0),onAccountClick:()=>g(!0),currentView:a,onNavigateHome:()=>T("home"),onNavigateClasses:()=>T("classes"),onNavigateTeachers:()=>T("teachers"),onNavigatePackages:()=>T("packages"),onNavigateContact:()=>T("contact"),onNavigateRegister:()=>T("register"),onNavigateFAQ:()=>T("faq"),onNavigateAdmin:()=>T("admin")}),t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsx(Oh,{onPurchasePackage:be,user:l})}),t.jsx(Ot,{onShowTerms:()=>S(!0),onShowPrivacy:()=>N(!0)})]});case"contact":return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx(wt,{user:l,onLoginClick:()=>b(!0),onAccountClick:()=>g(!0),currentView:a,onNavigateHome:()=>T("home"),onNavigateClasses:()=>T("classes"),onNavigateTeachers:()=>T("teachers"),onNavigatePackages:()=>T("packages"),onNavigateContact:()=>T("contact"),onNavigateRegister:()=>T("register"),onNavigateFAQ:()=>T("faq"),onNavigateAdmin:()=>T("admin")}),t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsx(dh,{})}),t.jsx(Ot,{onShowTerms:()=>S(!0),onShowPrivacy:()=>N(!0)})]});case"register":return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx(wt,{user:l,onLoginClick:()=>b(!0),onAccountClick:()=>g(!0),currentView:a,onNavigateHome:()=>T("home"),onNavigateClasses:()=>T("classes"),onNavigateTeachers:()=>T("teachers"),onNavigatePackages:()=>T("packages"),onNavigateContact:()=>T("contact"),onNavigateRegister:()=>T("register"),onNavigateFAQ:()=>T("faq"),onNavigateAdmin:()=>T("admin")}),t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsx(ch,{})}),t.jsx(Ot,{onShowTerms:()=>S(!0),onShowPrivacy:()=>N(!0)})]});case"faq":return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx(wt,{user:l,onLoginClick:()=>b(!0),onAccountClick:()=>g(!0),currentView:a,onNavigateHome:()=>T("home"),onNavigateClasses:()=>T("classes"),onNavigateTeachers:()=>T("teachers"),onNavigatePackages:()=>T("packages"),onNavigateContact:()=>T("contact"),onNavigateRegister:()=>T("register"),onNavigateFAQ:()=>T("faq"),onNavigateAdmin:()=>T("admin")}),t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsx(nf,{})}),t.jsx(Ot,{onShowTerms:()=>S(!0),onShowPrivacy:()=>N(!0)})]});case"admin":return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx(wt,{user:l,onLoginClick:()=>b(!0),onAccountClick:()=>g(!0),currentView:a,onNavigateHome:()=>T("home"),onNavigateClasses:()=>T("classes"),onNavigateTeachers:()=>T("teachers"),onNavigatePackages:()=>T("packages"),onNavigateContact:()=>T("contact"),onNavigateRegister:()=>T("register"),onNavigateFAQ:()=>T("faq"),onNavigateAdmin:()=>T("admin")}),t.jsx(og,{user:l,onBack:ue})]});case"password-reset":return t.jsx(Ih,{});default:return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx(wt,{user:l,onLoginClick:()=>b(!0),onAccountClick:()=>g(!0),currentView:a,onNavigateHome:()=>T("home"),onNavigateClasses:()=>T("classes"),onNavigateTeachers:()=>T("teachers"),onNavigatePackages:()=>T("packages"),onNavigateContact:()=>T("contact"),onNavigateRegister:()=>T("register"),onNavigateFAQ:()=>T("faq"),onNavigateAdmin:()=>T("admin")}),t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[t.jsxs("div",{className:"mb-12",children:[t.jsx(uc,{}),t.jsx("div",{className:"text-center mt-6",children:t.jsx($,{onClick:H,size:"lg",className:"px-8 py-3",children:"Book a Class Now"})})]}),t.jsx("div",{className:"mb-12",children:t.jsx(gh,{})}),t.jsx("div",{className:"mb-12",children:t.jsx(Pu,{})}),t.jsx("div",{className:"mb-12",children:t.jsx(Ou,{})}),t.jsx(Ot,{onShowTerms:()=>S(!0),onShowPrivacy:()=>N(!0)})]})]})}};return u?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),t.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})}):t.jsxs(t.Fragment,{children:[t.jsx(of,{}),W(),t.jsx(Bf,{}),t.jsx(xf,{isOpen:x,onClose:()=>b(!1),onLogin:M,onSignup:Z,onResetPassword:Q}),t.jsx(ct,{open:m,onOpenChange:g,children:t.jsxs(dt,{className:"sm:max-w-5xl max-h-[90vh] overflow-y-auto",children:[t.jsxs(ut,{children:[t.jsx(ht,{children:"Your Account"}),t.jsx(ft,{children:"Manage your class credits, bookings, and account information."})]}),t.jsx(jf,{user:l,onLogout:q,onNavigateToClasses:()=>{g(!1),T("classes")},onNavigateToPackages:()=>{g(!1),T("packages")}})]})}),t.jsx(ct,{open:_,onOpenChange:S,children:t.jsxs(dt,{className:"sm:max-w-4xl",children:[t.jsxs(ut,{children:[t.jsx(ht,{children:"Terms of Service"}),t.jsx(ft,{children:"Please read our terms of service and class policies carefully."})]}),t.jsx(Mf,{})]})}),t.jsx(ct,{open:R,onOpenChange:N,children:t.jsxs(dt,{className:"sm:max-w-4xl",children:[t.jsxs(ut,{children:[t.jsx(ht,{children:"Privacy Policy"}),t.jsx(ft,{children:"Learn how we collect, use, and protect your personal information."})]}),t.jsx(Uf,{})]})})]})}Cr.createRoot(document.getElementById("root")).render(t.jsx(A.StrictMode,{children:t.jsx(lg,{})}));export{$ as B,U as C,ie as I,J as L,ne as a,oe as b,F as c,Sg as l};
